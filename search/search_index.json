{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"InstaAPI","text":""},{"location":"#powerful-instagram-private-api-library","title":"Powerful Instagram Private API Library","text":"<p>curl_cffi engine \u00b7 5-strategy anonymous scraping \u00b7 True async \u00b7 Anti-detection \u00b7 AI Agent</p> <p> Install  Quick Start</p>"},{"location":"#why-instaapi","title":"Why InstaAPI?","text":"Feature InstaAPI instagrapi instaloader Anonymous scraping \u2705 5 strategies \u26a0\ufe0f Limited \u26a0\ufe0f Basic Async support \u2705 32 async modules \u274c \u274c TLS fingerprint \u2705 10+ browsers \u274c \u274c Speed modes \u2705 4 modes \u274c \u274c Proxy management \u2705 Built-in \u26a0\ufe0f Basic \u274c AI Agent \u2705 13 providers \u274c \u274c Advanced tools \u2705 12 tools \u274c \u274c CI/CD + Tests \u2705 390 tests \u26a0\ufe0f Basic \u26a0\ufe0f Basic"},{"location":"#key-features","title":"Key Features","text":"<ul> <li> <p> Anonymous Scraping</p> <p>5-strategy fallback chain \u2014 HTML, Embed, GraphQL, Mobile, Web API. No login needed for public data.</p> </li> <li> <p> Speed Modes</p> <p>SAFE \u2192 FAST \u2192 TURBO \u2192 UNLIMITED. From ban-proof to 1000 concurrent requests.</p> </li> <li> <p> Full Async Parity</p> <p>32 sync + 32 async modules \u2014 complete feature match. <code>asyncio.gather</code> for bulk ops.</p> </li> <li> <p> Anti-Detection</p> <p>TLS fingerprint rotation, browser impersonation, header randomization via <code>curl_cffi</code>.</p> </li> <li> <p> Proxy Management</p> <p>Built-in <code>ProxyManager</code> with health checking, auto-rotation, and BrightData integration.</p> </li> <li> <p> Plugin System</p> <p>Extensible architecture with event hooks, plugins, and middleware.</p> </li> <li> <p> AI Agent </p> <p>Control Instagram with natural language. 13 AI providers, 10 tools, memory, scheduling, webhooks.</p> <p> Learn more</p> </li> <li> <p> 12 Advanced Tools </p> <p>Analytics, Export, Growth, Automation, Monitor, Scheduler, Pipeline, AI Suggest, Audience, Comment Manager, A/B Test, Bulk Download.</p> <p> Browse tools</p> </li> <li> <p> Testing &amp; CI/CD</p> <p>390 tests, pytest-cov, GitHub Actions pipeline \u2014 lint, test, security, build, benchmark.</p> </li> </ul>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install instaapi\n</code></pre> <p>With extras:</p> <pre><code>pip install instaapi[dev]      # pytest, pytest-cov, pytest-asyncio\npip install instaapi[agent]    # AI providers (Gemini, OpenAI, Claude)\npip install instaapi[web]      # FastAPI web playground\npip install instaapi[all]      # everything\n</code></pre>"},{"location":"#quick-example","title":"Quick Example","text":"Anonymous (no login)AuthenticatedAsyncAI Agent Advanced Tools  <pre><code>from instaapi import Instagram\n\nig = Instagram.anonymous()\nprofile = ig.public.get_profile(\"cristiano\")\nprint(f\"{profile['username']}: {profile['followers']:,} followers\")\n</code></pre> <pre><code>from instaapi import Instagram\n\nig = Instagram.from_env(\".env\")\nuser = ig.users.get_by_username(\"cristiano\")\nig.media.like(user.media[0].pk)\n</code></pre> <pre><code>import asyncio\nfrom instaapi import AsyncInstagram\n\nasync def main():\n    async with AsyncInstagram.anonymous(unlimited=True) as ig:\n        tasks = [ig.public.get_profile(u) for u in [\"nike\", \"adidas\"]]\n        results = await asyncio.gather(*tasks)\n\nasyncio.run(main())\n</code></pre> <pre><code>from instaapi import Instagram\nfrom instaapi.agent import InstaAgent, Permission\n\nig = Instagram.from_env(\".env\")\nagent = InstaAgent(\n    ig=ig,\n    provider=\"gemini\",\n    permission=Permission.FULL_ACCESS,\n    memory=True,\n)\n\nagent.ask(\"Get @cristiano's last 10 posts and save to CSV\")\nagent.ask(\"Compare @nike and @adidas engagement rates\")\nagent.ask(\"Find the best posting time for my account\")\n</code></pre> <pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Analytics\nreport = ig.analytics.engagement_rate(\"cristiano\")\n\n# Export to CSV\nig.export.followers_to_csv(\"nike\", \"followers.csv\")\n\n# Growth engine\nig.growth.follow_users_of(\"competitor\", count=20)\n\n# Hashtag research\nanalysis = ig.hashtag_research.analyze(\"python\")\n\n# A/B testing\ntest = ig.ab_test.create(\"Test\", variants={\"A\": {}, \"B\": {}})\n</code></pre>"},{"location":"#performance","title":"Performance","text":"Benchmark Result Library import ~170ms Pydantic model parsing 190,840 ops/sec Rate limiter checks 546,448 ops/sec AntiDetect init 0.2ms API module init (12) 1.0ms Memory footprint 0.5KB peak"},{"location":"advanced/async-guide/","title":"Async Guide","text":"<p>InstaAPI is built ground-up to support True Python Async I/O via the <code>curl_cffi</code> event loop integration. The async pattern makes large-scale scraping 50x to 100x faster than traditional synchronous models.</p>"},{"location":"advanced/async-guide/#async-vs-sync-comparison","title":"Async vs Sync Comparison","text":"<pre><code># Sync: Takes ~300 seconds (5 mins)\nfrom instaapi import Instagram\n\nig = Instagram.anonymous(unlimited=True)\nfor i in range(100):\n   profile = ig.public.get_profile(f\"user_{i}\")\n   print(profile)\n</code></pre> <p>Versus True Async:</p> <pre><code># Async: Takes ~10 seconds!\nimport asyncio\nfrom instaapi import AsyncInstagram\n\nasync def main():\n    async with AsyncInstagram.anonymous(unlimited=True) as ig:\n        # Create 100 parallel tasks\n        tasks = [ig.public.get_profile(f\"user_{i}\") for i in range(100)]\n\n        # Run them all concurrently\n        profiles = await asyncio.gather(*tasks)\n\n        for p in profiles:\n            print(p)\n\nasyncio.run(main())\n</code></pre>"},{"location":"advanced/async-guide/#setup-async-client","title":"Setup Async Client","text":"<p>You must initiate the Async client inside an async context manager (<code>async with</code>) to properly handle connections, TLS contexts, and session loops.</p> <pre><code>from instaapi import AsyncInstagram\n\nasync def runner():\n    # Regular safe speed mode\n    async with AsyncInstagram.from_env() as ig:\n        user = await ig.users.get_by_username(\"nasa\")\n        print(user.followers)\n</code></pre>"},{"location":"advanced/async-guide/#speed-modes-in-async","title":"Speed Modes in Async","text":"<p>You must pass the speed modes when instantiating the Async client. <code>AsyncRateLimiter</code> guarantees these limits automatically during <code>asyncio.gather()</code>.</p> <pre><code># Turbo Mode (Requires Proxies)\nasync with AsyncInstagram.from_env(mode=\"turbo\") as ig:\n    ig.add_proxies([\"http://proxy1:80\", \"http://proxy2:80\"])\n\n    tasks = [ig.users.get_by_username(user) for user in HUGE_LIST]\n    results = await asyncio.gather(*tasks)\n</code></pre> <p>See Speed Modes for deeper details on parallel execution limits.</p>"},{"location":"advanced/async-guide/#awaiting-endpoints","title":"Awaiting Endpoints","text":"<p>All endpoints that exist on <code>Instagram</code> exist on <code>AsyncInstagram</code> but require an <code>await</code>:</p> Sync Async <code>ig.users.get_by_id(pk)</code> <code>await ig.users.get_by_id(pk)</code> <code>ig.media.like(pk)</code> <code>await ig.media.like(pk)</code> <code>ig.feed.user(pk)</code> <code>await ig.feed.user(pk)</code> <code>ig.public.search(\"query\")</code> <code>await ig.public.search(\"query\")</code>"},{"location":"advanced/async-guide/#when-not-to-use-async","title":"When NOT to use Async","text":"<p>While Async is magical for bulk reading (scraping, public data, fetching details), you should avoid huge concurrent write operations to prevent instant bans:</p> <ul> <li>Do not concurrently <code>like()</code> 100 pictures in 1 second.</li> <li>Do not concurrently <code>follow()</code> 50 users at once.</li> </ul> <p>Async is designed to fetch gigabytes of data rapidly. Use it for read-heavy operations!</p>"},{"location":"advanced/batch-operations/","title":"Batch Operations","text":"<p><code>ig.batch</code> \u2014 Optimized loops and bulk fetching methods.</p> <p>Different from Anonymous Bulk</p> <p><code>BatchAPI</code> is specifically for Authenticated contexts. For scraping hundreds of public profiles without login, refer to <code>AsyncPublicAPI</code> and Anonymous <code>bulk_operations</code>.</p>"},{"location":"advanced/batch-operations/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Quickly verify a list of usernames\nresults = ig.batch.check_profiles([\"nike\", \"adidas\", \"fake_user_123\"])\n\nfor username, data in results.items():\n    if data:\n        print(f\"@{username} exists! (PK: {data.pk})\")\n    else:\n        print(f\"@{username} does not exist.\")\n</code></pre>"},{"location":"advanced/batch-operations/#why-batchapi","title":"Why BatchAPI?","text":"<p>When dealing with authenticated endpoints (like <code>users.get_by_username()</code>), doing a standard Python <code>for</code> loop over 500 users will trigger Rate Limits quickly:</p> <pre><code># Bad - Will get 429 Rate Limited\nfor user in huge_list:\n    ig.users.get_by_username(user)\n</code></pre> <p><code>BatchAPI</code> wrappers automatically enforce optimal pacing, jittered delays, and chunking:</p> <pre><code># Good - Automatically paces and chunks\nusers = ig.batch.get_users(huge_list)\n</code></pre>"},{"location":"advanced/batch-operations/#supported-operations","title":"Supported Operations","text":"<p>Currently, the authenticated Batch extensions support bulk reads:</p> <ul> <li><code>check_profiles(usernames: list[str]) -&gt; dict</code>: Returns <code>{username: UserShort}</code>. Extremely fast for cleaning target lists.</li> <li><code>get_users(usernames: list[str]) -&gt; list[User]</code>: Resolves full <code>User</code> models safely.</li> <li><code>fetch_medias(media_ids: list[str]) -&gt; list[Media]</code>: Resolves full <code>Media</code> models.</li> </ul>"},{"location":"advanced/challenge-resolver/","title":"Challenge Resolver","text":"<p>When logging into an old account from a new IP, Instagram often presents a \"Suspicious Login Attempt\" challenge requiring 6-digit Email or SMS verification.</p> <p>InstaAPI provides built-in tools to resolve these automatically (<code>resolve()</code>) and headless integrations with Gmail to completely bypass manual intervention.</p>"},{"location":"advanced/challenge-resolver/#standard-callback-approach","title":"Standard Callback Approach","text":"<p>The simplest method is providing a callback function during setup:</p> <pre><code>from instaapi import Instagram\nfrom instaapi.exceptions import ChallengeRequired\n\ndef prompt_for_code(challenge_type, contact_point):\n    print(f\"Instagram sent a code to your {challenge_type}: {contact_point}\")\n    return input(\"Enter the 6-digit code here: \")\n\nig = Instagram(challenge_callback=prompt_for_code)\n\ntry:\n    ig.login(\"my_username\", \"my_password\")\nexcept ChallengeRequired as e:\n    # InstaAPI will automatically trigger the prompt_for_code callback, \n    # submit the returned code, and if successful, complete the login.\n    print(\"Handled challenge successfully!\")\n</code></pre>"},{"location":"advanced/challenge-resolver/#headless-auto-resolver-gmail","title":"Headless Auto-Resolver (Gmail)","text":"<p>If the account uses Gmail, you can use the <code>EmailVerifier</code> module to automatically scrape the code from the inbox without any prompts.</p>"},{"location":"advanced/challenge-resolver/#1-setup-google-cloud-api","title":"1. Setup Google Cloud API","text":"<ol> <li>Go to Google Cloud Console.</li> <li>Enable the Gmail API.</li> <li>Create an OAuth 2.0 Client ID (Desktop App).</li> <li>Download <code>credentials.json</code> and place it in your project root.</li> </ol>"},{"location":"advanced/challenge-resolver/#2-configure-the-auto-resolver","title":"2. Configure the Auto-Resolver","text":"<pre><code>from instaapi import Instagram\nfrom instaapi.email_verifier import EmailVerifier\n\n# 1. Init verifier\nverifier = EmailVerifier(\"credentials.json\", \"token.json\")\n\ndef auto_gmail_resolve(ctype, contact):\n    return verifier.get_instagram_code(wait_time=30)\n\n# 2. Bind to Instagram object\nig = Instagram(challenge_callback=auto_gmail_resolve)\n\n# 3. Login\nig.login(\"my_user\", \"my_pass\")\n# If it hits a challenge, it will wait up to 30s, read the Gmail inbox, \n# extract the 6 digits, and resume!\n</code></pre>"},{"location":"advanced/challenge-resolver/#supported-challenge-types","title":"Supported Challenge Types","text":"<p>The internal <code>ChallengeHandler</code> module parses and supports:</p> <ul> <li><code>email</code> (Standard 6-digit email)</li> <li><code>sms</code> (Standard 6-digit text)</li> <li><code>consent</code> (Terms of Service updates \u2014 auto-accepted!)</li> <li><code>platform</code> (App-based approval loops)</li> </ul> <p>If a Challenge type is completely unsupported (like a visual CAPTCHA or facial scan), the library will immediately raise a hard <code>ChallengeRequired</code> exception stating manual app intervention is needed.</p>"},{"location":"advanced/events/","title":"Event System","text":"<p>InstaAPI includes a robust synchronous <code>EventEmitter</code> natively built into the <code>HttpClient</code>. Every major action, request, error, and proxy shift broadcasts a standardized event string that any plugin or script can hook into.</p>"},{"location":"advanced/events/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\nfrom instaapi.events import EventType\n\ndef on_request(data):\n    print(f\"\ud83d\udce1 Making Request: {data.get('url')}\")\n\ndef on_challenge(data):\n    print(f\"\ud83d\udea8 CHALLENGE ISSUED for session!\")\n\nig = Instagram.from_env()\n\n# Hook into events\nig.on(\"api_request\", on_request)\nig.on(EventType.CHALLENGE_REQUIRED, on_challenge)\n</code></pre>"},{"location":"advanced/events/#available-event-types","title":"Available Event Types","text":"<p>The <code>instaapi.events.EventType</code> ENUM defines all supported hooks:</p> Event Type String Fired When Data Payload <code>api_request</code> Right before firing a curl_cffi HTTP request <code>{\"url\", \"method\", \"proxy\"}</code> <code>api_response</code> Received raw response <code>{\"url\", \"status_code\", \"time_ms\"}</code> <code>api_error</code> Critical network/parsing crash <code>{\"url\", \"error_msg\"}</code> <code>rate_limited</code> Encounters 429 Too Many Requests <code>{\"url\", \"time_waited\"}</code> <code>challenge_required</code> Account flagged for verification <code>{\"challenge_url\", \"type\"}</code> <code>proxy_rotated</code> RateLimiter / health check skips a proxy <code>{\"old_proxy\", \"new_proxy\"}</code> <code>session_expired</code> Auth session requires refresh (401/302) <code>{\"session_id\"}</code> <code>login_success</code> Re-auth auto callback passed <code>{\"user_id\"}</code>"},{"location":"advanced/events/#using-the-eventemitter","title":"Using the EventEmitter","text":"<p>You can listen (<code>.on</code>) and unregister (<code>.off</code>) anywhere on the main <code>ig</code> wrapper.</p>"},{"location":"advanced/events/#monitor-scraping-speed","title":"Monitor Scraping Speed","text":"<pre><code>import time\n\nclass SpeedMonitor:\n    def __init__(self, ig):\n        self.count = 0\n        self.start = time.time()\n        ig.on(EventType.API_RESPONSE, self.tick)\n\n    def tick(self, data):\n        self.count += 1\n        if self.count % 100 == 0:\n            elapsed = time.time() - self.start\n            print(f\"Scraped 100 reqs in {elapsed:.2f}s\")\n            self.start = time.time()\n\nig = Instagram.anonymous(unlimited=True)\nmonitor = SpeedMonitor(ig)\n</code></pre>"},{"location":"advanced/events/#removing-hooks","title":"Removing Hooks","text":"<p>To safely disconnect an active event hook:</p> <pre><code>ig.off(EventType.API_RESPONSE, monitor.tick)\n</code></pre>"},{"location":"advanced/multi-account/","title":"Multi-Account","text":"<p>For automation tools, running campaigns from a single account is risky. <code>MultiAccount</code> is a robust daemon-like structure that spins up parallel headless workers, assigning specific jobs to specific accounts.</p>"},{"location":"advanced/multi-account/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi.multi_account import MultiAccountManager\n\n# Setup 3 worker accounts\nmanager = MultiAccountManager()\nmanager.load_sessions([\n    \"session_bot1.json\",\n    \"session_bot2.json\",\n    \"session_bot3.json\"\n])\n\n# Tell Bot 1 and Bot 2 to scrape profile followers\nmanager.assign_task(\n    accounts=[\"session_bot1\", \"session_bot2\"],\n    action=\"scrape_followers\",\n    target=\"cristiano\"\n)\n\n# Tell Bot 3 to like a specific post\nmanager.assign_task(\n    accounts=[\"session_bot3\"],\n    action=\"like_media\",\n    target=\"1234567890\"\n)\n\n# Start all workers concurrently\nmanager.start_workers()\n</code></pre>"},{"location":"advanced/multi-account/#multiaccount-vs-smartrotation","title":"MultiAccount vs SmartRotation","text":"<p>Both handle multiple accounts, but serve different purposes:</p> Feature SmartRotation MultiAccountManager Goal Distribute read operations to prevent rate-limits. Run specific complex actions from specific profiles. Logic Returns the \"healthiest\" client for the next request. Runs background threads permanently attached to one profile. Use Case Mass Profile Scraping, Data Harvesting. Auto-DMs, Engagement Pods, Mass Follow scripts."},{"location":"advanced/multi-account/#creating-custom-actions","title":"Creating Custom Actions","text":"<p>The MultiAccount Manager works on string-based actions mapped to functional callbacks:</p> <pre><code>def my_custom_like_loop(ig_client, task_data):\n    \"\"\"\n    ig_client is the dedicated Instagram() object for this worker.\n    task_data is the target payload.\n    \"\"\"\n    media_id = task_data.get(\"target\")\n    ig_client.media.like(media_id)\n    print(f\"[{ig_client.username}] Liked {media_id}!\")\n\n# Register action\nmanager.register_action(\"like_loop\", my_custom_like_loop)\n\n# Trigger Action\nmanager.assign_task(accounts=[\"bot1\"], action=\"like_loop\", target=\"ABC123XYZ\")\n</code></pre> <p>For extremely complex interactions, MultiAccount integrates cleanly with the builtin <code>SchedulerAPI</code>.</p>"},{"location":"advanced/playground/","title":"Web Playground","text":"<p>InstaAPI Web Playground \u2014 a full-featured browser-based interface for testing and interacting with the entire InstaAPI library. Includes AI Chat, real-time API testing, data saving, and CSV export.</p>"},{"location":"advanced/playground/#quick-start","title":"Quick Start","text":"<pre><code>pip install fastapi uvicorn\npython demo_server.py\n# Opens http://localhost:8877\n</code></pre>"},{"location":"advanced/playground/#cli-options","title":"CLI Options","text":"<pre><code>python demo_server.py [OPTIONS]\n</code></pre> Option Default Description <code>--port</code> <code>8877</code> Server port <code>--host</code> <code>127.0.0.1</code> Server host <code>--env</code> <code>.env</code> Path to .env file"},{"location":"advanced/playground/#requirements","title":"Requirements","text":"<ul> <li><code>fastapi</code> \u2014 web framework</li> <li><code>uvicorn</code> \u2014 ASGI server</li> <li><code>.env</code> file with Instagram credentials</li> <li><code>GEMINI_API_KEY</code> or <code>OPENAI_API_KEY</code> (optional, for AI Chat)</li> </ul>"},{"location":"advanced/playground/#architecture","title":"Architecture","text":"<pre><code>graph TB\n    Browser[\"\ud83c\udf10 Browser UI\"] --&gt;|HTTP| Server[\"\u26a1 FastAPI Server\"]\n\n    Server --&gt;|/api/ai/*| Agent[\"\ud83e\udd16 InstaAgent\"]\n    Server --&gt;|/api/users/*| Users[\"\ud83d\udc64 UsersAPI\"]\n    Server --&gt;|/api/media/*| Media[\"\ud83d\udcf7 MediaAPI\"]\n    Server --&gt;|/api/feed/*| Feed[\"\ud83d\udcf0 FeedAPI\"]\n    Server --&gt;|/api/search/*| Search[\"\ud83d\udd0d SearchAPI\"]\n    Server --&gt;|/api/stories/*| Stories[\"\ud83d\udcf1 StoriesAPI\"]\n    Server --&gt;|/api/friendships/*| Friends[\"\ud83e\udd1d FriendshipsAPI\"]\n    Server --&gt;|/api/account/*| Account[\"\u2699\ufe0f AccountAPI\"]\n    Server --&gt;|/api/public/*| Public[\"\ud83c\udf0d PublicAPI\"]\n    Server --&gt;|/api/save| Storage[\"\ud83d\udcbe JSON Storage\"]\n    Server --&gt;|/api/export/csv| Export[\"\ud83d\udcca CSV Export\"]\n\n    subgraph Instagram Client\n        Users\n        Media\n        Feed\n        Search\n        Stories\n        Friends\n        Account\n        Public\n    end</code></pre>"},{"location":"advanced/playground/#ui-panels","title":"UI Panels","text":"Panel Description AI Chat Natural language interface powered by InstaAgent Users Profile lookup, search, bio parsing Media Post info, likers, comments Feed User feed, hashtag feed, liked, saved Search Top search, users, hashtags, places, explore Stories User stories, highlights, tray Friendships Followers, following, mutual, pending Account Current user, blocked, restricted, privacy Public Anonymous profile/posts (no login required) Hashtags Hashtag info Notifications Raw, parsed, counts, follow, like Direct Inbox Saved View/manage saved results History Request history log Dashboard System statistics"},{"location":"advanced/playground/#api-reference","title":"API Reference","text":"<p>All endpoints return a unified JSON response:</p> <pre><code>{\n    \"success\": true,\n    \"message\": \"OK\",\n    \"data\": { ... },\n    \"timestamp\": 1740567890.5\n}\n</code></pre> <p>On error:</p> <pre><code>{\n    \"success\": false,\n    \"error\": \"Error description\",\n    \"timestamp\": 1740567890.5\n}\n</code></pre>"},{"location":"advanced/playground/#system","title":"System","text":"Method Endpoint Description <code>GET</code> <code>/api/status</code> Server status, uptime, request counts, AI availability <code>GET</code> <code>/api/history</code> Request history (last 50) <code>GET</code> <code>/api/dashboard</code> Instagram client dashboard stats"},{"location":"advanced/playground/#ai-chat","title":"AI Chat","text":"Method Endpoint Description <code>POST</code> <code>/api/ai/ask</code> Send a natural language question <code>POST</code> <code>/api/ai/reset</code> Reset conversation history <code>GET</code> <code>/api/ai/history</code> Get AI conversation history <p>POST <code>/api/ai/ask</code> body:</p> <pre><code>{\n    \"message\": \"Get Cristiano's follower count\"\n}\n</code></pre> <p>Response:</p> <pre><code>{\n    \"success\": true,\n    \"answer\": \"Cristiano has 650M followers\",\n    \"code\": \"user = ig.users.get_by_username('cristiano')...\",\n    \"files\": [],\n    \"steps\": 2,\n    \"tokens\": 1200,\n    \"duration\": 3.5,\n    \"error\": null\n}\n</code></pre>"},{"location":"advanced/playground/#data-export","title":"Data &amp; Export","text":"Method Endpoint Description <code>POST</code> <code>/api/save</code> Save result to JSON file <code>GET</code> <code>/api/saved</code> List all saved files <code>GET</code> <code>/api/saved/{filename}</code> Get saved file content <code>DELETE</code> <code>/api/saved/{filename}</code> Delete saved file <code>POST</code> <code>/api/export/csv</code> Export data as CSV download"},{"location":"advanced/playground/#users","title":"Users","text":"Method Endpoint Description <code>GET</code> <code>/api/users/username/{username}</code> Get user by username <code>GET</code> <code>/api/users/id/{user_id}</code> Get user by ID <code>GET</code> <code>/api/users/search?q=query</code> Search users <code>GET</code> <code>/api/users/full/{username}</code> Full profile (posts + followers) <code>GET</code> <code>/api/users/bio/{username}</code> Parse bio (emails, phones, links)"},{"location":"advanced/playground/#media","title":"Media","text":"Method Endpoint Description <code>GET</code> <code>/api/media/info/{media_pk}</code> Get media info <code>GET</code> <code>/api/media/full/{media_pk}</code> Full media details <code>GET</code> <code>/api/media/v2/{media_pk}</code> Media info (v2 endpoint) <code>GET</code> <code>/api/media/by-url?url=...</code> Get media by Instagram URL <code>GET</code> <code>/api/media/likers/{media_pk}</code> Get likers of a post <code>GET</code> <code>/api/media/comments/{media_pk}</code> Get parsed comments"},{"location":"advanced/playground/#feed","title":"Feed","text":"Method Endpoint Description <code>GET</code> <code>/api/feed/user/{user_pk}?count=12</code> User's feed <code>GET</code> <code>/api/feed/tag/{hashtag}</code> Hashtag feed <code>GET</code> <code>/api/feed/liked</code> Your liked posts <code>GET</code> <code>/api/feed/saved</code> Your saved posts"},{"location":"advanced/playground/#search","title":"Search","text":"Method Endpoint Description <code>GET</code> <code>/api/search/top?q=query</code> Top search (mixed results) <code>GET</code> <code>/api/search/users?q=query</code> Search users only <code>GET</code> <code>/api/search/hashtags?q=query</code> Search hashtags <code>GET</code> <code>/api/search/places?q=query</code> Search places <code>GET</code> <code>/api/search/explore</code> Explore page content"},{"location":"advanced/playground/#stories","title":"Stories","text":"Method Endpoint Description <code>GET</code> <code>/api/stories/user/{user_pk}</code> User's active stories <code>GET</code> <code>/api/stories/highlights/{user_pk}</code> User's highlights tray <code>GET</code> <code>/api/stories/tray</code> Your stories tray"},{"location":"advanced/playground/#friendships","title":"Friendships","text":"Method Endpoint Description <code>GET</code> <code>/api/friendships/followers/{user_pk}?count=50</code> Get followers <code>GET</code> <code>/api/friendships/following/{user_pk}?count=50</code> Get following <code>GET</code> <code>/api/friendships/status/{user_pk}</code> Friendship status <code>GET</code> <code>/api/friendships/mutual/{user_pk}</code> Mutual followers <code>GET</code> <code>/api/friendships/pending</code> Pending follow requests"},{"location":"advanced/playground/#account","title":"Account","text":"Method Endpoint Description <code>GET</code> <code>/api/account/me</code> Current user profile <code>GET</code> <code>/api/account/blocked</code> Blocked users list <code>GET</code> <code>/api/account/restricted</code> Restricted users list <code>GET</code> <code>/api/account/login-activity</code> Login activity <code>GET</code> <code>/api/account/privacy</code> Privacy settings <code>GET</code> <code>/api/account/info</code> Account info"},{"location":"advanced/playground/#public-no-login","title":"Public (No Login)","text":"Method Endpoint Description <code>GET</code> <code>/api/public/profile/{username}</code> Public profile <code>GET</code> <code>/api/public/posts/{username}?count=12</code> Public posts"},{"location":"advanced/playground/#hashtags","title":"Hashtags","text":"Method Endpoint Description <code>GET</code> <code>/api/hashtags/info/{tag}</code> Hashtag information"},{"location":"advanced/playground/#notifications","title":"Notifications","text":"Method Endpoint Description <code>GET</code> <code>/api/notifications</code> Raw notifications <code>GET</code> <code>/api/notifications/counts</code> Notification counts <code>GET</code> <code>/api/notifications/parsed</code> Parsed notifications <code>GET</code> <code>/api/notifications/follows</code> Follow notifications <code>GET</code> <code>/api/notifications/likes</code> Like notifications"},{"location":"advanced/playground/#direct-messages","title":"Direct Messages","text":"Method Endpoint Description <code>GET</code> <code>/api/direct/inbox</code> DM inbox"},{"location":"advanced/playground/#data-saving","title":"Data Saving","text":"<p>Results from any API call can be saved to disk:</p> <pre><code># Save current result\ncurl -X POST http://localhost:8877/api/save \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"cristiano_profile\"}'\n\n# List saved files\ncurl http://localhost:8877/api/saved\n\n# Download as CSV\ncurl -X POST http://localhost:8877/api/export/csv \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"data\": {\"data\": [{\"username\": \"cr7\", \"followers\": 650000000}]}}'\n</code></pre> <p>Saved files are stored in <code>demo/saved/</code> directory as JSON.</p>"},{"location":"advanced/playground/#programmatic-usage","title":"Programmatic Usage","text":"<pre><code>from demo_server import app\n\n# Use directly with uvicorn\nimport uvicorn\nuvicorn.run(app, host=\"0.0.0.0\", port=8877)\n</code></pre> <p>Or import and customize the FastAPI app:</p> <pre><code>from demo_server import app, get_ig\n\n# Add your own endpoints\n@app.get(\"/api/custom/my-endpoint\")\nasync def my_endpoint():\n    ig = get_ig()\n    # Your custom logic\n    return {\"result\": \"...\"}\n</code></pre>"},{"location":"advanced/plugins/","title":"Plugin System","text":"<p>InstaAPI is built around a flexible plugin architecture. Every internal module (UsersAPI, SearchAPI, etc.) is technically a plugin hooked into the core client context.</p> <p>You can create your own plugins to inject custom middleware, handle state, or automate complex multi-step processes securely.</p>"},{"location":"advanced/plugins/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\nfrom instaapi.plugin import Plugin\n\nclass AutoLikerPlugin(Plugin):\n    \"\"\"Automatically likes any post fetched by get_post_by_shortcode\"\"\"\n\n    name = \"auto_liker\"\n\n    def on_attach(self):\n        # Bind to standard client events\n        self.ig.on(\"api_request_success\", self._check_for_posts)\n\n    def _check_for_posts(self, data):\n        url = data.get(\"url\", \"\")\n        if \"media/info\" in url:\n            # Fake parsing to grab the PK and automatically like it\n            # This is an example of intercepting network streams via plugins\n            print(\"Auto-liker intercepted a media load!\")\n\nig = Instagram.from_env()\nig.use(AutoLikerPlugin()) # Install the plugin\n</code></pre>"},{"location":"advanced/plugins/#building-a-basic-plugin","title":"Building a Basic Plugin","text":"<p>Plugins must subclass <code>instaapi.plugin.Plugin</code> and specify a string <code>name</code>. They are automatically injected with the main client instance as <code>self.ig</code>.</p> <pre><code>class MyCustomTool(Plugin):\n    name = \"my_custom_tool\"\n\n    def on_attach(self):\n        print(f\"Plugin {self.name} attached to client!\")\n\n    def do_something_cool(self):\n        # Access the main IG client directly\n        return self.ig.users.get_by_username(\"cristiano\")\n</code></pre> <p>Once a plugin is injected via <code>ig.use()</code>, it becomes accessible via standard dot-notation using its <code>name</code>:</p> <pre><code>ig.use(MyCustomTool())\n\nuser = ig.my_custom_tool.do_something_cool()\n</code></pre>"},{"location":"advanced/plugins/#writing-custom-apis","title":"Writing Custom APIs","text":"<p>It's recommended to write any complex scripts you use frequently as a Plugin to easily bundle and distribute them without hacking the core library:</p> <pre><code>class CleanerPlugin(Plugin):\n    name = \"cleaner\"\n\n    def unfollow_non_followers(self):\n        followers = self.ig.friendships.get_followers(self.ig.user_id)\n        following = self.ig.friendships.get_following(self.ig.user_id)\n\n        follower_pks = {u.pk for u in followers}\n        for u in following:\n            if u.pk not in follower_pks:\n                self.ig.friendships.unfollow(u.pk)\n                print(f\"Unfollowed {u.username}\")\n\nig.use(CleanerPlugin())\nig.cleaner.unfollow_non_followers()\n</code></pre>"},{"location":"advanced/plugins/#default-core-plugins","title":"Default Core Plugins","text":"<p>InstaAPI uses the plugin system internally for extending \"Tools\" (like Batch, Automation, Scheduler). If you examine the code for <code>GrowthAPI</code>, you will see it relies heavily on the <code>Plugin</code> class structure.</p>"},{"location":"advanced/smart-rotation/","title":"Smart Rotation","text":"<p>When doing heavy authenticated scraping, using a single account/IP will get you banned quickly. InstaAPI provides a <code>SmartRotation</code> system that automatically juggles multiple sessions and proxies to distribute load.</p>"},{"location":"advanced/smart-rotation/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\nfrom instaapi.smart_rotation import SmartRotation\n\n# Initialize router\nrouter = SmartRotation()\n\n# Add multiple accounts / sessions\nrouter.add_session(\"session1.json\")\nrouter.add_session(\"session2.json\")\nrouter.add_session(\"session3.json\")\n\n# Add your proxy pool\nrouter.add_proxies([\n    \"http://px1.com\",\n    \"http://px2.com\",\n    \"http://px3.com\"\n])\n\n# Use the router to transparently assign operations to the healthiest session\nig = router.get_next_client()\nprint(ig.users.get_by_username(\"nike\").followers)\n\n# In a loop, get_next_client() will constantly rotate sessions\nfor i in range(10):\n    client = router.get_next_client()\n    print(f\"Using session: {client.session_id}\")\n    client.public.get_profile(\"adidas\")\n</code></pre>"},{"location":"advanced/smart-rotation/#how-it-works","title":"How It Works","text":"<p>The <code>SmartRotation</code> manager implements a weighted Round-Robin algorithm.</p> <ol> <li>It tracks the \"health score\" of every session (1.0 = perfect, 0.0 = banned/challenged).</li> <li>It assigns requests to the session with the lowest recent usage and highest health.</li> <li>If a session hits a <code>RateLimitError</code> or <code>ChallengeRequired</code>, its score is slashed, and the router will avoid giving it traffic until it recovers or you resolve the challenge.</li> </ol>"},{"location":"advanced/smart-rotation/#combining-with-batchapi","title":"Combining with BatchAPI","text":"<p>The Smart Rotator handles multiple <code>Instagram</code> objects. If you want to use the high-performance <code>BatchAPI</code> or <code>bulk_profiles</code>, you should run them through individual clients:</p> <pre><code># Create 5 workers, each using a different rotated session\nclients = [router.get_next_client() for _ in range(5)]\n\n# Thread 1 uses clients[0], Thread 2 uses clients[1]...\n</code></pre>"},{"location":"advanced/smart-rotation/#auto-recovery","title":"Auto-Recovery","text":"<p>If a session triggers a Challenge, the <code>SmartRotation</code> manager will flag it as <code>STATUS_CHALLENGED</code>.</p> <p>If you configured a Challenge Handler (e.g. Email Auto-Resolver) when generating the clients, the router will automatically attempt to unlock the session in the background while keeping the main script running using the remaining healthy accounts.</p>"},{"location":"agent/architecture/","title":"Architecture","text":""},{"location":"agent/architecture/#system-overview","title":"System Overview","text":"<pre><code>graph TB\n    User[\"\ud83d\udc64 User\"] --&gt;|natural language| Agent[\"\ud83e\udd16 InstaAgent\"]\n    Agent --&gt;|prompt| Provider[\"\u2601\ufe0f AI Provider\"]\n    Provider --&gt;|tool calls| Agent\n    Agent --&gt;|check| Perm[\"\ud83d\udd12 PermissionManager\"]\n    Agent --&gt;|execute| Exec[\"\u26a1 SafeExecutor\"]\n    Exec --&gt;|code| IG[\"\ud83d\udcf1 Instagram Client\"]\n    Agent --&gt;|save| Mem[\"\ud83d\udcbe AgentMemory\"]\n    Agent --&gt;|track| Cost[\"\ud83d\udcb0 CostTracker\"]\n    Agent --&gt;|stream| Stream[\"\ud83d\udce1 StreamHandler\"]\n    Agent --&gt;|notify| Hook[\"\ud83d\udd14 WebhookNotifier\"]\n\n    subgraph Providers\n        Gemini[\"Gemini\"]\n        OpenAI[\"OpenAI\"]\n        Claude[\"Claude\"]\n        DeepSeek[\"DeepSeek\"]\n        Ollama[\"Ollama\"]\n        More[\"+ 8 more\"]\n    end\n\n    Provider --- Providers</code></pre>"},{"location":"agent/architecture/#module-map","title":"Module Map","text":"Module Class Purpose <code>core.py</code> <code>InstaAgent</code> Main agent \u2014 LLM loop, tool dispatch <code>coordinator.py</code> <code>AgentCoordinator</code> Multi-agent parallel/sequential <code>executor.py</code> <code>SafeExecutor</code> Sandboxed code execution <code>permissions.py</code> <code>PermissionManager</code> 3-level permission control <code>memory.py</code> <code>AgentMemory</code> Session persistence (JSON) <code>cost_tracker.py</code> <code>CostTracker</code> Token usage &amp; cost monitoring <code>streaming.py</code> <code>StreamHandler</code> Real-time output (CLI/Web/callback) <code>plugins.py</code> <code>PluginManager</code> Custom tool registration <code>vision.py</code> <code>VisionAnalyzer</code> Image analysis (multimodal) <code>webhook.py</code> <code>WebhookNotifier</code> Telegram/Discord/Email notifications <code>scheduler.py</code> <code>AgentScheduler</code> Cron-like task scheduling <code>tools.py</code> <code>TOOL_HANDLERS</code> 10 built-in tool implementations <code>knowledge.py</code> <code>SYSTEM_PROMPT</code> Full InstaAPI knowledge base <code>providers/</code> <code>BaseProvider</code> 14 AI provider adapters <code>cli.py</code> <code>main()</code> Terminal interface <code>web.py</code> <code>create_app()</code> FastAPI web UI"},{"location":"agent/architecture/#agent-loop","title":"Agent Loop","text":"<pre><code>sequenceDiagram\n    participant U as User\n    participant A as InstaAgent\n    participant L as LLM Provider\n    participant E as SafeExecutor\n\n    U-&gt;&gt;A: agent.ask(\"Get Cristiano's followers\")\n    A-&gt;&gt;L: System prompt + user message\n    L--&gt;&gt;A: tool_call: run_instaapi_code\n    A-&gt;&gt;A: Permission check \u2705\n    A-&gt;&gt;E: Execute code in sandbox\n    E--&gt;&gt;A: ExecutionResult (output, variables)\n    A-&gt;&gt;L: Tool result \u2192 next step\n    L--&gt;&gt;A: Text response (final answer)\n    A--&gt;&gt;U: AgentResult</code></pre> <p>Max steps: default 15 iterations. Agent stops when LLM responds without tool calls or limit is reached.</p>"},{"location":"agent/architecture/#security-model","title":"Security Model","text":"<p><code>SafeExecutor</code> provides sandboxed code execution:</p> <ul> <li>\u2705 Whitelisted imports only: <code>json</code>, <code>csv</code>, <code>datetime</code>, <code>math</code>, <code>re</code>, <code>collections</code>, <code>statistics</code>, <code>instaapi</code></li> <li>\u274c Blocked: <code>subprocess</code>, <code>os.system</code>, <code>eval</code>, <code>exec</code>, <code>socket</code>, <code>ctypes</code>, <code>pickle.loads</code></li> <li>\ud83d\udd12 File access: Read/write only in current directory</li> <li>\u23f1\ufe0f Timeout: Configurable (default 30s)</li> <li>\ud83d\udee1\ufe0f Code validation: Static analysis before execution</li> </ul> <pre><code># Blocked patterns \u2014 auto-rejected\nBLOCKED = [\n    \"subprocess\", \"os.system\", \"os.popen\",\n    \"__import__\", \"eval(\", \"exec(\",\n    \"open(/\",      # absolute paths\n    \"socket.\", \"http.server\", \"ctypes\",\n    \"sys.exit\", \"quit()\", \"exit()\",\n]\n</code></pre>"},{"location":"agent/architecture/#data-flow","title":"Data Flow","text":"<pre><code>User Message\n    \u2193\nInstaAgent.ask()\n    \u2193\n_build_mode_info()     \u2192 detect sync/async/anon mode\n    \u2193\nProvider.generate()    \u2192 send to LLM\n    \u2193\n_agent_loop()          \u2192 iterate until done\n    \u251c\u2500\u2500 PermissionManager.check()\n    \u251c\u2500\u2500 SafeExecutor.run()       \u2192 sandboxed code\n    \u251c\u2500\u2500 TOOL_HANDLERS[name]()    \u2192 built-in tools\n    \u251c\u2500\u2500 PluginManager.execute()  \u2192 custom tools\n    \u251c\u2500\u2500 StreamHandler.on_*()     \u2192 real-time output\n    \u2514\u2500\u2500 CostTracker.record()     \u2192 track usage\n    \u2193\nAgentResult(answer, code, files, steps, tokens, duration)\n</code></pre>"},{"location":"agent/interfaces/","title":"CLI &amp; Web UI","text":""},{"location":"agent/interfaces/#cli-terminal","title":"CLI (Terminal)","text":"<p>Interactive and one-shot command-line interface.</p>"},{"location":"agent/interfaces/#one-shot-question","title":"One-Shot Question","text":"<pre><code>python -m instaapi.agent.cli \"Get Cristiano's follower count\"\n</code></pre>"},{"location":"agent/interfaces/#interactive-chat","title":"Interactive Chat","text":"<pre><code>python -m instaapi.agent.cli --interactive\n</code></pre> <pre><code>\ud83e\udd16 InstaAPI Agent (Gemini)\nType 'exit' to quit.\n\nYou: Get Cristiano's followers\nAgent: Cristiano Ronaldo (@cristiano) has 650,000,000 followers.\n\nYou: Compare with Messi\nAgent: ...\n\nYou: exit\n</code></pre>"},{"location":"agent/interfaces/#cli-options","title":"CLI Options","text":"<pre><code>python -m instaapi.agent.cli [OPTIONS] [QUESTION]\n</code></pre> Option Default Description <code>QUESTION</code> \u2014 One-shot question <code>-i</code>, <code>--interactive</code> \u2014 Interactive chat mode <code>--provider</code> <code>gemini</code> AI provider <code>--model</code> auto Model override <code>--api-key</code> env API key <code>--env</code> <code>.env</code> Path to .env file <code>--permission</code> <code>ask_once</code> <code>ask_every</code>, <code>ask_once</code>, <code>full_access</code> <code>--full-access</code> \u2014 Skip all permission checks <code>--parallel TASK...</code> \u2014 Run tasks in parallel <code>--max-steps</code> <code>15</code> Max agent loop steps <code>--timeout</code> <code>30</code> Code execution timeout (sec) <code>--quiet</code> \u2014 Show only result"},{"location":"agent/interfaces/#examples","title":"Examples","text":"<pre><code># Use OpenAI\npython -m instaapi.agent.cli --provider openai \"Analyze nike engagement\"\n\n# Use local Ollama\npython -m instaapi.agent.cli --provider ollama --model llama3.2 \"Get my followers\"\n\n# Full access (no prompts)\npython -m instaapi.agent.cli --full-access \"Like all posts in my feed\"\n\n# Parallel tasks\npython -m instaapi.agent.cli --parallel \\\n    \"Get Cristiano followers\" \\\n    \"Get Messi followers\" \\\n    \"Get Neymar followers\"\n</code></pre>"},{"location":"agent/interfaces/#web-ui-browser","title":"Web UI (Browser)","text":"<p>Browser-based chat interface powered by FastAPI.</p>"},{"location":"agent/interfaces/#start","title":"Start","text":"<pre><code>python -m instaapi.agent.web\n# Opens http://localhost:8899\n</code></pre>"},{"location":"agent/interfaces/#web-options","title":"Web Options","text":"<pre><code>python -m instaapi.agent.web [OPTIONS]\n</code></pre> Option Default Description <code>--port</code> <code>8899</code> Server port <code>--host</code> <code>127.0.0.1</code> Server host <code>--provider</code> <code>gemini</code> AI provider <code>--model</code> auto Model override <code>--api-key</code> env API key <code>--env</code> <code>.env</code> Path to .env file <code>--permission</code> <code>ask_once</code> Permission level"},{"location":"agent/interfaces/#api-endpoints","title":"API Endpoints","text":"Method Path Description <code>GET</code> <code>/</code> Chat UI (HTML page) <code>POST</code> <code>/api/ask</code> Send a question <code>POST</code> <code>/api/parallel</code> Run parallel tasks <code>GET</code> <code>/api/history</code> Get conversation history <code>POST</code> <code>/api/reset</code> Reset conversation"},{"location":"agent/interfaces/#api-examples","title":"API Examples","text":"<pre><code># Ask a question\ncurl -X POST http://localhost:8899/api/ask \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"message\": \"Get Cristiano followers\"}'\n\n# Response:\n{\n  \"success\": true,\n  \"answer\": \"Cristiano has 650M followers\",\n  \"code\": \"user = ig.users.get_by_username(...)\",\n  \"steps\": 2,\n  \"tokens\": 1200,\n  \"duration\": 3.5\n}\n</code></pre> <pre><code># Parallel tasks\ncurl -X POST http://localhost:8899/api/parallel \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"tasks\": [\"Get Cristiano followers\", \"Get Messi followers\"]}'\n</code></pre>"},{"location":"agent/interfaces/#programmatic-usage","title":"Programmatic Usage","text":"<pre><code>from instaapi.agent.web import create_app\n\napp = create_app(\n    env_path=\".env\",\n    provider=\"gemini\",\n    api_key=\"AIza...\",\n    permission_level=\"full_access\",\n)\n\n# Run with uvicorn\nimport uvicorn\nuvicorn.run(app, host=\"0.0.0.0\", port=8899)\n</code></pre>"},{"location":"agent/interfaces/#requirements","title":"Requirements","text":"<pre><code>pip install fastapi uvicorn\n</code></pre>"},{"location":"agent/memory-streaming/","title":"Memory &amp; Streaming","text":""},{"location":"agent/memory-streaming/#agent-memory","title":"Agent Memory","text":"<p><code>AgentMemory</code> persists conversation history across sessions. The agent can recall past interactions.</p>"},{"location":"agent/memory-streaming/#enable-memory","title":"Enable Memory","text":"<pre><code>agent = InstaAgent(\n    ig=ig,\n    provider=\"gemini\",\n    api_key=\"...\",\n    memory=True,                              # Enable persistence\n    memory_dir=\".instaapi_memory\",            # Custom directory (optional)\n)\n\n# Conversations auto-save after each ask()\nresult = agent.ask(\"Get Cristiano's followers\")\n# Session saved to .instaapi_memory/\n</code></pre>"},{"location":"agent/memory-streaming/#memory-api","title":"Memory API","text":"<pre><code>from instaapi.agent.memory import AgentMemory\n\nmem = AgentMemory(memory_dir=\".instaapi_memory\")\n\n# Save a session\nmem.save_session(\"session_001\", messages, metadata={\"topic\": \"followers\"})\n\n# List past sessions\nsessions = mem.list_sessions(limit=20)\nfor s in sessions:\n    print(f\"{s['session_id']} \u2014 {s['summary']} ({s['message_count']} msgs)\")\n\n# Load a specific session\ndata = mem.load_session(\"session_001\")\n\n# Load the most recent session\nlatest = mem.load_latest()\n\n# Search through past conversations\nresults = mem.search(\"cristiano followers\", limit=5)\n</code></pre>"},{"location":"agent/memory-streaming/#storage","title":"Storage","text":"<p>Sessions are stored as JSON files:</p> <pre><code>.instaapi_memory/\n\u251c\u2500\u2500 index.json              # Session index\n\u251c\u2500\u2500 session_abc123.json     # Session data\n\u251c\u2500\u2500 session_def456.json\n\u2514\u2500\u2500 ...\n</code></pre> Setting Default Description <code>memory_dir</code> <code>.instaapi_memory</code> Storage directory <code>max_sessions</code> 50 Max stored sessions <code>max_history</code> 100 Max messages per session"},{"location":"agent/memory-streaming/#streaming","title":"Streaming","text":"<p><code>StreamHandler</code> enables real-time output as the agent thinks and acts.</p>"},{"location":"agent/memory-streaming/#enable-streaming","title":"Enable Streaming","text":"<pre><code>agent = InstaAgent(\n    ig=ig,\n    provider=\"gemini\",\n    api_key=\"...\",\n    streaming=True,      # Enable real-time output\n)\n\n# Now ask() will stream progress to terminal\nresult = agent.ask(\"Analyze top 10 posts by nike\")\n</code></pre> <p>CLI output:</p> <pre><code>\ud83e\udd16 \n  \ud83d\udd27 run_instaapi_code: Getting nike posts...\n  \u2705 ExecutionResult: 10 posts loaded\n  \ud83d\udccd Step 2/15...\n  \ud83d\udd27 analyze_data: Computing engagement...\n  \u2705 Done\n\n\u2705 Analysis complete (3.2s)\n</code></pre>"},{"location":"agent/memory-streaming/#stream-modes","title":"Stream Modes","text":"Mode Usage Description <code>cli</code> Terminal apps Prints to stdout with emojis <code>web</code> FastAPI/SSE Server-Sent Events format <code>callback</code> Custom Calls your function <code>buffer</code> Silent Buffers without output"},{"location":"agent/memory-streaming/#custom-callback","title":"Custom Callback","text":"<pre><code>from instaapi.agent.streaming import StreamHandler\n\ndef my_handler(event_type, data):\n    if event_type == \"text\":\n        print(f\"[AI] {data}\", end=\"\")\n    elif event_type == \"tool_call\":\n        print(f\"[TOOL] {data}\")\n    elif event_type == \"error\":\n        print(f\"[ERR] {data}\")\n\nhandler = StreamHandler(callback=my_handler)\n</code></pre>"},{"location":"agent/memory-streaming/#web-streaming-sse","title":"Web Streaming (SSE)","text":"<pre><code>from instaapi.agent.streaming import WebStreamHandler\n\nhandler = WebStreamHandler()\n\n# Get events for polling\nevents = handler.get_events()\n\n# Iterate as SSE format\nfor sse in handler.iter_events():\n    print(sse)  # \"event: text\\ndata: Hello\\n\\n\"\n</code></pre>"},{"location":"agent/memory-streaming/#events","title":"Events","text":"Event When <code>start</code> Streaming begins <code>text</code> Each text chunk from LLM <code>tool_call</code> Agent invokes a tool <code>tool_result</code> Tool returns result <code>step</code> Each agent loop iteration <code>error</code> Error occurs <code>done</code> Streaming completes"},{"location":"agent/multi-agent/","title":"Multi-Agent Coordinator","text":"<p><code>AgentCoordinator</code> \u2014 multiple agents working in parallel or sequential mode with shared state.</p>"},{"location":"agent/multi-agent/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\nfrom instaapi.agent import InstaAgent, AgentCoordinator, Permission\n\nig = Instagram.from_env(\".env\")\n\ncoordinator = AgentCoordinator(\n    ig=ig,\n    provider=\"gemini\",\n    api_key=\"AIza...\",\n    max_workers=3,\n)\n\n# Parallel \u2014 each task runs in its own thread\nresults = coordinator.run_parallel([\n    \"Get Cristiano's follower count\",\n    \"Get Messi's follower count\",\n    \"Get Neymar's follower count\",\n])\n\nfor answer in results.all_answers:\n    print(answer)\n\nprint(f\"Total: {results.total_duration:.1f}s | {results.total_tokens} tokens\")\n</code></pre>"},{"location":"agent/multi-agent/#parallel-execution","title":"Parallel Execution","text":"<p>Each task gets its own <code>InstaAgent</code> instance, running in <code>ThreadPoolExecutor</code>:</p> <pre><code>results = coordinator.run_parallel([\n    \"Download nike's profile picture\",\n    \"Export adidas followers to CSV\",\n    \"Analyze engagement rate for puma\",\n])\n\n# Check results\nprint(results.success)          # True if all succeeded\nprint(results.total_duration)   # Wall clock time\nprint(results.total_tokens)     # Combined token usage\nprint(results.total_steps)      # Combined agent steps\n</code></pre>"},{"location":"agent/multi-agent/#sequential-execution","title":"Sequential Execution","text":"<p>Tasks run in order. Each task sees previous results as context:</p> <pre><code>results = coordinator.run_sequential([\n    \"Get Cristiano's profile info\",\n    \"Analyze his last 10 posts engagement\",\n    \"Save the results to report.csv\",\n])\n</code></pre> <p>The coordinator automatically injects previous task results into each subsequent prompt.</p>"},{"location":"agent/multi-agent/#constructor","title":"Constructor","text":"<pre><code>AgentCoordinator(\n    ig,                                    # Instagram instance\n    provider=\"gemini\",                     # AI provider\n    api_key=None,                          # API key\n    model=None,                            # Model override\n    permission=Permission.FULL_ACCESS,     # Permission level\n    max_workers=3,                         # Max parallel threads\n    verbose=True,                          # Show progress\n)\n</code></pre>"},{"location":"agent/multi-agent/#coordinatorresult","title":"CoordinatorResult","text":"Property Type Description <code>results</code> <code>List[AgentResult]</code> Individual task results <code>success</code> <code>bool</code> <code>True</code> if all tasks succeeded <code>all_answers</code> <code>List[str]</code> List of answer strings <code>total_duration</code> <code>float</code> Total wall time (seconds) <code>total_tokens</code> <code>int</code> Combined token usage <code>total_steps</code> <code>int</code> Combined agent steps"},{"location":"agent/multi-agent/#cli-parallel-mode","title":"CLI Parallel Mode","text":"<pre><code>python -m instaapi.agent.cli --parallel \\\n    \"Get Cristiano followers\" \\\n    \"Get Messi followers\" \\\n    \"Get Neymar followers\"\n</code></pre>"},{"location":"agent/overview/","title":"AI Agent","text":"<p>InstaAPI's built-in AI Agent lets you control Instagram using natural language. No code needed \u2014 just tell the agent what you want, and it writes, executes, and returns results automatically.</p>"},{"location":"agent/overview/#why-use-the-agent","title":"Why Use the Agent?","text":"Without Agent With Agent Write Python code manually Just say what you want Handle errors yourself Agent retries automatically Know the API by heart Agent knows every method Build scripts from scratch Use pre-built templates"},{"location":"agent/overview/#quick-start","title":"Quick Start","text":"<pre><code>from instaapi import Instagram\nfrom instaapi.agent import InstaAgent, Permission\n\nig = Instagram.from_env(\".env\")\nagent = InstaAgent(\n    ig=ig,\n    provider=\"gemini\",\n    api_key=\"AIza...\",\n    permission=Permission.FULL_ACCESS,\n)\n\nresult = agent.ask(\"Get Cristiano's last 5 posts and save to posts.csv\")\nprint(result.answer)\n</code></pre>"},{"location":"agent/overview/#three-modes","title":"Three Modes","text":"Login Mode (Full API)Anonymous Mode (No Login)Async Mode <pre><code>ig = Instagram.from_env(\".env\")\nagent = InstaAgent(ig=ig, provider=\"gemini\", api_key=\"...\")\n# Access: ALL methods \u2014 follow, like, DM, upload, scrape...\n</code></pre> <pre><code>agent = InstaAgent(provider=\"gemini\", api_key=\"...\")\n# Access: ig.public.* only \u2014 profiles, posts, public data\n</code></pre> <pre><code>ig = AsyncInstagram.from_env(\".env\")\nagent = InstaAgent(ig=ig, provider=\"gemini\", api_key=\"...\")\n# Agent auto-detects and generates async/await code\n</code></pre>"},{"location":"agent/overview/#supported-ai-providers","title":"Supported AI Providers","text":"Provider Default Model API Key Env Var Google Gemini gemini-2.5-flash <code>GEMINI_API_KEY</code> OpenAI gpt-4.1-mini <code>OPENAI_API_KEY</code> Anthropic Claude claude-sonnet-4 <code>ANTHROPIC_API_KEY</code> DeepSeek deepseek-chat <code>DEEPSEEK_API_KEY</code> Qwen qwen3-32b <code>DASHSCOPE_API_KEY</code> Groq llama-3.3-70b <code>GROQ_API_KEY</code> Together AI llama-3.3-70b <code>TOGETHER_API_KEY</code> Mistral mistral-large <code>MISTRAL_API_KEY</code> Ollama (local) llama3.2 none OpenRouter auto <code>OPENROUTER_API_KEY</code> Fireworks AI llama-v3p3-70b <code>FIREWORKS_API_KEY</code> Perplexity sonar-pro <code>PERPLEXITY_API_KEY</code> xAI (Grok) grok-3 <code>XAI_API_KEY</code> <p>Latest Models</p> <p>Each provider supports many models beyond the default. Pass <code>model=\"model-name\"</code> to override:</p> <ul> <li>Gemini: <code>gemini-3.1-pro</code>, <code>gemini-3-pro</code>, <code>gemini-3-flash</code>, <code>gemini-2.5-pro</code></li> <li>OpenAI: <code>gpt-5.2</code>, <code>gpt-5</code>, <code>gpt-4.1</code>, <code>o3</code>, <code>o4-mini</code></li> <li>Claude: <code>claude-opus-4.6</code>, <code>claude-sonnet-4.6</code>, <code>claude-haiku-4.5</code></li> <li>DeepSeek: <code>deepseek-reasoner</code> (thinking mode)</li> <li>xAI: <code>grok-4-latest</code>, <code>grok-3-latest</code></li> </ul>"},{"location":"agent/overview/#permission-levels","title":"Permission Levels","text":"<pre><code>from instaapi.agent import Permission\n\n# Ask before every action (safest)\nagent = InstaAgent(ig=ig, permission=Permission.ASK_EVERY, ...)\n\n# Ask once per action type\nagent = InstaAgent(ig=ig, permission=Permission.ASK_ONCE, ...)\n\n# No prompts (max speed, for automation)\nagent = InstaAgent(ig=ig, permission=Permission.FULL_ACCESS, ...)\n</code></pre>"},{"location":"agent/overview/#built-in-tools-10","title":"Built-in Tools (10)","text":"<p>The agent has 10 tools it can use to complete tasks:</p> # Tool Description 1 <code>run_instaapi_code</code> Execute Python code in a secure sandbox 2 <code>save_to_file</code> Save results to CSV/JSON/TXT files 3 <code>ask_user</code> Ask the user for clarification 4 <code>read_file</code> Read existing files (CSV, JSON, TXT) 5 <code>list_files</code> List directory contents 6 <code>download_media</code> Download Instagram photos/videos 7 <code>analyze_data</code> Data analysis (stats, top N, trends) 8 <code>http_request</code> HTTP GET/POST to external APIs 9 <code>create_chart</code> Create charts (bar, line, pie) 10 <code>search_web</code> Search the internet (DuckDuckGo)"},{"location":"agent/overview/#constructor-parameters","title":"Constructor Parameters","text":"<pre><code>InstaAgent(\n    ig=None,                           # Instagram instance (None = anonymous)\n    provider=\"gemini\",                 # AI provider name\n    api_key=None,                      # API key (auto-detect from env)\n    model=None,                        # Model override\n    permission=Permission.ASK_EVERY,   # Permission level\n    permission_callback=None,          # Custom permission handler\n    max_steps=15,                      # Max agent loop iterations\n    timeout=30,                        # Code execution timeout (seconds)\n    verbose=True,                      # Show step-by-step progress\n    memory=False,                      # Enable conversation memory\n    memory_dir=None,                   # Custom memory directory\n    cost_tracking=True,                # Track token costs\n    retry_count=2,                     # Auto-retry on failures\n    streaming=False,                   # Real-time output\n)\n</code></pre>"},{"location":"agent/overview/#cross-platform-support","title":"Cross-Platform Support","text":"<p>InstaAPI Agent works on Windows, Linux, and macOS:</p> <ul> <li>Paths: Automatically uses OS-appropriate directories (<code>%APPDATA%</code> on Windows, <code>~/.local/share</code> on Linux, <code>~/Library</code> on macOS)</li> <li>Console: Unicode/emoji auto-detection with ASCII fallback for legacy terminals</li> <li>Encoding: UTF-8 everywhere with graceful error handling</li> <li>File I/O: Atomic writes prevent data corruption</li> <li>No OS-specific dependencies: Pure Python, no <code>signal.alarm</code> or Unix-only APIs</li> </ul>"},{"location":"agent/tools-plugins/","title":"Tools &amp; Plugins","text":""},{"location":"agent/tools-plugins/#built-in-tools-10","title":"Built-in Tools (10)","text":"<p>The agent automatically selects the right tool for each task:</p>"},{"location":"agent/tools-plugins/#1-run_instaapi_code","title":"1. <code>run_instaapi_code</code>","text":"<p>Execute Python code in a secure sandbox with access to <code>ig</code> (Instagram client).</p> <pre><code>Agent decides to run:\n    user = ig.users.get_by_username(\"cristiano\")\n    print(f\"Followers: {user.followers:,}\")\n</code></pre>"},{"location":"agent/tools-plugins/#2-save_to_file","title":"2. <code>save_to_file</code>","text":"<p>Save content to CSV, JSON, or TXT files.</p> Param Type Description <code>filename</code> <code>str</code> Output file name <code>content</code> <code>str</code> File content <code>format</code> <code>str</code> <code>csv</code>, <code>json</code>, or <code>txt</code>"},{"location":"agent/tools-plugins/#3-ask_user","title":"3. <code>ask_user</code>","text":"<p>Ask the user a clarifying question before proceeding.</p>"},{"location":"agent/tools-plugins/#4-read_file","title":"4. <code>read_file</code>","text":"<p>Read file contents from current directory (CSV, JSON, TXT).</p> Param Type Description <code>filename</code> <code>str</code> File path (relative only) <code>max_lines</code> <code>int</code> Max lines to read (default: 100)"},{"location":"agent/tools-plugins/#5-list_files","title":"5. <code>list_files</code>","text":"<p>List files in a directory with size and modification time.</p>"},{"location":"agent/tools-plugins/#6-download_media","title":"6. <code>download_media</code>","text":"<p>Download Instagram photos/videos via InstaAPI.</p> Param Type Description <code>url</code> <code>str</code> Instagram post/story URL <code>output_dir</code> <code>str</code> Save directory (default: <code>.</code>)"},{"location":"agent/tools-plugins/#7-analyze_data","title":"7. <code>analyze_data</code>","text":"<p>Statistical analysis on data from files or raw input.</p> Param Type Description <code>source</code> <code>str</code> File path or raw JSON <code>analysis_type</code> <code>str</code> <code>summary</code>, <code>top_n</code>, <code>distribution</code>, <code>compare</code>, <code>trend</code> <code>field</code> <code>str</code> Field to analyze <code>top_n</code> <code>int</code> Top N count (default: 10)"},{"location":"agent/tools-plugins/#8-http_request","title":"8. <code>http_request</code>","text":"<p>Make HTTP requests to external APIs.</p> Param Type Description <code>url</code> <code>str</code> Request URL <code>method</code> <code>str</code> <code>GET</code> or <code>POST</code> <code>headers</code> <code>dict</code> Request headers <code>body</code> <code>str</code> Request body"},{"location":"agent/tools-plugins/#9-create_chart","title":"9. <code>create_chart</code>","text":"<p>Create ASCII charts (no matplotlib dependency).</p> Param Type Description <code>chart_type</code> <code>str</code> <code>bar</code>, <code>line</code>, <code>pie</code> <code>labels</code> <code>list</code> Label array <code>[\"A\", \"B\", \"C\"]</code> <code>values</code> <code>list</code> Value array <code>[10, 20, 30]</code> <code>title</code> <code>str</code> Chart title <code>filename</code> <code>str</code> Output file (default: <code>chart.txt</code>)"},{"location":"agent/tools-plugins/#10-search_web","title":"10. <code>search_web</code>","text":"<p>Search the internet via DuckDuckGo Lite.</p> Param Type Description <code>query</code> <code>str</code> Search query <code>max_results</code> <code>int</code> Max results (default: 5)"},{"location":"agent/tools-plugins/#custom-plugins","title":"Custom Plugins","text":"<p>Register your own functions as agent tools using <code>PluginManager</code>:</p> <pre><code>from instaapi.agent import InstaAgent\n\nagent = InstaAgent(ig=ig, provider=\"gemini\", api_key=\"...\")\n\n# Register a custom tool\ndef translate(args):\n    text = args.get(\"text\", \"\")\n    target = args.get(\"target_language\", \"en\")\n    # Your translation logic here\n    return f\"Translated: {text}\"\n\nagent.register_tool(\n    name=\"translate\",\n    handler=translate,\n    description=\"Translate text between languages\",\n    schema={\n        \"type\": \"object\",\n        \"properties\": {\n            \"text\": {\"type\": \"string\", \"description\": \"Text to translate\"},\n            \"target_language\": {\"type\": \"string\", \"description\": \"Target language code\"},\n        },\n    },\n)\n\n# Now the agent can use your tool!\nresult = agent.ask(\"Translate 'Hello World' to Spanish\")\n</code></pre>"},{"location":"agent/tools-plugins/#auto-schema","title":"Auto-Schema","text":"<p>If you don't provide a schema, <code>PluginManager</code> auto-generates one from your function signature:</p> <pre><code>def sentiment(text: str, detailed: bool = False):\n    \"\"\"Analyze text sentiment.\"\"\"\n    return {\"score\": 0.8, \"label\": \"positive\"}\n\n# Schema auto-generated from type hints\nagent.register_tool(\"sentiment\", sentiment, \"Analyze sentiment\")\n</code></pre>"},{"location":"agent/tools-plugins/#plugin-management","title":"Plugin Management","text":"<pre><code># List registered plugins\nplugins = agent.plugins.list_plugins()\n\n# Check if plugin exists\nagent.plugins.has(\"translate\")  # True\n\n# Remove a plugin\nagent.plugins.unregister(\"translate\")\n\n# Plugin count\nagent.plugins.count  # 0\n</code></pre>"},{"location":"agent/vision/","title":"Vision (Image Analysis)","text":"<p><code>VisionAnalyzer</code> enables the agent to analyze images using AI vision capabilities.</p>"},{"location":"agent/vision/#supported-providers","title":"Supported Providers","text":"Provider Model Vision Support OpenAI GPT-4.1 / GPT-4o \u2705 Full Google Gemini Gemini 3.x / 2.5 \u2705 Full Anthropic Claude Claude 4.6 / 4 \u2705 Full Others \u2014 \u274c Not supported"},{"location":"agent/vision/#usage","title":"Usage","text":""},{"location":"agent/vision/#analyze-local-image","title":"Analyze Local Image","text":"<pre><code>from instaapi.agent.vision import VisionAnalyzer\nfrom instaapi.agent.providers import get_provider\n\nprovider = get_provider(\"gemini\", api_key=\"AIza...\")\nvision = VisionAnalyzer(provider)\n\n# Analyze a downloaded photo\nresult = vision.analyze_image(\n    \"photo.jpg\",\n    prompt=\"Describe this Instagram post. What's in the image?\",\n    language=\"en\",\n)\nprint(result)\n</code></pre>"},{"location":"agent/vision/#analyze-image-from-url","title":"Analyze Image from URL","text":"<pre><code>result = vision.analyze_url(\n    \"https://instagram.com/..../photo.jpg\",\n    prompt=\"What products are shown in this image?\",\n    language=\"en\",\n)\n</code></pre>"},{"location":"agent/vision/#check-provider-support","title":"Check Provider Support","text":"<pre><code>if vision.is_supported:\n    result = vision.analyze_image(\"photo.jpg\")\nelse:\n    print(\"Current provider doesn't support vision\")\n</code></pre>"},{"location":"agent/vision/#parameters","title":"Parameters","text":""},{"location":"agent/vision/#analyze_imageimage_path-prompt-language","title":"<code>analyze_image(image_path, prompt, language)</code>","text":"Param Type Default Description <code>image_path</code> <code>str</code> required Path to local image file <code>prompt</code> <code>str</code> <code>\"Describe this image in detail.\"</code> Analysis prompt <code>language</code> <code>str</code> <code>\"en\"</code> Response language"},{"location":"agent/vision/#analyze_urlimage_url-prompt-language","title":"<code>analyze_url(image_url, prompt, language)</code>","text":"Param Type Default Description <code>image_url</code> <code>str</code> required Image URL <code>prompt</code> <code>str</code> <code>\"Describe this image in detail.\"</code> Analysis prompt <code>language</code> <code>str</code> <code>\"en\"</code> Response language"},{"location":"agent/vision/#supported-formats","title":"Supported Formats","text":"<ul> <li>JPEG (<code>.jpg</code>, <code>.jpeg</code>)</li> <li>PNG (<code>.png</code>)</li> <li>GIF (<code>.gif</code>)</li> <li>WebP (<code>.webp</code>)</li> </ul> <p>Max image size: 5 MB</p>"},{"location":"agent/webhooks/","title":"Webhooks &amp; Scheduler","text":""},{"location":"agent/webhooks/#webhooknotifier","title":"WebhookNotifier","text":"<p>Send agent results to external services \u2014 Telegram, Discord, Email, or custom HTTP endpoints.</p>"},{"location":"agent/webhooks/#setup","title":"Setup","text":"<pre><code>from instaapi.agent.webhook import WebhookNotifier\n\nnotifier = WebhookNotifier()\n\n# Add Telegram\nnotifier.add_telegram(\n    bot_token=\"123456:ABC-xyz\",\n    chat_id=\"987654321\",\n)\n\n# Add Discord\nnotifier.add_discord(\n    webhook_url=\"https://discord.com/api/webhooks/...\",\n)\n\n# Add Email\nnotifier.add_email(\n    smtp_host=\"smtp.gmail.com\",\n    smtp_port=587,\n    username=\"you@gmail.com\",\n    password=\"app-password\",\n    to_email=\"recipient@example.com\",\n)\n\n# Add custom HTTP webhook\nnotifier.add_custom(\n    url=\"https://my-api.com/webhook\",\n    headers={\"Authorization\": \"Bearer token123\"},\n)\n</code></pre>"},{"location":"agent/webhooks/#send-notifications","title":"Send Notifications","text":"<pre><code># Simple message\nnotifier.notify(\"Task completed successfully!\")\n\n# With title and data\nnotifier.notify(\n    message=\"Follower analysis done for @cristiano\",\n    title=\"InstaAPI Report\",\n    data={\n        \"followers\": 650_000_000,\n        \"engagement_rate\": 2.5,\n        \"top_post_likes\": 15_000_000,\n    },\n)\n</code></pre>"},{"location":"agent/webhooks/#channel-management","title":"Channel Management","text":"<pre><code>notifier.channel_count   # Number of registered channels\nnotifier.clear()         # Remove all channels\n</code></pre>"},{"location":"agent/webhooks/#supported-channels","title":"Supported Channels","text":"Channel Method Requires Telegram <code>add_telegram()</code> Bot token + Chat ID Discord <code>add_discord()</code> Webhook URL Email <code>add_email()</code> SMTP credentials Custom <code>add_custom()</code> Any HTTP endpoint"},{"location":"agent/webhooks/#agentscheduler","title":"AgentScheduler","text":"<p>Schedule agent tasks to run at intervals \u2014 cron-like automation.</p>"},{"location":"agent/webhooks/#basic-usage","title":"Basic Usage","text":"<pre><code>from instaapi.agent import InstaAgent\nfrom instaapi.agent.scheduler import AgentScheduler\n\nagent = InstaAgent(ig=ig, provider=\"gemini\", api_key=\"...\")\nscheduler = AgentScheduler(agent)\n\n# Every hour \u2014 check follower count\nscheduler.add(\n    task_id=\"follower_check\",\n    prompt=\"Get my current follower count and save to followers_log.csv\",\n    interval=\"1h\",\n)\n\n# Every day \u2014 engagement report\nscheduler.add(\n    task_id=\"daily_report\",\n    prompt=\"Generate engagement report for my last 20 posts\",\n    interval=\"24h\",\n)\n\n# Every 30 minutes, max 10 runs\nscheduler.add(\n    task_id=\"like_feed\",\n    prompt=\"Like the top 5 posts in my feed\",\n    interval=\"30m\",\n    max_runs=10,\n)\n\n# Start scheduler (runs in background thread)\nscheduler.start()\n</code></pre>"},{"location":"agent/webhooks/#interval-format","title":"Interval Format","text":"Format Example Duration <code>Ns</code> <code>30s</code> 30 seconds <code>Nm</code> <code>15m</code> 15 minutes <code>Nh</code> <code>2h</code> 2 hours <code>Nd</code> <code>7d</code> 7 days"},{"location":"agent/webhooks/#task-management","title":"Task Management","text":"<pre><code># List all tasks\ntasks = scheduler.list_tasks()\nfor t in tasks:\n    print(f\"{t['task_id']}: {t['interval']} (runs: {t['run_count']})\")\n\n# Disable/enable\nscheduler.disable(\"follower_check\")\nscheduler.enable(\"follower_check\")\n\n# Remove\nscheduler.remove(\"daily_report\")\n\n# Stop scheduler\nscheduler.stop()\n\n# Check status\nscheduler.is_running   # bool\nscheduler.task_count   # int\n</code></pre>"},{"location":"agent/webhooks/#persistence","title":"Persistence","text":"<p>Schedule is automatically saved to <code>.instaapi_schedule.json</code> and restored on restart:</p> <pre><code>scheduler = AgentScheduler(\n    agent,\n    persist_path=\".instaapi_schedule.json\",  # Custom path\n)\n</code></pre>"},{"location":"agent/webhooks/#callback","title":"Callback","text":"<p>Get notified when tasks complete:</p> <pre><code>def on_task_done(task_id, result):\n    print(f\"Task {task_id}: {result.answer[:100]}\")\n    # Optional: send webhook notification\n    notifier.notify(f\"Task {task_id} done: {result.answer}\")\n\nscheduler.start(callback=on_task_done)\n</code></pre>"},{"location":"anonymous/anon-client/","title":"AnonClient (Low-Level)","text":"<p>Direct access to anonymous Instagram endpoints. Used internally by <code>PublicAPI</code>.</p> <p>Prefer PublicAPI</p> <p>For most use cases, use <code>ig.public.*</code> methods. AnonClient is for advanced users who need direct endpoint control.</p> <pre><code>ig = Instagram.anonymous()\nclient = ig._anon_client  # AnonClient instance\n</code></pre>"},{"location":"anonymous/anon-client/#strategy-methods","title":"Strategy Methods","text":""},{"location":"anonymous/anon-client/#get_profile_htmlusername","title":"get_profile_html(username)","text":"<p>Parse profile from HTML page (SharedData + meta tags).</p> <pre><code>profile = client.get_profile_html(\"cristiano\")\n# Returns parsed profile dict or None\n</code></pre>"},{"location":"anonymous/anon-client/#get_embed_datashortcode","title":"get_embed_data(shortcode)","text":"<p>Get post data from embed endpoint.</p> <pre><code>data = client.get_embed_data(\"ABC123\")\n# Returns embed media dict or None\n</code></pre>"},{"location":"anonymous/anon-client/#get_graphql_publicquery_hash-variables","title":"get_graphql_public(query_hash, variables)","text":"<p>Make public GraphQL query.</p> <pre><code>data = client.get_graphql_public(\n    query_hash=\"d4d88dc1500312af6f937f7b804c68c3\",\n    variables={\"user_id\": \"173560420\", \"first\": 12}\n)\n</code></pre>"},{"location":"anonymous/anon-client/#get_web_apipath-paramsnone","title":"get_web_api(path, params=None)","text":"<p>Make web API request to <code>i.instagram.com/api/v1/</code>.</p> <pre><code>data = client.get_web_api(\n    \"/users/web_profile_info/\",\n    params={\"username\": \"cristiano\"}\n)\n</code></pre>"},{"location":"anonymous/anon-client/#get_mobile_apipath-paramsnone","title":"get_mobile_api(path, params=None)","text":"<p>Make mobile API request to <code>i.instagram.com/api/v1/</code>.</p> <pre><code>data = client.get_mobile_api(\n    \"/feed/user/173560420/\",\n    params={\"count\": 12}\n)\n</code></pre>"},{"location":"anonymous/anon-client/#endpoint-methods","title":"Endpoint Methods","text":""},{"location":"anonymous/anon-client/#get_web_profileusername","title":"get_web_profile(username)","text":"<p>Get profile via web API strategy.</p> <p>Returns: <code>(profile_dict, posts_list)</code> or <code>(None, [])</code></p> <pre><code>profile, posts = client.get_web_profile(\"cristiano\")\n</code></pre>"},{"location":"anonymous/anon-client/#get_user_info_mobileuser_id","title":"get_user_info_mobile(user_id)","text":"<p>Get user info via mobile API.</p> <pre><code>info = client.get_user_info_mobile(173560420)\n</code></pre>"},{"location":"anonymous/anon-client/#search_webquery","title":"search_web(query)","text":"<p>Search via web API.</p> <p>Returns:</p> <pre><code>{\n    \"users\": [{\"username\": ..., \"follower_count\": ...}],\n    \"hashtags\": [{\"name\": ..., \"media_count\": ...}],\n    \"places\": [{\"title\": ..., \"location\": {...}}],\n}\n</code></pre>"},{"location":"anonymous/anon-client/#get_user_reelsuser_id-max_idnone","title":"get_user_reels(user_id, max_id=None)","text":"<p>Get reels via mobile API.</p> <p>Returns:</p> <pre><code>{\n    \"items\": [{\"pk\": ..., \"play_count\": ..., \"is_reel\": True, ...}],\n    \"more_available\": True,\n    \"next_max_id\": \"cursor...\"\n}\n</code></pre>"},{"location":"anonymous/anon-client/#get_user_feed_mobileuser_id-count12-max_idnone","title":"get_user_feed_mobile(user_id, count=12, max_id=None)","text":"<p>Get user feed via mobile API.</p> <p>Returns:</p> <pre><code>{\n    \"items\": [{\"pk\": ..., \"likes\": ..., \"shortcode\": ..., ...}],\n    \"more_available\": True,\n    \"next_max_id\": \"cursor...\"\n}\n</code></pre>"},{"location":"anonymous/anon-client/#get_media_info_mobilemedia_id","title":"get_media_info_mobile(media_id)","text":"<p>Get single media details.</p>"},{"location":"anonymous/anon-client/#get_hashtag_sectionshashtag-max_idnone","title":"get_hashtag_sections(hashtag, max_id=None)","text":"<p>Get hashtag posts via sections API.</p>"},{"location":"anonymous/anon-client/#get_location_sectionslocation_id-max_idnone","title":"get_location_sections(location_id, max_id=None)","text":"<p>Get location posts via sections API.</p>"},{"location":"anonymous/anon-client/#get_similar_accountsuser_id","title":"get_similar_accounts(user_id)","text":"<p>Get similar/recommended accounts.</p>"},{"location":"anonymous/anon-client/#get_highlights_trayuser_id","title":"get_highlights_tray(user_id)","text":"<p>Get highlight tray metadata.</p>"},{"location":"anonymous/anon-client/#parser-methods","title":"Parser Methods","text":"Method Input Output <code>_parse_graphql_user(user)</code> GraphQL user dict Normalized profile <code>_parse_timeline_edges(edges)</code> GraphQL edges Post list <code>_parse_mobile_feed_item(item)</code> Mobile API item Normalized post <code>_parse_embed_media(media)</code> Embed response Normalized post <code>_parse_meta_tags(html)</code> HTML string Profile from meta <code>_parse_count(text)</code> \"1.5M\" / \"12K\" <code>int</code>"},{"location":"anonymous/async-public-api/","title":"AsyncPublicAPI","text":"<p>Async version of PublicAPI \u2014 same methods, true async I/O with <code>asyncio.gather</code> for parallel operations.</p> <pre><code>import asyncio\nfrom instaapi import AsyncInstagram\n\nasync def main():\n    async with AsyncInstagram.anonymous(unlimited=True) as ig:\n        profile = await ig.public.get_profile(\"cristiano\")\n        print(f\"{profile['followers']:,}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"anonymous/async-public-api/#all-methods","title":"All Methods","text":"<p>AsyncPublicAPI has identical methods to PublicAPI, but all are <code>async</code> \u2014 use <code>await</code>.</p> Method Signature <code>get_profile</code> <code>await ig.public.get_profile(username)</code> <code>get_user_id</code> <code>await ig.public.get_user_id(username)</code> <code>get_profile_pic_url</code> <code>await ig.public.get_profile_pic_url(username)</code> <code>get_posts</code> <code>await ig.public.get_posts(username, max_count=12)</code> <code>get_post_by_url</code> <code>await ig.public.get_post_by_url(url)</code> <code>get_post_by_shortcode</code> <code>await ig.public.get_post_by_shortcode(shortcode)</code> <code>get_media_urls</code> <code>await ig.public.get_media_urls(shortcode)</code> <code>get_comments</code> <code>await ig.public.get_comments(shortcode)</code> <code>get_hashtag_posts</code> <code>await ig.public.get_hashtag_posts(hashtag)</code> <code>search</code> <code>await ig.public.search(query, context=\"blended\")</code> <code>get_feed</code> <code>await ig.public.get_feed(user_id)</code> <code>get_all_posts</code> <code>await ig.public.get_all_posts(username)</code> <code>get_media</code> <code>await ig.public.get_media(media_id)</code> <code>get_reels</code> <code>await ig.public.get_reels(username)</code> <code>get_hashtag_posts_v2</code> <code>await ig.public.get_hashtag_posts_v2(hashtag, tab=\"recent\")</code> <code>get_location_posts</code> <code>await ig.public.get_location_posts(location_id, tab=\"recent\")</code> <code>get_similar_accounts</code> <code>await ig.public.get_similar_accounts(username)</code> <code>get_highlights</code> <code>await ig.public.get_highlights(username)</code> <code>is_public</code> <code>await ig.public.is_public(username)</code> <code>exists</code> <code>await ig.public.exists(username)</code> <code>bulk_profiles</code> <code>await ig.public.bulk_profiles(usernames, workers=10)</code> <code>bulk_feeds</code> <code>await ig.public.bulk_feeds(user_ids, workers=10)</code>"},{"location":"anonymous/async-public-api/#parallel-operations","title":"Parallel Operations","text":"<p>The real power of async \u2014 scrape many profiles simultaneously:</p> <pre><code>async with AsyncInstagram.anonymous(unlimited=True) as ig:\n    usernames = [\"nike\", \"adidas\", \"puma\", \"gucci\", \"zara\",\n                 \"hm\", \"uniqlo\", \"levis\", \"gap\", \"supreme\"]\n\n    # 10 profiles in parallel \u2014 ~3 seconds!\n    tasks = [ig.public.get_profile(u) for u in usernames]\n    profiles = await asyncio.gather(*tasks)\n\n    for p in profiles:\n        if p:\n            print(f\"@{p['username']}: {p['followers']:,}\")\n</code></pre>"},{"location":"anonymous/async-public-api/#performance-comparison","title":"Performance Comparison","text":"Method 100 profiles Sync (sequential) ~300 seconds Async (<code>gather</code>) ~15 seconds Async unlimited ~10 seconds"},{"location":"anonymous/async-public-api/#bulk-profiles-async","title":"Bulk Profiles (Async)","text":"<pre><code># Uses asyncio.gather internally\nprofiles = await ig.public.bulk_profiles(\n    [\"nike\", \"adidas\", \"puma\", \"gucci\"],\n    workers=10,\n)\n\nfor username, profile in profiles.items():\n    print(f\"@{username}: {profile['followers']:,}\")\n</code></pre>"},{"location":"anonymous/async-public-api/#context-manager","title":"Context Manager","text":"<p>Always use <code>async with</code> for proper cleanup:</p> <pre><code># \u2705 Good \u2014 auto-closes session\nasync with AsyncInstagram.anonymous() as ig:\n    profile = await ig.public.get_profile(\"nike\")\n\n# \u274c Bad \u2014 session leak\nig = AsyncInstagram.anonymous()\nprofile = await ig.public.get_profile(\"nike\")\n# Forgot await ig.close()!\n</code></pre>"},{"location":"anonymous/bulk-operations/","title":"Bulk Operations","text":"<p>Scrape hundreds of profiles or feeds efficiently.</p>"},{"location":"anonymous/bulk-operations/#sync-threadpoolexecutor","title":"Sync \u2014 ThreadPoolExecutor","text":"<pre><code>ig = Instagram.anonymous(unlimited=True)\n\nprofiles = ig.public.bulk_profiles(\n    [\"nike\", \"adidas\", \"puma\", \"gucci\", \"zara\"],\n    workers=5,\n)\n\nfor username, profile in profiles.items():\n    if profile:\n        print(f\"@{username}: {profile['followers']:,}\")\n    else:\n        print(f\"@{username}: not found\")\n</code></pre>"},{"location":"anonymous/bulk-operations/#async-asynciogather-recommended","title":"Async \u2014 asyncio.gather (Recommended)","text":"<pre><code>import asyncio\nfrom instaapi import AsyncInstagram\n\nasync def scrape_profiles(usernames):\n    async with AsyncInstagram.anonymous(unlimited=True) as ig:\n        profiles = await ig.public.bulk_profiles(\n            usernames,\n            workers=20,\n        )\n        return profiles\n\n# 200 profiles in ~15 seconds\nusernames = open(\"usernames.txt\").read().splitlines()\nprofiles = asyncio.run(scrape_profiles(usernames))\n</code></pre>"},{"location":"anonymous/bulk-operations/#custom-parallel-pattern","title":"Custom Parallel Pattern","text":"<pre><code>async def scrape_everything(username):\n    \"\"\"Get profile + posts + reels in one go.\"\"\"\n    async with AsyncInstagram.anonymous(unlimited=True) as ig:\n        profile = await ig.public.get_profile(username)\n        if not profile:\n            return None\n\n        user_id = profile.get(\"user_id\")\n        posts_task = ig.public.get_posts(username)\n        reels_task = ig.public.get_reels(username)\n\n        posts, reels = await asyncio.gather(posts_task, reels_task)\n\n        return {\n            \"profile\": profile,\n            \"posts\": posts,\n            \"reels\": reels,\n        }\n</code></pre>"},{"location":"anonymous/bulk-operations/#performance-tips","title":"Performance Tips","text":"Tip Impact Use <code>unlimited=True</code> 20x faster (no delays) Use <code>asyncio.gather</code> Parallel instead of sequential Add proxies Avoid IP-based blocking Limit <code>max_concurrent</code> Prevent connection exhaustion <p>Proxy recommended</p> <p>When scraping 100+ profiles, add proxies to avoid IP blocks. Without proxies, Instagram may temporarily block your IP.</p>"},{"location":"anonymous/overview/","title":"Anonymous Scraping \u2014 Overview","text":"<p>InstaAPI's anonymous scraping system can access public Instagram data without login using a 5-strategy fallback chain.</p>"},{"location":"anonymous/overview/#how-it-works","title":"How It Works","text":"<pre><code>graph LR\n    A[\"Your Code\"] --&gt; B[\"PublicAPI\"]\n    B --&gt; C[\"AnonClient\"]\n    C --&gt; S1[\"1. HTML Parse\"]\n    S1 --&gt;|fail| S2[\"2. Embed API\"]\n    S2 --&gt;|fail| S3[\"3. GraphQL\"]\n    S3 --&gt;|fail| S4[\"4. Mobile API\"]\n    S4 --&gt;|fail| S5[\"5. Web API\"]\n    S1 --&gt;|success| R[\"Return Data\"]\n    S2 --&gt;|success| R\n    S3 --&gt;|success| R\n    S4 --&gt;|success| R\n    S5 --&gt;|success| R</code></pre> <p>If one strategy fails (rate limited, blocked, etc.), it automatically tries the next one.</p>"},{"location":"anonymous/overview/#the-5-strategies","title":"The 5 Strategies","text":"# Strategy Endpoint Speed Data 1 HTML Parse <code>instagram.com/{user}/</code> Fast Profile + meta 2 Embed API <code>instagram.com/p/{code}/embed/</code> Fast Post data 3 GraphQL <code>graphql/query/</code> Medium Full profile + posts 4 Mobile API <code>i.instagram.com/api/v1/</code> Medium Rich feed data 5 Web API <code>i.instagram.com/api/v1/</code> Medium Profile info"},{"location":"anonymous/overview/#available-data-no-login","title":"Available Data (No Login)","text":"Data Type Method Works? Profile info <code>get_profile()</code> \u2705 Posts (12) <code>get_posts()</code> \u2705 Post by URL <code>get_post_by_url()</code> \u2705 Post comments <code>get_comments()</code> \u2705 Media URLs <code>get_media_urls()</code> \u2705 Search <code>search()</code> \u2705 Reels <code>get_reels()</code> \u2705 Mobile feed <code>get_feed()</code> \u2705 All posts (paginated) <code>get_all_posts()</code> \u2705 Hashtag posts <code>get_hashtag_posts()</code> \u2705 Location posts <code>get_location_posts()</code> \u2705 Similar accounts <code>get_similar_accounts()</code> \u2705 Highlights <code>get_highlights()</code> \u2705 Stories \u274c Login required Followers/Following \u274c Login required DM \u274c Login required"},{"location":"anonymous/overview/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.anonymous()\n\n# Profile\nprofile = ig.public.get_profile(\"cristiano\")\nprint(f\"@{profile['username']}: {profile['followers']:,} followers\")\n\n# Posts\nposts = ig.public.get_posts(\"cristiano\")\nfor post in posts[:3]:\n    print(f\"  \u2764\ufe0f {post['likes']:,}  \ud83d\udcac {post['comments']}\")\n\n# Search\nresults = ig.public.search(\"fashion\")\nfor user in results[\"users\"][:3]:\n    print(f\"  @{user['username']}\")\n</code></pre>"},{"location":"anonymous/overview/#two-api-levels","title":"Two API Levels","text":"Level Class For High-level <code>PublicAPI</code> / <code>AsyncPublicAPI</code> Easy, clean interface Low-level <code>AnonClient</code> / <code>AsyncAnonClient</code> Direct endpoint access <pre><code># High-level (recommended)\nprofile = ig.public.get_profile(\"nike\")\n\n# Low-level (more control)\nraw = ig._anon_client.get_web_profile(\"nike\")\n</code></pre>"},{"location":"anonymous/public-api/","title":"PublicAPI","text":"<p>High-level synchronous interface for anonymous Instagram data access.</p> <pre><code>from instaapi import Instagram\n\nig = Instagram.anonymous()\n# or with unlimited speed:\nig = Instagram.anonymous(unlimited=True)\n</code></pre>"},{"location":"anonymous/public-api/#get_profileusername","title":"get_profile(username)","text":"<p>Get public profile data.</p> <p>Parameters:</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Instagram username (without @) <p>Returns: <code>dict</code> or <code>None</code></p> <p>Response fields:</p> Field Type Description <code>user_id</code> <code>str</code> Unique user ID <code>username</code> <code>str</code> Username <code>full_name</code> <code>str</code> Display name <code>biography</code> <code>str</code> Bio text <code>followers</code> <code>int</code> Follower count <code>following</code> <code>int</code> Following count <code>posts_count</code> <code>int</code> Total posts <code>is_private</code> <code>bool</code> Private account <code>is_verified</code> <code>bool</code> Verified badge <code>is_business</code> <code>bool</code> Business account <code>category</code> <code>str</code> Business category <code>profile_pic_url</code> <code>str</code> Profile picture <code>profile_pic_url_hd</code> <code>str</code> HD picture <code>external_url</code> <code>str</code> Website <code>bio_links</code> <code>list</code> Links in bio <code>recent_posts</code> <code>list</code> Latest posts <pre><code>profile = ig.public.get_profile(\"cristiano\")\nif profile:\n    print(f\"@{profile['username']}: {profile['followers']:,}\")\n</code></pre>"},{"location":"anonymous/public-api/#get_user_idusername","title":"get_user_id(username)","text":"<p>Get user ID from username.</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Instagram username <p>Returns: <code>int</code> or <code>None</code></p> <pre><code>user_id = ig.public.get_user_id(\"cristiano\")\n# 173560420\n</code></pre>"},{"location":"anonymous/public-api/#get_profile_pic_urlusername","title":"get_profile_pic_url(username)","text":"<p>Get HD profile picture URL.</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Instagram username <p>Returns: <code>str</code> or <code>None</code></p> <pre><code>url = ig.public.get_profile_pic_url(\"cristiano\")\nprint(url)\n</code></pre>"},{"location":"anonymous/public-api/#get_postsusername-max_count12","title":"get_posts(username, max_count=12)","text":"<p>Get user's latest public posts.</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Instagram username <code>max_count</code> <code>int</code> \u274c 12 Maximum posts to return <p>Returns: <code>list[dict]</code></p> <p>Post fields:</p> Field Type Description <code>pk</code> <code>str</code> Post ID <code>shortcode</code> <code>str</code> URL shortcode <code>media_type</code> <code>str</code> <code>GraphImage</code>, <code>GraphVideo</code>, <code>GraphSidecar</code> <code>display_url</code> <code>str</code> Main image URL <code>is_video</code> <code>bool</code> Is video post <code>likes</code> <code>int</code> Like count <code>comments</code> <code>int</code> Comment count <code>caption</code> <code>str</code> Caption text <code>taken_at</code> <code>int</code> Unix timestamp <code>video_url</code> <code>str</code> Video URL (if video) <code>video_views</code> <code>int</code> Video view count <code>carousel_media</code> <code>list</code> Carousel child items <pre><code>posts = ig.public.get_posts(\"cristiano\", max_count=5)\nfor post in posts:\n    print(f\"[{post['shortcode']}] \u2764\ufe0f{post['likes']:,}\")\n</code></pre>"},{"location":"anonymous/public-api/#get_post_by_urlurl","title":"get_post_by_url(url)","text":"<p>Get post data from Instagram URL.</p> Param Type Required Description <code>url</code> <code>str</code> \u2705 Full Instagram URL <p>Returns: <code>dict</code> or <code>None</code></p> <pre><code>post = ig.public.get_post_by_url(\"https://instagram.com/p/ABC123/\")\npost = ig.public.get_post_by_url(\"https://instagram.com/reel/XYZ789/\")\n</code></pre>"},{"location":"anonymous/public-api/#get_post_by_shortcodeshortcode","title":"get_post_by_shortcode(shortcode)","text":"<p>Get post by shortcode.</p> Param Type Required Description <code>shortcode</code> <code>str</code> \u2705 Post shortcode <p>Returns: <code>dict</code> or <code>None</code></p> <pre><code>post = ig.public.get_post_by_shortcode(\"ABC123\")\n</code></pre>"},{"location":"anonymous/public-api/#searchquery-contextblended","title":"search(query, context=\"blended\")","text":"<p>Search Instagram users, hashtags, and places.</p> Param Type Required Default Description <code>query</code> <code>str</code> \u2705 \u2014 Search query <code>context</code> <code>str</code> \u274c <code>\"blended\"</code> <code>\"blended\"</code>, <code>\"user\"</code>, <code>\"hashtag\"</code>, or <code>\"place\"</code> <p>Returns: <code>dict</code> with keys <code>users</code>, <code>hashtags</code>, <code>places</code></p> <pre><code>results = ig.public.search(\"fashion\")\n\nfor user in results[\"users\"]:\n    print(f\"@{user['username']} \u2014 {user['follower_count']:,}\")\n\nfor tag in results[\"hashtags\"]:\n    print(f\"#{tag['name']} \u2014 {tag['media_count']:,} posts\")\n</code></pre>"},{"location":"anonymous/public-api/#get_feeduser_id-max_count12-max_idnone","title":"get_feed(user_id, max_count=12, max_id=None)","text":"<p>Get user feed via mobile API with rich data.</p> Param Type Required Default Description <code>user_id</code> <code>int\\|str</code> \u2705 \u2014 User PK <code>max_count</code> <code>int</code> \u274c 12 Max items <code>max_id</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> with <code>items</code>, <code>more_available</code>, <code>next_max_id</code></p> <pre><code>feed = ig.public.get_feed(173560420)  # cristiano's PK\nfor item in feed[\"items\"]:\n    print(f\"\u2764\ufe0f{item['likes']:,}  {item['caption'][:50]}\")\n\n# Pagination\nif feed[\"more_available\"]:\n    page2 = ig.public.get_feed(173560420, max_id=feed[\"next_max_id\"])\n</code></pre>"},{"location":"anonymous/public-api/#get_all_postsusername-max_count50","title":"get_all_posts(username, max_count=50)","text":"<p>Get maximum posts using combined strategies (Web API + mobile feed pagination).</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Instagram username <code>max_count</code> <code>int</code> \u274c 50 Maximum posts <p>Returns: <code>list[dict]</code></p> <pre><code>posts = ig.public.get_all_posts(\"nike\", max_count=50)\nprint(f\"Got {len(posts)} posts\")\n</code></pre>"},{"location":"anonymous/public-api/#get_mediamedia_id","title":"get_media(media_id)","text":"<p>Get single media details via mobile API.</p> Param Type Required Description <code>media_id</code> <code>int\\|str</code> \u2705 Media PK <p>Returns: <code>dict</code> or <code>None</code></p> <pre><code>media = ig.public.get_media(3823732431648645952)\nprint(f\"\u2764\ufe0f{media['likes']:,}  \ud83d\udcac{media['comments']}\")\n</code></pre>"},{"location":"anonymous/public-api/#get_reelsusername-max_count12","title":"get_reels(username, max_count=12)","text":"<p>Get user's reels.</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Username <code>max_count</code> <code>int</code> \u274c 12 Max reels <p>Returns: <code>list[dict]</code></p> <pre><code>reels = ig.public.get_reels(\"nike\")\nfor reel in reels:\n    print(f\"\ud83c\udfac {reel['play_count']:,} views\")\n</code></pre>"},{"location":"anonymous/public-api/#get_commentsshortcode-max_count24","title":"get_comments(shortcode, max_count=24)","text":"<p>Get post comments.</p> Param Type Required Default Description <code>shortcode</code> <code>str</code> \u2705 \u2014 Post shortcode <code>max_count</code> <code>int</code> \u274c 24 Max comments <p>Returns: <code>list[dict]</code></p> <pre><code>comments = ig.public.get_comments(\"ABC123\")\nfor c in comments:\n    print(f\"@{c['username']}: {c['text'][:50]}\")\n</code></pre>"},{"location":"anonymous/public-api/#get_media_urlsshortcode","title":"get_media_urls(shortcode)","text":"<p>Get all media URLs (images + videos) for a post. Supports carousels.</p> Param Type Required Description <code>shortcode</code> <code>str</code> \u2705 Post shortcode <p>Returns: <code>list[dict]</code> with <code>url</code>, <code>type</code>, <code>width</code>, <code>height</code></p> <pre><code>urls = ig.public.get_media_urls(\"ABC123\")\nfor item in urls:\n    print(f\"{item['type']}: {item['url']}\")\n</code></pre>"},{"location":"anonymous/public-api/#get_hashtag_postshashtag-max_count12","title":"get_hashtag_posts(hashtag, max_count=12)","text":"<p>Get posts by hashtag (GraphQL).</p> Param Type Required Default Description <code>hashtag</code> <code>str</code> \u2705 \u2014 Hashtag (with or without #) <code>max_count</code> <code>int</code> \u274c 12 Max posts <p>Returns: <code>list[dict]</code></p> <pre><code>posts = ig.public.get_hashtag_posts(\"fashion\", max_count=20)\n</code></pre>"},{"location":"anonymous/public-api/#get_hashtag_posts_v2hashtag-tabrecent-max_count30","title":"get_hashtag_posts_v2(hashtag, tab=\"recent\", max_count=30)","text":"<p>Get hashtag posts via sections API (richer data).</p> Param Type Required Default Description <code>hashtag</code> <code>str</code> \u2705 \u2014 Hashtag name <code>tab</code> <code>str</code> \u274c <code>\"recent\"</code> <code>\"recent\"</code> or <code>\"top\"</code> <code>max_count</code> <code>int</code> \u274c 30 Max posts <p>Returns: <code>dict</code> with <code>tag_name</code>, <code>posts</code>, <code>media_count</code>, <code>more_available</code></p> <pre><code>result = ig.public.get_hashtag_posts_v2(\"fashion\")\nprint(f\"#{result['tag_name']}: {result['media_count']:,} total\")\n</code></pre>"},{"location":"anonymous/public-api/#get_location_postslocation_id-tabrecent-max_count30","title":"get_location_posts(location_id, tab=\"recent\", max_count=30)","text":"<p>Get posts from a location.</p> Param Type Required Default Description <code>location_id</code> <code>int\\|str</code> \u2705 \u2014 Location PK <code>tab</code> <code>str</code> \u274c <code>\"recent\"</code> <code>\"recent\"</code> or <code>\"ranked\"</code> <code>max_count</code> <code>int</code> \u274c 30 Max posts <p>Returns: <code>dict</code> with <code>location</code>, <code>posts</code>, <code>media_count</code>, <code>more_available</code></p> <pre><code>result = ig.public.get_location_posts(213385402)\nprint(f\"{result['location']['name']}: {len(result['posts'])} posts\")\n</code></pre>"},{"location":"anonymous/public-api/#get_similar_accountsusername","title":"get_similar_accounts(username)","text":"<p>Get similar/recommended accounts.</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Instagram username <p>Returns: <code>list[dict]</code></p> <pre><code>similar = ig.public.get_similar_accounts(\"nike\")\nfor acc in similar:\n    print(f\"@{acc['username']} \u2014 {acc['follower_count']:,}\")\n</code></pre>"},{"location":"anonymous/public-api/#get_highlightsusername","title":"get_highlights(username)","text":"<p>Get highlight tray (titles, covers, counts).</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Instagram username <p>Returns: <code>list[dict]</code></p> Field Type Description <code>id</code> <code>str</code> Highlight ID <code>title</code> <code>str</code> Highlight title <code>media_count</code> <code>int</code> Number of items <code>cover_url</code> <code>str</code> Cover image URL <pre><code>highlights = ig.public.get_highlights(\"nike\")\nfor h in highlights:\n    print(f\"\ud83d\udccc {h['title']} ({h['media_count']} items)\")\n</code></pre>"},{"location":"anonymous/public-api/#is_publicusername","title":"is_public(username)","text":"<p>Check if account is public.</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Instagram username <p>Returns: <code>True</code> = public, <code>False</code> = private, <code>None</code> = not found</p> <pre><code>if ig.public.is_public(\"nike\"):\n    print(\"Public account!\")\n</code></pre>"},{"location":"anonymous/public-api/#existsusername","title":"exists(username)","text":"<p>Check if username exists.</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Instagram username <p>Returns: <code>bool</code></p> <pre><code>if ig.public.exists(\"cristiano\"):\n    print(\"Account exists!\")\n</code></pre>"},{"location":"anonymous/public-api/#request_count","title":"request_count","text":"<p>Property \u2014 total anonymous requests made.</p> <pre><code>print(f\"Made {ig.public.request_count} requests so far\")\n</code></pre>"},{"location":"anonymous/public-api/#bulk_profilesusernames-workers10-callbacknone","title":"bulk_profiles(usernames, workers=10, callback=None)","text":"<p>Get multiple profiles in parallel (thread pool).</p> Param Type Required Default Description <code>usernames</code> <code>list[str]</code> \u2705 \u2014 List of usernames <code>workers</code> <code>int</code> \u274c 10 Thread pool size <code>callback</code> <code>callable</code> \u274c <code>None</code> Progress callback <code>(username, profile)</code> <p>Returns: <code>dict[str, dict]</code> \u2014 username \u2192 profile</p> <pre><code>profiles = ig.public.bulk_profiles([\"nike\", \"adidas\", \"puma\"])\nfor username, profile in profiles.items():\n    if profile:\n        print(f\"@{username}: {profile['followers']:,}\")\n</code></pre>"},{"location":"anonymous/public-api/#bulk_feedsuser_ids-max_count12-workers10-callbacknone","title":"bulk_feeds(user_ids, max_count=12, workers=10, callback=None)","text":"<p>Get multiple feeds in parallel.</p> Param Type Required Default Description <code>user_ids</code> <code>list[int\\|str]</code> \u2705 \u2014 List of user PKs <code>max_count</code> <code>int</code> \u274c 12 Posts per user <code>workers</code> <code>int</code> \u274c 10 Thread pool size <code>callback</code> <code>callable</code> \u274c <code>None</code> Progress callback <p>Returns: <code>dict[int, dict]</code> \u2014 user_id \u2192 feed data</p> <pre><code>feeds = ig.public.bulk_feeds([123, 456, 789])\nfor uid, feed in feeds.items():\n    print(uid, len(feed.get(\"items\", [])))\n</code></pre>"},{"location":"anonymous/public-data/","title":"Instagram Public Data","text":"<p>The <code>PublicDataAPI</code> provides a comprehensive suite of methods to fetch, analyze, and track Instagram data without requiring user authentication. This module is specifically designed to be compatible with Supermetrics-style reporting, offering extensive analytics capabilities through anonymous access.</p>"},{"location":"anonymous/public-data/#overview","title":"Overview","text":"<p>Unlike standard anonymous endpoints, <code>PublicDataAPI</code> aggregates multiple endpoints, tracks rating limits (e.g., hashtag quotas limits), computes engagement metrics, and allows you to build standard analytics reports out of the box.</p> <pre><code>from instaapi import Instagram\n\nig = Instagram.anonymous()\n\n# Fetch deep profile analytics\nprofile = ig.public_data.get_profile_info(\"nike\")\nprint(f\"Followers: {profile.followers:,}\")\n\n# Look up recent posts by hashtag\ntop_posts = ig.public_data.search_hashtag_top(\"fitness\")\nprint(f\"Found {len(top_posts)} top posts\")\n</code></pre>"},{"location":"anonymous/public-data/#features","title":"Features","text":"<ul> <li>No login required: Works 100% anonymously using the <code>AnonClient</code>.</li> <li>Supermetrics Compatibility: Allows exporting data seamlessly to <code>PROFILES</code>, <code>POSTS</code>, and <code>HASHTAGS</code> tables.</li> <li>Engagement Analysis: Instantly compute average likes, comments, and engagement scores (Poor to Excellent).</li> <li>Competitor Tracking: Track account growth over time with <code>ProfileSnapshot</code>.</li> <li>Hashtag Quota Tracking: Automatically tracks the Instagram anonymous limit of 30 unique hashtag searches per profile per 7 days.</li> <li>Async Parity: Available as <code>AsyncPublicDataAPI</code>.</li> </ul>"},{"location":"anonymous/public-data/#profile-information","title":"\ud83d\udc64 Profile Information","text":"<p>Fetch detailed statistics and information about a public account or multiple accounts.</p>"},{"location":"anonymous/public-data/#get_profile_infousername-str-publicprofile","title":"<code>get_profile_info(username: str) -&gt; PublicProfile</code>","text":"<p>Retrieves a single profile's analytics.</p> <pre><code>profile = ig.public_data.get_profile_info(\"cristiano\")\nprint(profile.is_verified)\n</code></pre>"},{"location":"anonymous/public-data/#profile-posts","title":"\ud83d\udcf8 Profile Posts","text":"<p>Fetch a user's recent posts along with metadata such as likes, comments, and engagements.</p>"},{"location":"anonymous/public-data/#get_profile_postsusername-str-max_count-int-50-listpublicpost","title":"<code>get_profile_posts(username: str, max_count: int = 50) -&gt; List[PublicPost]</code>","text":"<pre><code>posts = ig.public_data.get_profile_posts(\"nike\", max_count=20)\nfor post in posts:\n    print(post.post_url, post.likes, post.comments)\n</code></pre>"},{"location":"anonymous/public-data/#hashtag-search","title":"\ud83d\udd0d Hashtag Search","text":"<p>Search for public posts using a specific hashtag.</p> <p>\u26a0\ufe0f Quota Warning: Instagram anonymously restricts you to 30 unique hashtag searches per profile per 7 rolling days. The <code>PublicDataAPI</code> automatically tracks this. You can check your remaining quota using <code>ig.public_data.get_hashtag_quota()</code>.</p>"},{"location":"anonymous/public-data/#search_hashtag_tophashtag-str-listhashtagpost","title":"<code>search_hashtag_top(hashtag: str) -&gt; List[HashtagPost]</code>","text":"<p>Fetches the \"Top Posts\" for a given hashtag (always returns a maximum of 100 posts).</p>"},{"location":"anonymous/public-data/#search_hashtag_recenthashtag-str-listhashtagpost","title":"<code>search_hashtag_recent(hashtag: str) -&gt; List[HashtagPost]</code>","text":"<p>Fetches the \"Recent Posts\" for a given hashtag within the last 24 hours (maximum of 250 posts).</p> <pre><code>results = ig.public_data.search_hashtag_recent(\"python\")\nfor item in results:\n    print(item.post.shortcode)\n</code></pre>"},{"location":"anonymous/public-data/#analytics-reporting","title":"\ud83d\udcca Analytics &amp; Reporting","text":""},{"location":"anonymous/public-data/#compare_profilesusernames-liststr-dict","title":"<code>compare_profiles(usernames: List[str]) -&gt; Dict</code>","text":"<p>Ranks and compares multiple profiles based on followers and engagement metrics.</p> <pre><code>metrics = ig.public_data.compare_profiles([\"nike\", \"adidas\", \"puma\"])\nprint(metrics[\"ranks\"])\n</code></pre>"},{"location":"anonymous/public-data/#engagement_analysisusername-str-dict","title":"<code>engagement_analysis(username: str) -&gt; Dict</code>","text":"<p>Calculates average likes, comments, and assigns an engagement score.</p> <pre><code>analysis = ig.public_data.engagement_analysis(\"nike\")\nprint(analysis[\"rating\"]) # Output: 'Excellent', 'Good', etc.\n</code></pre>"},{"location":"anonymous/public-data/#track_profileusername-str-profilesnapshot","title":"<code>track_profile(username: str) -&gt; ProfileSnapshot</code>","text":"<p>Records the profile's current state and saves it to a local historical database (<code>.instaapi/public_history.json</code>). Allowing you to measure follower growth over time.</p>"},{"location":"anonymous/public-data/#export-supermetrics-reports","title":"\ud83d\udce4 Export &amp; Supermetrics Reports","text":""},{"location":"anonymous/public-data/#build_reportusernames-top_hashtags-recent_hashtags-publicdatareport","title":"<code>build_report(usernames, top_hashtags, recent_hashtags) -&gt; PublicDataReport</code>","text":"<p>Builds an aggregated report containing profiles, posts, and hashtag posts.</p> <pre><code>report = ig.public_data.build_report(\n    usernames=[\"nike\", \"adidas\"],\n    top_hashtags=[\"shoes\"]\n)\n</code></pre>"},{"location":"anonymous/public-data/#export_reportreport-format-output_file","title":"<code>export_report(report, format, output_file)</code>","text":"<p>Exports the built report to a specific file format (<code>json</code>, <code>csv</code>, or <code>jsonl</code>).</p> <pre><code>ig.public_data.export_report(report, \"csv\", \"my_analytics.csv\")\n</code></pre> <p>Or you can use the object mappings to upload standard tables directly:</p> <pre><code>db.insert_profiles(report.to_profiles_table())\ndb.insert_posts(report.to_posts_table())\ndb.insert_hashtags(report.to_hashtags_table())\n</code></pre>"},{"location":"anonymous/public-data/#available-models","title":"Available Models","text":"<ul> <li><code>PublicProfile</code></li> <li><code>PublicPost</code></li> <li><code>HashtagPost</code></li> <li><code>ProfileSnapshot</code></li> <li><code>PublicDataReport</code></li> </ul> <p>For more details on the models referenced here, see the Reference Models documentation.</p>"},{"location":"authenticated/direct/","title":"DirectAPI","text":"<p><code>ig.direct</code> \u2014 Direct Messages: inbox, threads, send text/media/links/profiles, reactions.</p>"},{"location":"authenticated/direct/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Read inbox\ninbox = ig.direct.get_inbox()\nfor thread in inbox.get(\"inbox\", {}).get(\"threads\", []):\n    print(f\"{thread['thread_title']}: {thread['last_permanent_item']['text']}\")\n\n# Send message\nig.direct.send_text(\"340282366841710300949128\", \"Hey! \ud83d\udc4b\")\n</code></pre>"},{"location":"authenticated/direct/#inbox","title":"Inbox","text":""},{"location":"authenticated/direct/#get_inboxcursornone-limit20","title":"get_inbox(cursor=None, limit=20)","text":"<p>Get all conversations (inbox).</p> Param Type Required Default Description <code>cursor</code> <code>str</code> \u274c <code>None</code> Pagination cursor <code>limit</code> <code>int</code> \u274c 20 Threads per page <p>Returns: <code>dict</code> \u2014 inbox with threads, pending count</p>"},{"location":"authenticated/direct/#get_pending_inbox","title":"get_pending_inbox()","text":"<p>Get pending message requests (from non-followers).</p> <p>Returns: <code>dict</code></p>"},{"location":"authenticated/direct/#get_threadthread_id-cursornone","title":"get_thread(thread_id, cursor=None)","text":"<p>Get full message history of a single conversation.</p> Param Type Required Description <code>thread_id</code> <code>str</code> \u2705 Thread ID <code>cursor</code> <code>str</code> \u274c Pagination cursor for older messages <p>Returns: <code>dict</code> \u2014 thread with messages</p>"},{"location":"authenticated/direct/#sending-messages","title":"Sending Messages","text":""},{"location":"authenticated/direct/#send_textthread_id-text","title":"send_text(thread_id, text)","text":"<p>Send a text message.</p> Param Type Required Description <code>thread_id</code> <code>str</code> \u2705 Thread ID <code>text</code> <code>str</code> \u2705 Message content <pre><code>ig.direct.send_text(\"340282366841710300949128\", \"Hello! \ud83d\udd25\")\n</code></pre>"},{"location":"authenticated/direct/#send_linkthread_id-url-text","title":"send_link(thread_id, url, text=\"\")","text":"<p>Share a link in a conversation.</p> Param Type Required Default Description <code>thread_id</code> <code>str</code> \u2705 \u2014 Thread ID <code>url</code> <code>str</code> \u2705 \u2014 Link URL <code>text</code> <code>str</code> \u274c <code>\"\"</code> Additional text"},{"location":"authenticated/direct/#send_media_sharethread_id-media_id","title":"send_media_share(thread_id, media_id)","text":"<p>Share a post in DMs.</p> Param Type Required Description <code>thread_id</code> <code>str</code> \u2705 Thread ID <code>media_id</code> <code>int\\|str</code> \u2705 Post PK"},{"location":"authenticated/direct/#send_profilethread_id-user_id","title":"send_profile(thread_id, user_id)","text":"<p>Share a user's profile in DMs.</p> Param Type Required Description <code>thread_id</code> <code>str</code> \u2705 Thread ID <code>user_id</code> <code>int\\|str</code> \u2705 User PK to share"},{"location":"authenticated/direct/#create_threaduser_ids-text","title":"create_thread(user_ids, text=\"\")","text":"<p>Start a new conversation with one or more users.</p> Param Type Required Default Description <code>user_ids</code> <code>list[int\\|str]</code> \u2705 \u2014 Recipient user PKs <code>text</code> <code>str</code> \u274c <code>\"\"</code> Initial message <pre><code># DM a new user\nthread = ig.direct.create_thread([173560420], \"Hi there!\")\n</code></pre>"},{"location":"authenticated/direct/#interactions","title":"Interactions","text":""},{"location":"authenticated/direct/#send_reactionthread_id-item_id-emoji","title":"send_reaction(thread_id, item_id, emoji=\"\u2764\ufe0f\")","text":"<p>React to a message with an emoji.</p> Param Type Required Default Description <code>thread_id</code> <code>str</code> \u2705 \u2014 Thread ID <code>item_id</code> <code>str</code> \u2705 \u2014 Message ID <code>emoji</code> <code>str</code> \u274c <code>\"\u2764\ufe0f\"</code> Reaction emoji"},{"location":"authenticated/direct/#unsend_messagethread_id-item_id","title":"unsend_message(thread_id, item_id)","text":"<p>Unsend/delete a message you sent.</p>"},{"location":"authenticated/direct/#mark_seenthread_id-item_idnone","title":"mark_seen(thread_id, item_id=None)","text":"<p>Mark messages in a thread as seen.</p>"},{"location":"authenticated/direct/#thread-management","title":"Thread Management","text":""},{"location":"authenticated/direct/#mute_threadthread_id","title":"mute_thread(thread_id)","text":"<p>Mute notification for a conversation.</p>"},{"location":"authenticated/direct/#unmute_threadthread_id","title":"unmute_thread(thread_id)","text":"<p>Unmute a conversation.</p>"},{"location":"authenticated/direct/#leave_threadthread_id","title":"leave_thread(thread_id)","text":"<p>Leave a group conversation.</p>"},{"location":"authenticated/feed/","title":"FeedAPI","text":"<p><code>ig.feed</code> \u2014 Fetch user feeds, timeline, liked/saved posts, hashtag and location feeds.</p>"},{"location":"authenticated/feed/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Get the latest feed of a user\nfeed = ig.feed.get_user_feed(173560420)\n\nfor item in feed.get(\"items\", []):\n    print(item.get(\"code\"), item.get(\"like_count\"))\n\n# Check for next page\nif feed.get(\"more_available\"):\n    print(\"Next cursor:\", feed.get(\"next_max_id\"))\n</code></pre>"},{"location":"authenticated/feed/#methods","title":"Methods","text":""},{"location":"authenticated/feed/#get_user_feeduser_id-count12-max_idnone","title":"get_user_feed(user_id, count=12, max_id=None)","text":"<p>Get the main post feed for any user.</p> Param Type Required Default Description <code>user_id</code> <code>int\\|str</code> \u2705 \u2014 User PK <code>count</code> <code>int</code> \u274c 12 Posts per page <code>max_id</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> \u2014 raw API response with <code>items</code>, <code>more_available</code>, <code>next_max_id</code></p> <pre><code>feed = ig.feed.get_user_feed(173560420)\n\n# Pagination\nif feed.get(\"more_available\"):\n    page2 = ig.feed.get_user_feed(173560420, max_id=feed[\"next_max_id\"])\n</code></pre>"},{"location":"authenticated/feed/#get_all_postsuser_id-max_posts100-count_per_page12","title":"get_all_posts(user_id, max_posts=100, count_per_page=12)","text":"<p>Get all posts with automatic pagination.</p> Param Type Required Default Description <code>user_id</code> <code>int\\|str</code> \u2705 \u2014 User PK <code>max_posts</code> <code>int</code> \u274c 100 Maximum total posts <code>count_per_page</code> <code>int</code> \u274c 12 Posts per API call <p>Returns: <code>list[Media]</code> \u2014 parsed Media models</p> <pre><code>all_posts = ig.feed.get_all_posts(173560420, max_posts=50)\nprint(f\"Got {len(all_posts)} posts\")\n</code></pre>"},{"location":"authenticated/feed/#get_timelinemax_idnone","title":"get_timeline(max_id=None)","text":"<p>Get your home timeline feed (posts from people you follow).</p> Param Type Required Default Description <code>max_id</code> <code>str</code> \u274c <code>None</code> Pagination token <p>Returns: <code>dict</code></p> <pre><code>timeline = ig.feed.get_timeline()\n</code></pre>"},{"location":"authenticated/feed/#get_likedmax_idnone","title":"get_liked(max_id=None)","text":"<p>Get posts you have liked (via GraphQL).</p> Param Type Required Default Description <code>max_id</code> <code>str</code> \u274c <code>None</code> Pagination token <p>Returns: <code>dict</code></p>"},{"location":"authenticated/feed/#get_savedmax_idnone","title":"get_saved(max_id=None)","text":"<p>Get your saved/bookmarked posts (via GraphQL).</p> Param Type Required Default Description <code>max_id</code> <code>str</code> \u274c <code>None</code> Pagination token <p>Returns: <code>dict</code></p>"},{"location":"authenticated/feed/#get_tag_feedhashtag-max_idnone","title":"get_tag_feed(hashtag, max_id=None)","text":"<p>Get posts by hashtag.</p> Param Type Required Default Description <code>hashtag</code> <code>str</code> \u2705 \u2014 Hashtag name (without #) <code>max_id</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> with <code>items</code>, <code>more_available</code>, <code>next_max_id</code></p> <pre><code>feed = ig.feed.get_tag_feed(\"fashion\")\n</code></pre>"},{"location":"authenticated/feed/#get_location_feedlocation_id-max_idnone","title":"get_location_feed(location_id, max_id=None)","text":"<p>Get posts by location.</p> Param Type Required Default Description <code>location_id</code> <code>int\\|str</code> \u2705 \u2014 Location PK <code>max_id</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> with <code>items</code>, <code>more_available</code>, <code>next_max_id</code></p>"},{"location":"authenticated/feed/#get_reels_feedmax_idnone","title":"get_reels_feed(max_id=None)","text":"<p>Get trending reels (Explore reels tab).</p> Param Type Required Default Description <code>max_id</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code></p>"},{"location":"authenticated/feed/#pagination-example","title":"Pagination Example","text":"<p>All feed methods support cursor-based pagination:</p> <pre><code>all_posts = []\ncursor = None\n\nfor _ in range(3):  # Grab 3 pages\n    res = ig.feed.get_user_feed(TARGET_PK, max_id=cursor)\n    all_posts.extend(res.get(\"items\", []))\n\n    if not res.get(\"more_available\"):\n        break\n    cursor = res.get(\"next_max_id\")\n\nprint(f\"Total: {len(all_posts)} posts\")\n</code></pre>"},{"location":"authenticated/friendships/","title":"FriendshipsAPI","text":"<p><code>ig.friendships</code> \u2014 Manage follower relationships: follow, unfollow, block, mute, restrict, close friends, and query friendship status.</p>"},{"location":"authenticated/friendships/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\nuser = ig.users.get_by_username(\"nasa\")\nig.friendships.follow(user.pk)\nprint(\"Followed NASA!\")\n</code></pre>"},{"location":"authenticated/friendships/#follow-unfollow","title":"Follow / Unfollow","text":""},{"location":"authenticated/friendships/#followuser_id","title":"follow(user_id)","text":"<p>Follow an Instagram user. Automatically becomes a pending request if account is private.</p> Param Type Required Description <code>user_id</code> <code>int\\|str</code> \u2705 Account PK"},{"location":"authenticated/friendships/#unfollowuser_id","title":"unfollow(user_id)","text":"<p>Unfollow a user.</p>"},{"location":"authenticated/friendships/#remove_followeruser_id","title":"remove_follower(user_id)","text":"<p>Force-remove a user from your followers list.</p>"},{"location":"authenticated/friendships/#block-restrict","title":"Block / Restrict","text":""},{"location":"authenticated/friendships/#blockuser_id","title":"block(user_id)","text":"<p>Block a user.</p>"},{"location":"authenticated/friendships/#unblockuser_id","title":"unblock(user_id)","text":"<p>Unblock a user.</p>"},{"location":"authenticated/friendships/#restrictuser_id","title":"restrict(user_id)","text":"<p>Restrict a user (hide DMs, comments without blocking).</p>"},{"location":"authenticated/friendships/#unrestrictuser_id","title":"unrestrict(user_id)","text":"<p>Remove restriction.</p>"},{"location":"authenticated/friendships/#muteuser_id-mute_poststrue-mute_storiestrue","title":"mute(user_id, mute_posts=True, mute_stories=True)","text":"<p>Mute a user's posts and/or stories.</p> Param Type Required Default Description <code>user_id</code> <code>int\\|str</code> \u2705 \u2014 User PK <code>mute_posts</code> <code>bool</code> \u274c <code>True</code> Hide posts from feed <code>mute_stories</code> <code>bool</code> \u274c <code>True</code> Hide stories"},{"location":"authenticated/friendships/#unmuteuser_id-unmute_poststrue-unmute_storiestrue","title":"unmute(user_id, unmute_posts=True, unmute_stories=True)","text":"<p>Unmute a user.</p>"},{"location":"authenticated/friendships/#followers-following-lists","title":"Followers &amp; Following Lists","text":""},{"location":"authenticated/friendships/#get_followersuser_id-count50-afternone","title":"get_followers(user_id, count=50, after=None)","text":"<p>Fetch followers of a user.</p> Param Type Required Default Description <code>user_id</code> <code>int\\|str</code> \u2705 \u2014 Target account PK <code>count</code> <code>int</code> \u274c 50 Items per page <code>after</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> with <code>users</code> list and pagination</p> <pre><code>data = ig.friendships.get_followers(173560420)\nfor u in data.get(\"users\", []):\n    print(f\"@{u.get('username')}\")\n</code></pre>"},{"location":"authenticated/friendships/#get_all_followersuser_id-max_count1000-count_per_page50","title":"get_all_followers(user_id, max_count=1000, count_per_page=50)","text":"<p>Get all followers with automatic pagination.</p> Param Type Required Default Description <code>user_id</code> <code>int\\|str</code> \u2705 \u2014 Target PK <code>max_count</code> <code>int</code> \u274c 1000 Maximum total <code>count_per_page</code> <code>int</code> \u274c 50 Per API call <p>Returns: <code>list[UserShort]</code></p> <pre><code>followers = ig.friendships.get_all_followers(173560420, max_count=200)\nprint(f\"Got {len(followers)} followers\")\n</code></pre>"},{"location":"authenticated/friendships/#get_followinguser_id-count50-afternone","title":"get_following(user_id, count=50, after=None)","text":"<p>Fetch accounts that a user is following.</p> <p>Returns: <code>dict</code> with <code>users</code> list and pagination</p>"},{"location":"authenticated/friendships/#get_all_followinguser_id-max_count1000-count_per_page50","title":"get_all_following(user_id, max_count=1000, count_per_page=50)","text":"<p>Get all following with automatic pagination.</p> <p>Returns: <code>list[UserShort]</code></p>"},{"location":"authenticated/friendships/#friendship-status","title":"Friendship Status","text":""},{"location":"authenticated/friendships/#showuser_id","title":"show(user_id)","text":"<p>Check relationship between you and a user (following, followed_by, blocking, muting, etc.).</p> Param Type Required Description <code>user_id</code> <code>int\\|str</code> \u2705 User PK <p>Returns: <code>dict</code> \u2014 friendship state</p> <pre><code>status = ig.friendships.show(173560420)\nprint(\"Following:\", status.get(\"following\"))\nprint(\"Followed by:\", status.get(\"followed_by\"))\nprint(\"Blocking:\", status.get(\"blocking\"))\n</code></pre>"},{"location":"authenticated/friendships/#follow-requests-private-accounts","title":"Follow Requests (Private Accounts)","text":""},{"location":"authenticated/friendships/#get_pending_requests","title":"get_pending_requests()","text":"<p>List incoming follow requests (for private accounts).</p> <p>Returns: <code>dict</code> with <code>users</code> list</p>"},{"location":"authenticated/friendships/#approve_requestuser_id","title":"approve_request(user_id)","text":"<p>Approve an incoming follow request.</p>"},{"location":"authenticated/friendships/#reject_requestuser_id","title":"reject_request(user_id)","text":"<p>Reject/ignore a follow request.</p>"},{"location":"authenticated/friendships/#close-friends","title":"Close Friends","text":""},{"location":"authenticated/friendships/#get_close_friends","title":"get_close_friends()","text":"<p>Get your Close Friends list.</p> <p>Returns: <code>dict</code> with <code>users</code> list</p>"},{"location":"authenticated/friendships/#add_close_frienduser_id","title":"add_close_friend(user_id)","text":"<p>Add a user to Close Friends.</p>"},{"location":"authenticated/friendships/#set_close_friendsadd_user_idsnone-remove_user_idsnone","title":"set_close_friends(add_user_ids=None, remove_user_ids=None)","text":"<p>Bulk add/remove Close Friends.</p> Param Type Required Description <code>add_user_ids</code> <code>list[int\\|str]</code> \u274c PKs to add <code>remove_user_ids</code> <code>list[int\\|str]</code> \u274c PKs to remove"},{"location":"authenticated/friendships/#is_close_frienduser_id","title":"is_close_friend(user_id)","text":"<p>Check if a user is in your Close Friends list.</p> <p>Returns: <code>bool</code></p>"},{"location":"authenticated/graphql/","title":"GraphQLAPI","text":"<p><code>ig.graphql</code> \u2014 Direct access to Instagram's GraphQL endpoint for advanced queries with full pagination.</p> <p>GraphQL supports two transport modes:</p> <ul> <li>Legacy <code>query_hash</code> (GET) \u2014 still works for some queries</li> <li>Modern <code>doc_id</code> (POST) \u2014 required for newer endpoints, richer data</li> </ul>"},{"location":"authenticated/graphql/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Get followers with pagination\ndata = ig.graphql.get_followers(173560420, count=50)\nfor user in data[\"users\"]:\n    print(f\"@{user['username']}\")\n\nif data[\"has_next\"]:\n    page2 = ig.graphql.get_followers(173560420, after=data[\"end_cursor\"])\n</code></pre>"},{"location":"authenticated/graphql/#followers-following","title":"Followers &amp; Following","text":""},{"location":"authenticated/graphql/#get_followersuser_id-count50-afternone","title":"get_followers(user_id, count=50, after=None)","text":"<p>Get followers with pagination.</p> Param Type Required Default Description <code>user_id</code> <code>int\\|str</code> \u2705 \u2014 User PK <code>count</code> <code>int</code> \u274c 50 Per page (max ~50) <code>after</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> with <code>count</code>, <code>users</code>, <code>has_next</code>, <code>end_cursor</code></p>"},{"location":"authenticated/graphql/#get_all_followersuser_id-max_count5000","title":"get_all_followers(user_id, max_count=5000)","text":"<p>Get ALL followers with auto-pagination.</p> <p>Returns: <code>list[dict]</code> \u2014 all followers</p>"},{"location":"authenticated/graphql/#get_followinguser_id-count50-afternone","title":"get_following(user_id, count=50, after=None)","text":"<p>Get following list with pagination.</p> <p>Returns: <code>dict</code> with <code>count</code>, <code>users</code>, <code>has_next</code>, <code>end_cursor</code></p>"},{"location":"authenticated/graphql/#get_all_followinguser_id-max_count5000","title":"get_all_following(user_id, max_count=5000)","text":"<p>Get ALL following with auto-pagination.</p> <p>Returns: <code>list[dict]</code></p>"},{"location":"authenticated/graphql/#posts","title":"Posts","text":""},{"location":"authenticated/graphql/#get_user_postsuser_id-count12-afternone","title":"get_user_posts(user_id, count=12, after=None)","text":"<p>Get user posts via legacy <code>query_hash</code> (GET).</p> Param Type Required Default Description <code>user_id</code> <code>int\\|str</code> \u2705 \u2014 User PK <code>count</code> <code>int</code> \u274c 12 Per page (max ~50) <code>after</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> with <code>count</code>, <code>posts</code>, <code>has_next</code>, <code>end_cursor</code></p>"},{"location":"authenticated/graphql/#get_user_posts_v2username-count12-afternone","title":"get_user_posts_v2(username, count=12, after=None)","text":"<p>Get posts via modern <code>doc_id</code> (richer data).</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Username (not user_id!) <code>count</code> <code>int</code> \u274c 12 Per page <code>after</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> with <code>count</code>, <code>posts</code>, <code>has_next</code>, <code>end_cursor</code></p>"},{"location":"authenticated/graphql/#get_all_user_posts_v2username-max_count100","title":"get_all_user_posts_v2(username, max_count=100)","text":"<p>Get ALL posts via doc_id with auto-pagination.</p> <p>Returns: <code>list[dict]</code> \u2014 all posts with full metadata</p> <pre><code>all_posts = ig.graphql.get_all_user_posts_v2(\"nike\", max_count=200)\nprint(f\"Got {len(all_posts)} posts\")\n</code></pre>"},{"location":"authenticated/graphql/#get_tagged_postsuser_id-count12-afternone","title":"get_tagged_posts(user_id, count=12, after=None)","text":"<p>Get posts where the user is tagged (\"Photos of You\").</p> <p>Returns: <code>dict</code> with <code>count</code>, <code>posts</code>, <code>has_next</code>, <code>end_cursor</code></p>"},{"location":"authenticated/graphql/#media-details","title":"Media Details","text":""},{"location":"authenticated/graphql/#get_media_detailshortcode","title":"get_media_detail(shortcode)","text":"<p>Get full media info via doc_id POST.</p> Param Type Required Description <code>shortcode</code> <code>str</code> \u2705 Post shortcode from URL <p>Returns: <code>dict</code> \u2014 complete media data</p>"},{"location":"authenticated/graphql/#get_comments_v2media_id-count20-afternone","title":"get_comments_v2(media_id, count=20, after=None)","text":"<p>Get threaded comments via doc_id POST.</p> Param Type Required Default Description <code>media_id</code> <code>int\\|str</code> \u2705 \u2014 Media PK <code>count</code> <code>int</code> \u274c 20 Per page <code>after</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> with <code>comments</code>, <code>has_next</code>, <code>end_cursor</code>, <code>count</code></p>"},{"location":"authenticated/graphql/#get_likers_v2shortcode-count50-afternone","title":"get_likers_v2(shortcode, count=50, after=None)","text":"<p>Get post likers via doc_id POST.</p> Param Type Required Default Description <code>shortcode</code> <code>str</code> \u2705 \u2014 Post shortcode <code>count</code> <code>int</code> \u274c 50 Per page <code>after</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> with <code>users</code>, <code>count</code>, <code>has_next</code>, <code>end_cursor</code></p>"},{"location":"authenticated/graphql/#raw-queries","title":"Raw Queries","text":""},{"location":"authenticated/graphql/#raw_queryquery_hash-variables","title":"raw_query(query_hash, variables)","text":"<p>Send any custom GraphQL query via legacy GET transport.</p> Param Type Required Description <code>query_hash</code> <code>str</code> \u2705 GraphQL query hash <code>variables</code> <code>dict</code> \u2705 Query variables"},{"location":"authenticated/graphql/#raw_doc_querydoc_id-variables-friendly_name","title":"raw_doc_query(doc_id, variables, friendly_name=\"\")","text":"<p>Send any custom GraphQL query via modern doc_id POST.</p> Param Type Required Default Description <code>doc_id</code> <code>str</code> \u2705 \u2014 Document ID <code>variables</code> <code>dict</code> \u2705 \u2014 Query variables <code>friendly_name</code> <code>str</code> \u274c <code>\"\"</code> API request name <pre><code># Custom query example\nresult = ig.graphql.raw_doc_query(\n    doc_id=\"9496468463735694\",\n    variables={\"username\": \"nike\"},\n    friendly_name=\"ProfileInfoQuery\",\n)\n</code></pre>"},{"location":"authenticated/hashtags/","title":"HashtagsAPI","text":"<p><code>ig.hashtags</code> \u2014 Hashtag info, posts, follow/unfollow, search with pagination, related tags.</p>"},{"location":"authenticated/hashtags/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Get hashtag info\ninfo = ig.hashtags.get_info(\"fashion\")\nprint(f\"#{info.get('name')}: {info.get('media_count'):,} posts\")\n\n# Search with pagination\nresult = ig.hashtags.search_posts(\"#fashion\", max_pages=3)\nfor post in result.posts:\n    print(f\"@{post.user.username}: {post.like_count} likes\")\n</code></pre>"},{"location":"authenticated/hashtags/#methods","title":"Methods","text":""},{"location":"authenticated/hashtags/#get_infohashtag","title":"get_info(hashtag)","text":"<p>Get hashtag metadata (post count, follower count).</p> Param Type Required Description <code>hashtag</code> <code>str</code> \u2705 Hashtag name (without #) <p>Returns: <code>dict</code> \u2014 name, media_count, follow_status, etc.</p>"},{"location":"authenticated/hashtags/#get_postshashtag","title":"get_posts(hashtag)","text":"<p>Get top + recent posts (raw sections format).</p> Param Type Required Description <code>hashtag</code> <code>str</code> \u2705 Hashtag name <p>Returns: <code>dict</code> \u2014 sections data</p>"},{"location":"authenticated/hashtags/#search_postshashtag-max_pages1-next_max_idnone-rank_tokennone-delay20","title":"search_posts(hashtag, max_pages=1, next_max_id=None, rank_token=None, delay=2.0)","text":"<p>Search posts by hashtag with full pagination support. This is the most powerful hashtag search method \u2014 returns parsed <code>Media</code> and <code>UserShort</code> models.</p> Param Type Required Default Description <code>hashtag</code> <code>str</code> \u2705 \u2014 Hashtag name (#fashion or fashion) <code>max_pages</code> <code>int</code> \u274c 1 Pages to load <code>next_max_id</code> <code>str</code> \u274c <code>None</code> Continue from cursor <code>rank_token</code> <code>str</code> \u274c <code>None</code> From previous result <code>delay</code> <code>float</code> \u274c 2.0 Wait between pages <p>Returns: <code>HashtagSearchResult</code> with <code>posts</code>, <code>users</code>, <code>has_more</code>, <code>next_max_id</code>, <code>rank_token</code></p> <pre><code>result = ig.hashtags.search_posts(\"#programming\", max_pages=5)\n\nfor post in result.posts:\n    print(f\"@{post.user.username}: \u2764\ufe0f{post.like_count}\")\n\n# Paginate\nif result.has_more:\n    more = ig.hashtags.search_posts(\n        \"#programming\",\n        next_max_id=result.next_max_id,\n        rank_token=result.rank_token,\n    )\n    result = result.merge(more)  # Combine results\n</code></pre>"},{"location":"authenticated/hashtags/#followhashtag","title":"follow(hashtag)","text":"<p>Follow a hashtag.</p>"},{"location":"authenticated/hashtags/#unfollowhashtag","title":"unfollow(hashtag)","text":"<p>Unfollow a hashtag.</p>"},{"location":"authenticated/hashtags/#get_relatedhashtag","title":"get_related(hashtag)","text":"<p>Get related/similar hashtags.</p> Param Type Required Description <code>hashtag</code> <code>str</code> \u2705 Hashtag name <p>Returns: <code>list[dict]</code> \u2014 similar hashtags</p> <pre><code>related = ig.hashtags.get_related(\"fashion\")\nfor tag in related:\n    print(f\"#{tag.get('name')}: {tag.get('media_count'):,} posts\")\n</code></pre>"},{"location":"authenticated/insights/","title":"InsightsAPI","text":"<p><code>ig.insights</code> \u2014 Account statistics, post performance, business info, and ad accounts.</p>"},{"location":"authenticated/insights/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Account summary\nsummary = ig.insights.get_account_summary()\nprint(summary)\n\n# Single post stats\nstats = ig.insights.get_media_insights(3124567890123)\nprint(stats)\n</code></pre>"},{"location":"authenticated/insights/#methods","title":"Methods","text":""},{"location":"authenticated/insights/#get_account_summary","title":"get_account_summary()","text":"<p>Get overall account statistics (reach, impressions, followers growth).</p> <p>Returns: <code>dict</code> \u2014 account-level analytics</p>"},{"location":"authenticated/insights/#get_media_insightsmedia_id","title":"get_media_insights(media_id)","text":"<p>Get performance analytics for a single post.</p> Param Type Required Description <code>media_id</code> <code>int\\|str</code> \u2705 Media PK <p>Returns: <code>dict</code> \u2014 reach, impressions, saves, shares, engagement</p>"},{"location":"authenticated/insights/#get_business_infouser_id","title":"get_business_info(user_id)","text":"<p>Get business/creator account info and linked Facebook page.</p> Param Type Required Description <code>user_id</code> <code>int\\|str</code> \u2705 User PK <p>Returns: <code>dict</code></p>"},{"location":"authenticated/insights/#get_ads_accounts","title":"get_ads_accounts()","text":"<p>Get linked Facebook Ads accounts.</p> <p>Returns: <code>dict</code> \u2014 ads accounts list</p> <p>Note</p> <p>Insights endpoints require a Business or Creator account.</p>"},{"location":"authenticated/location/","title":"LocationAPI","text":"<p><code>ig.location</code> \u2014 Location info, feed, search, and nearby places.</p>"},{"location":"authenticated/location/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Search for places\nplaces = ig.location.search(\"Times Square\")\nfor v in places.get(\"venues\", []):\n    print(f\"{v['name']} (PK: {v['external_id']})\")\n\n# Get location feed\nfeed = ig.location.get_feed(213385402)\n</code></pre>"},{"location":"authenticated/location/#methods","title":"Methods","text":""},{"location":"authenticated/location/#get_infolocation_id","title":"get_info(location_id)","text":"<p>Get location details (name, address, coordinates, media count).</p> Param Type Required Description <code>location_id</code> <code>int\\|str</code> \u2705 Location PK <p>Returns: <code>dict</code></p>"},{"location":"authenticated/location/#get_feedlocation_id-max_idnone","title":"get_feed(location_id, max_id=None)","text":"<p>Get posts from a location (top + recent).</p> Param Type Required Default Description <code>location_id</code> <code>int\\|str</code> \u2705 \u2014 Location PK <code>max_id</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code> with <code>sections</code>, <code>next_max_id</code>, <code>more_available</code></p>"},{"location":"authenticated/location/#searchquery-latnone-lngnone","title":"search(query, lat=None, lng=None)","text":"<p>Search for locations by name. Optionally narrow results with coordinates.</p> Param Type Required Default Description <code>query</code> <code>str</code> \u2705 \u2014 Place name <code>lat</code> <code>float</code> \u274c <code>None</code> Latitude hint <code>lng</code> <code>float</code> \u274c <code>None</code> Longitude hint <p>Returns: <code>dict</code> with <code>venues</code> list</p> <pre><code>places = ig.location.search(\"Eiffel Tower\", lat=48.858, lng=2.294)\n</code></pre>"},{"location":"authenticated/location/#get_nearbylat-lng","title":"get_nearby(lat, lng)","text":"<p>Get locations near given coordinates.</p> Param Type Required Description <code>lat</code> <code>float</code> \u2705 Latitude <code>lng</code> <code>float</code> \u2705 Longitude <p>Returns: <code>dict</code> \u2014 list of nearby places</p> <pre><code>nearby = ig.location.get_nearby(41.311, 69.279)  # Tashkent\nfor place in nearby.get(\"venues\", []):\n    print(f\"\ud83d\udccd {place['name']}\")\n</code></pre>"},{"location":"authenticated/login/","title":"Login &amp; Sessions","text":"<p>Authenticated requests require a valid Instagram session. InstaAPI provides multiple ways to manage sessions and handle login challenges.</p>"},{"location":"authenticated/login/#loading-from-env-recommended","title":"Loading from .env (Recommended)","text":"<p>The safest way is to extract cookies from a browser where you're already logged in. This avoids new login alerts and challenges.</p> <ol> <li>Open Instagram in your browser and log in</li> <li>Open DevTools (F12) \u2192 Application \u2192 Cookies</li> <li>Create a <code>.env</code> file:</li> </ol> <pre><code>SESSION_ID=your_sessionid_cookie\nCSRF_TOKEN=your_csrftoken_cookie\nDS_USER_ID=your_ds_user_id_cookie\n\n# Optional but recommended (increases stability)\nMID=your_mid_cookie\nIG_DID=your_ig_did_cookie\nDATR=your_datr_cookie\nUSER_AGENT=your_user_agent_string\n</code></pre> <pre><code>from instaapi import Instagram\n\n# Auto-loads from .env\nig = Instagram.from_env()\n</code></pre>"},{"location":"authenticated/login/#login-with-credentials","title":"Login with Credentials","text":"<pre><code>from instaapi import Instagram\nfrom instaapi.exceptions import ChallengeRequired, LoginRequired\n\nig = Instagram()\n\ntry:\n    ig.login(\"username\", \"password\")\n\n    # Save session for future use!\n    ig.save_session(\"session.json\")\n    print(\"Login successful!\")\n\nexcept ChallengeRequired as e:\n    print(f\"Action required! Visit: {e.challenge_url}\")\nexcept LoginRequired as e:\n    print(f\"Login failed: {e.message}\")\n</code></pre>"},{"location":"authenticated/login/#saving-and-loading-sessions","title":"Saving and Loading Sessions","text":"<p>Always save your session after logging in. Logging in repeatedly increases the chance of bans.</p> <pre><code># 1. First-time login\nig = Instagram()\nig.login(\"user\", \"pass\")\nig.save_session(\"my_session.json\")\n\n# 2. Next time: load saved session\nig = Instagram.from_session_file(\"my_session.json\")\n</code></pre>"},{"location":"authenticated/login/#session-expiration-and-auto-login","title":"Session Expiration and Auto-Login","text":"<p>Cookies expire. If a configured session is no longer valid, you'll receive a <code>LoginRequired</code> exception (HTTP 401 or 302 redirect to login screen).</p> <p>If you started with <code>from_session_file</code>, InstaAPI will attempt to transparently reload it or re-auth if possible (using the built-in <code>_build_refresh_callback</code>).</p>"},{"location":"authenticated/login/#challenge-handling","title":"Challenge Handling","text":"<p>When logging in from a new IP, Instagram often asks for email or SMS verification. InstaAPI includes the <code>ChallengeHandler</code> class to resolve these:</p> <pre><code>from instaapi import Instagram, ChallengeHandler\nfrom instaapi.exceptions import ChallengeRequired\n\nig = Instagram()\n\ntry:\n    ig.login(\"user\", \"pass\")\nexcept ChallengeRequired as e:\n    print(f\"Challenge URL: {e.challenge_url}\")\n    print(f\"Challenge type: {e.challenge_type}\")\n\n    # Use the ChallengeHandler to resolve\n    handler = ChallengeHandler(ig._client)\n    result = handler.resolve(e.response)\n    print(f\"Result: {result}\")\n</code></pre> <p>For headless auto-resolution using Gmail, see Challenge Resolver.</p>"},{"location":"authenticated/media/","title":"MediaAPI","text":"<p><code>ig.media</code> \u2014 Full media operations: get info, like, unlike, comment, save, get likers, manage comments.</p>"},{"location":"authenticated/media/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Get details\nmedia = ig.media.get_info(3124567890123)\nprint(f\"Likes: {media.like_count}, Comments: {media.comment_count}\")\n\n# Like a post\nig.media.like(media.pk)\n</code></pre>"},{"location":"authenticated/media/#retrieving-media","title":"Retrieving Media","text":""},{"location":"authenticated/media/#get_infomedia_id","title":"get_info(media_id)","text":"<p>Get basic media info (returns parsed <code>Media</code> model).</p> Param Type Required Description <code>media_id</code> <code>int\\|str</code> \u2705 Media PK (numeric) <p>Returns: <code>Media</code> model</p>"},{"location":"authenticated/media/#get_full_infomedia_id","title":"get_full_info(media_id)","text":"<p>Get full structured post info with additional fields (plays, views, shares, music, top likers).</p> <p>Returns: <code>dict</code></p>"},{"location":"authenticated/media/#get_info_v2media_id","title":"get_info_v2(media_id)","text":"<p>Most complete media info via REST v1 endpoint. Returns ALL available data including <code>has_liked</code>, <code>has_saved</code>, <code>comments_disabled</code>, coauthors, music, location.</p> <p>Returns: <code>dict</code></p>"},{"location":"authenticated/media/#get_info_v2_rawmedia_id","title":"get_info_v2_raw(media_id)","text":"<p>Raw API response from <code>/api/v1/media/{id}/info/</code> without parsing.</p> <p>Returns: <code>dict</code></p>"},{"location":"authenticated/media/#get_by_shortcodeshortcode","title":"get_by_shortcode(shortcode)","text":"<p>Get media by URL shortcode (e.g. <code>\"ABC123\"</code> from <code>instagram.com/p/ABC123/</code>).</p> Param Type Required Description <code>shortcode</code> <code>str</code> \u2705 URL shortcode <p>Returns: <code>Media</code> model</p> <pre><code>media = ig.media.get_by_shortcode(\"C-abcdefgh\")\n</code></pre>"},{"location":"authenticated/media/#get_by_url_v2url","title":"get_by_url_v2(url)","text":"<p>Get full media info from an Instagram URL.</p> Param Type Required Description <code>url</code> <code>str</code> \u2705 Instagram post/reel/tv URL <p>Returns: <code>dict</code> (same as <code>get_info_v2</code>)</p> <pre><code>info = ig.media.get_by_url_v2(\"https://www.instagram.com/p/ABC123/\")\n</code></pre>"},{"location":"authenticated/media/#interactions","title":"Interactions","text":""},{"location":"authenticated/media/#likemedia_id","title":"like(media_id)","text":"<p>Like a media item.</p> <p>Returns: API response <code>dict</code></p>"},{"location":"authenticated/media/#unlikemedia_id","title":"unlike(media_id)","text":"<p>Remove a like.</p>"},{"location":"authenticated/media/#savemedia_id","title":"save(media_id)","text":"<p>Save/bookmark media.</p>"},{"location":"authenticated/media/#unsavemedia_id","title":"unsave(media_id)","text":"<p>Remove from bookmarks.</p>"},{"location":"authenticated/media/#web_likemedia_id-web_unlikemedia_id","title":"web_like(media_id) / web_unlike(media_id)","text":"<p>Like/unlike via web endpoint (alternative method).</p>"},{"location":"authenticated/media/#web_savemedia_id-web_unsavemedia_id","title":"web_save(media_id) / web_unsave(media_id)","text":"<p>Save/unsave via web endpoint.</p>"},{"location":"authenticated/media/#comments","title":"Comments","text":""},{"location":"authenticated/media/#commentmedia_id-text","title":"comment(media_id, text)","text":"<p>Post a comment.</p> Param Type Required Description <code>media_id</code> <code>int\\|str</code> \u2705 Media PK <code>text</code> <code>str</code> \u2705 Comment content <p>Returns: <code>dict</code> with <code>id</code>, <code>from</code>, <code>text</code>, <code>created_time</code>, <code>status</code></p> <pre><code>result = ig.media.comment(3124567890123, \"Great photo! \ud83d\udd25\")\nprint(\"Comment ID:\", result[\"id\"])\n</code></pre>"},{"location":"authenticated/media/#web_commentmedia_id-text","title":"web_comment(media_id, text)","text":"<p>Post comment via web endpoint (alternative, uses jazoest token).</p>"},{"location":"authenticated/media/#reply_to_commentmedia_id-comment_id-text","title":"reply_to_comment(media_id, comment_id, text)","text":"<p>Reply to a specific comment.</p> Param Type Required Description <code>media_id</code> <code>int\\|str</code> \u2705 Media PK <code>comment_id</code> <code>int\\|str</code> \u2705 Parent comment PK <code>text</code> <code>str</code> \u2705 Reply text"},{"location":"authenticated/media/#delete_commentmedia_id-comment_id","title":"delete_comment(media_id, comment_id)","text":"<p>Delete a comment.</p>"},{"location":"authenticated/media/#like_commentcomment_id","title":"like_comment(comment_id)","text":"<p>Like a comment.</p>"},{"location":"authenticated/media/#unlike_commentcomment_id","title":"unlike_comment(comment_id)","text":"<p>Unlike a comment.</p>"},{"location":"authenticated/media/#pin_commentmedia_id-comment_id","title":"pin_comment(media_id, comment_id)","text":"<p>Pin a comment to the top.</p>"},{"location":"authenticated/media/#unpin_commentmedia_id-comment_id","title":"unpin_comment(media_id, comment_id)","text":"<p>Unpin a comment.</p>"},{"location":"authenticated/media/#get_commentsmedia_id-can_support_threadingtrue-min_idnone","title":"get_comments(media_id, can_support_threading=True, min_id=None)","text":"<p>Get post comments (raw API response with threading support).</p> Param Type Required Default Description <code>media_id</code> <code>int\\|str</code> \u2705 \u2014 Media PK <code>can_support_threading</code> <code>bool</code> \u274c <code>True</code> Include threaded replies <code>min_id</code> <code>str</code> \u274c <code>None</code> Pagination cursor <p>Returns: <code>dict</code></p>"},{"location":"authenticated/media/#get_comments_parsedmedia_id-min_idnone","title":"get_comments_parsed(media_id, min_id=None)","text":"<p>Get structured comments with <code>Comment</code> models.</p> <p>Returns: <code>dict</code> with <code>total_count</code>, <code>comments</code> (list of <code>Comment</code> models), <code>has_more</code>, <code>next_cursor</code></p>"},{"location":"authenticated/media/#get_all_commentsmedia_id-max_pages10-parsedfalse","title":"get_all_comments(media_id, max_pages=10, parsed=False)","text":"<p>Get all comments with automatic pagination.</p> Param Type Required Default Description <code>media_id</code> <code>int\\|str</code> \u2705 \u2014 Media PK <code>max_pages</code> <code>int</code> \u274c 10 Maximum pages to fetch <code>parsed</code> <code>bool</code> \u274c <code>False</code> Return <code>Comment</code> models if True <p>Returns: <code>list</code> \u2014 all comments</p>"},{"location":"authenticated/media/#get_comment_repliesmedia_id-comment_id-min_idnone","title":"get_comment_replies(media_id, comment_id, min_id=None)","text":"<p>Get replies to a specific comment.</p>"},{"location":"authenticated/media/#likers","title":"Likers","text":""},{"location":"authenticated/media/#get_likersmedia_id","title":"get_likers(media_id)","text":"<p>Get users who liked a post.</p> <p>Returns: <code>list[UserShort]</code></p> <pre><code>likers = ig.media.get_likers(3124567890123)\nfor u in likers:\n    print(f\"@{u.username}\")\n</code></pre>"},{"location":"authenticated/media/#post-management","title":"Post Management","text":""},{"location":"authenticated/media/#edit_captionmedia_id-caption","title":"edit_caption(media_id, caption)","text":"<p>Edit a post's caption.</p>"},{"location":"authenticated/media/#disable_commentsmedia_id-enable_commentsmedia_id","title":"disable_comments(media_id) / enable_comments(media_id)","text":"<p>Toggle comments on a post.</p>"},{"location":"authenticated/media/#reportmedia_id-reason1","title":"report(media_id, reason=1)","text":"<p>Report a post (1=spam, 2=inappropriate).</p>"},{"location":"authenticated/media/#models","title":"Models","text":""},{"location":"authenticated/media/#media-model-reference","title":"Media Model Reference","text":"Field Type Description <code>pk</code> <code>int</code> Media PK <code>shortcode</code> <code>str</code> Post shortcode <code>media_type</code> <code>int</code> 1=Photo, 2=Video, 8=Carousel <code>like_count</code> <code>int</code> Likes <code>comment_count</code> <code>int</code> Comments <code>caption</code> <code>Caption</code> Caption object containing <code>.text</code> <code>taken_at</code> <code>datetime</code> Post datetime <code>image_versions</code> <code>list</code> Image resolution candidates <code>video_url</code> <code>str</code> URL to video mp4 <code>carousel_media</code> <code>list</code> Child models if sidecar (carousel) <code>usertags</code> <code>list</code> Tagged users <code>location</code> <code>Location</code> Geotag"},{"location":"authenticated/notifications/","title":"NotificationsAPI","text":"<p><code>ig.notifications</code> \u2014 Activity feed, notification inbox, follow/like alerts, notification counters.</p>"},{"location":"authenticated/notifications/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Parsed inbox\ninbox = ig.notifications.get_inbox_parsed()\nprint(f\"Unread: {inbox.counts.total}\")\n\nfor n in inbox.follows:\n    print(f\"\ud83d\udc64 {n.follower_username} followed you ({n.time_ago})\")\n\nfor n in inbox.likes:\n    print(f\"\u2764\ufe0f {n.profile_name} liked \u2014 {n.media_shortcode}\")\n</code></pre>"},{"location":"authenticated/notifications/#raw-methods","title":"Raw Methods","text":""},{"location":"authenticated/notifications/#get_activity","title":"get_activity()","text":"<p>Get full notifications inbox (raw API response).</p> <p>Returns: <code>dict</code> with <code>counts</code>, <code>new_stories</code>, <code>old_stories</code>, <code>continuation_token</code></p>"},{"location":"authenticated/notifications/#get_activity_counts","title":"get_activity_counts()","text":"<p>Get only notification counters.</p> <p>Returns: <code>dict</code> \u2014 <code>likes</code>, <code>comments</code>, <code>relationships</code>, etc.</p>"},{"location":"authenticated/notifications/#get_new_notifications","title":"get_new_notifications()","text":"<p>Get unread notifications (raw dict list).</p> <p>Returns: <code>list[dict]</code></p>"},{"location":"authenticated/notifications/#get_all_notifications","title":"get_all_notifications()","text":"<p>Get all notifications (raw, new + old combined).</p> <p>Returns: <code>list[dict]</code></p>"},{"location":"authenticated/notifications/#mark_inbox_seen","title":"mark_inbox_seen()","text":"<p>Mark all notifications as read.</p> <p>Returns: <code>dict</code> with <code>status: \"ok\"</code></p>"},{"location":"authenticated/notifications/#get_timeline","title":"get_timeline()","text":"<p>Get main feed timeline.</p> <p>Returns: <code>dict</code></p>"},{"location":"authenticated/notifications/#parsed-methods-pydantic-models","title":"Parsed Methods (Pydantic Models)","text":""},{"location":"authenticated/notifications/#get_inbox_parsed","title":"get_inbox_parsed()","text":"<p>Get full inbox with all notifications parsed into Pydantic models.</p> <p>Returns: <code>NotifInbox</code> with:</p> Field Type Description <code>counts</code> <code>NotifCounts</code> Category counters <code>new_notifications</code> <code>list[Notification]</code> Unread items <code>old_notifications</code> <code>list[Notification]</code> Read items <code>all_notifications</code> <code>list[Notification]</code> Combined <code>follows</code> <code>list[Notification]</code> Follow-only <code>likes</code> <code>list[Notification]</code> Like-only <pre><code>inbox = ig.notifications.get_inbox_parsed()\nprint(f\"Total unread: {inbox.counts.total}\")\nprint(f\"New followers: {len(inbox.follows)}\")\nprint(f\"New likes: {len(inbox.likes)}\")\n</code></pre>"},{"location":"authenticated/notifications/#get_counts_parsed","title":"get_counts_parsed()","text":"<p>Get notification counters as a Pydantic model.</p> <p>Returns: <code>NotifCounts</code></p> Field Type Description <code>likes</code> <code>int</code> Like notifications <code>comments</code> <code>int</code> Comment notifications <code>relationships</code> <code>int</code> Follow notifications <code>total</code> <code>int</code> Grand total <pre><code>counts = ig.notifications.get_counts_parsed()\nprint(f\"Likes: {counts.likes}\")\nprint(f\"Followers: {counts.relationships}\")\nprint(f\"Total: {counts.total}\")\n</code></pre>"},{"location":"authenticated/notifications/#get_all_parsed","title":"get_all_parsed()","text":"<p>All notifications as parsed list.</p> <p>Returns: <code>list[Notification]</code></p> <pre><code>for n in ig.notifications.get_all_parsed():\n    print(f\"[{n.notif_name}] {n.text} ({n.time_ago})\")\n</code></pre>"},{"location":"authenticated/notifications/#get_new_parsed","title":"get_new_parsed()","text":"<p>Only unread notifications (parsed).</p> <p>Returns: <code>list[Notification]</code></p>"},{"location":"authenticated/notifications/#get_follow_notifications","title":"get_follow_notifications()","text":"<p>Only follow notifications (parsed) with rich user info.</p> <p>Returns: <code>list[Notification]</code> \u2014 each has:</p> Field Type Description <code>follower_username</code> <code>str</code> Who followed <code>follower_info</code> <code>NotifUserInfo</code> Full user info (avatar, verified, private) <code>is_following_back</code> <code>bool</code> Mutual follow status <code>time_ago</code> <code>str</code> Relative time <pre><code>for n in ig.notifications.get_follow_notifications():\n    user = n.follower_info\n    print(f\"@{user.username} ({user.full_name})\")\n    print(f\"  Verified: {user.is_verified} | Private: {user.is_private}\")\n    print(f\"  Following back: {n.is_following_back}\")\n</code></pre>"},{"location":"authenticated/notifications/#get_like_notifications","title":"get_like_notifications()","text":"<p>Only like notifications (parsed).</p> <p>Returns: <code>list[Notification]</code> \u2014 each has:</p> Field Type Description <code>profile_name</code> <code>str</code> Who liked <code>media_shortcode</code> <code>str</code> Which post <code>media_image</code> <code>str</code> Post preview URL <code>text</code> <code>str</code> Notification text"},{"location":"authenticated/search/","title":"SearchAPI","text":"<p><code>ig.search</code> \u2014 Search users, hashtags, places, and explore Instagram content.</p>"},{"location":"authenticated/search/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Unified search (users + hashtags + places)\nresults = ig.search.top_search(\"fashion\")\nfor user in results.get(\"users\", []):\n    print(f\"@{user.get('username')}\")\n</code></pre>"},{"location":"authenticated/search/#methods","title":"Methods","text":""},{"location":"authenticated/search/#top_searchquery-contextblended","title":"top_search(query, context=\"blended\")","text":"<p>Unified search across users, hashtags, and places.</p> Param Type Required Default Description <code>query</code> <code>str</code> \u2705 \u2014 Search query <code>context</code> <code>str</code> \u274c <code>\"blended\"</code> <code>\"blended\"</code>, <code>\"user\"</code>, <code>\"hashtag\"</code>, <code>\"place\"</code> <p>Returns: <code>dict</code> with <code>users</code>, <code>hashtags</code>, <code>places</code> lists</p>"},{"location":"authenticated/search/#search_usersquery","title":"search_users(query)","text":"<p>Search users only (returns parsed <code>UserShort</code> models).</p> Param Type Required Description <code>query</code> <code>str</code> \u2705 Username or name <p>Returns: <code>list[UserShort]</code></p> <pre><code>users = ig.search.search_users(\"crist\")\nfor u in users:\n    print(f\"@{u.username} \u2014 {u.full_name}\")\n</code></pre>"},{"location":"authenticated/search/#search_hashtagsquery","title":"search_hashtags(query)","text":"<p>Search hashtags.</p> Param Type Required Description <code>query</code> <code>str</code> \u2705 Hashtag name (without #) <p>Returns: <code>list[dict]</code> \u2014 matching hashtags with media counts</p>"},{"location":"authenticated/search/#search_placesquery-latnone-lngnone","title":"search_places(query, lat=None, lng=None)","text":"<p>Search locations/places.</p> Param Type Required Description <code>query</code> <code>str</code> \u2705 Place name <code>lat</code> <code>float</code> \u274c Latitude hint <code>lng</code> <code>float</code> \u274c Longitude hint <p>Returns: <code>dict</code> with venues list</p>"},{"location":"authenticated/search/#hashtag_searchhashtag-max_pages1-next_max_idnone-rank_tokennone-delay20","title":"hashtag_search(hashtag, max_pages=1, next_max_id=None, rank_token=None, delay=2.0)","text":"<p>Search posts by hashtag with full pagination support. Returns structured results with parsed <code>Media</code> and <code>UserShort</code> models.</p> Param Type Required Default Description <code>hashtag</code> <code>str</code> \u2705 \u2014 Hashtag name <code>max_pages</code> <code>int</code> \u274c 1 Pages to fetch <code>next_max_id</code> <code>str</code> \u274c <code>None</code> Continue from cursor <code>rank_token</code> <code>str</code> \u274c <code>None</code> From previous result <code>delay</code> <code>float</code> \u274c 2.0 Seconds between pages <p>Returns: <code>HashtagSearchResult</code> with <code>posts</code>, <code>users</code>, <code>has_more</code>, <code>next_max_id</code>, <code>rank_token</code></p> <pre><code>result = ig.search.hashtag_search(\"#fashion\", max_pages=3)\nfor post in result.posts:\n    print(f\"@{post.user.username}: {post.like_count} likes\")\n\n# Continue pagination\nif result.has_more:\n    more = ig.search.hashtag_search(\n        \"#fashion\",\n        next_max_id=result.next_max_id,\n        rank_token=result.rank_token,\n    )\n</code></pre>"},{"location":"authenticated/search/#web_searchquery-enable_metadatatrue","title":"web_search(query, enable_metadata=True)","text":"<p>Raw web SERP search via <code>/fbsearch/web/top_serp/</code>.</p> <p>Returns: <code>dict</code> \u2014 raw API response</p>"},{"location":"authenticated/search/#web_search_postshashtag","title":"web_search_posts(hashtag)","text":"<p>Get top posts by hashtag (parsed flat dicts).</p> <p>Returns: <code>list[dict]</code></p>"},{"location":"authenticated/search/#explore","title":"explore()","text":"<p>Get explore page content.</p> <p>Returns: <code>dict</code> \u2014 explore posts and clusters</p> <pre><code>explore = ig.search.explore()\n</code></pre>"},{"location":"authenticated/stories/","title":"StoriesAPI","text":"<p><code>ig.stories</code> \u2014 View, interact, and manage Instagram Stories and Highlights.</p>"},{"location":"authenticated/stories/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Story tray (who has stories)\ntray = ig.stories.get_tray_parsed()\nfor user in tray:\n    print(f\"@{user['username']} \u2014 {user['stories_count']} stories\")\n\n# Get user's stories (parsed)\nstories = ig.stories.get_stories_parsed(173560420)\nfor item in stories[\"items\"]:\n    print(f\"[{item['type']}] {item['taken_at']}\")\n</code></pre>"},{"location":"authenticated/stories/#viewing-stories","title":"Viewing Stories","text":""},{"location":"authenticated/stories/#get_reels_tray","title":"get_reels_tray()","text":"<p>Get the story ring \u2014 list of users who currently have active stories.</p> <p>Returns: <code>dict</code> with <code>tray</code> list and <code>story_ranking_token</code></p>"},{"location":"authenticated/stories/#get_tray_parsed","title":"get_tray_parsed()","text":"<p>Get story tray in structured format showing who has stories and how many.</p> <p>Returns: <code>list[dict]</code> \u2014 each has <code>username</code>, <code>pk</code>, <code>full_name</code>, <code>is_verified</code>, <code>stories_count</code>, <code>has_besties_media</code>, <code>latest_reel_media</code></p> <pre><code>tray = ig.stories.get_tray_parsed()\nfor user in tray:\n    print(f\"@{user['username']} has {user['stories_count']} stories\")\n</code></pre>"},{"location":"authenticated/stories/#get_user_storiesuser_id","title":"get_user_stories(user_id)","text":"<p>Get all current stories for a specific user (raw API response).</p> Param Type Required Description <code>user_id</code> <code>int\\|str</code> \u2705 User PK <p>Returns: <code>dict</code> with <code>reel</code> containing <code>user</code> and <code>items</code> list</p>"},{"location":"authenticated/stories/#get_stories_parseduser_id","title":"get_stories_parsed(user_id)","text":"<p>Get user stories fully parsed \u2014 stickers, tags, locations, hashtags, music all extracted.</p> Param Type Required Description <code>user_id</code> <code>int\\|str</code> \u2705 User PK <p>Returns: <code>dict</code> with:</p> Field Type Description <code>user</code> <code>dict</code> <code>username</code>, <code>pk</code>, <code>full_name</code>, <code>is_verified</code> <code>items</code> <code>list</code> Each item has: <code>pk</code>, <code>type</code> (photo/video), <code>taken_at</code>, <code>expiring_at</code>, <code>url</code>, <code>video_url</code>, <code>mentions</code>, <code>hashtags</code>, <code>locations</code>, <code>links</code>, <code>polls</code>, <code>questions</code>, <code>quizzes</code>, <code>sliders</code>, <code>countdowns</code>, <code>music</code>, <code>repost</code>, <code>viewer_count</code> <pre><code>stories = ig.stories.get_stories_parsed(173560420)\nfor item in stories[\"items\"]:\n    if item[\"mentions\"]:\n        print(f\"Mentions: {item['mentions']}\")\n    if item[\"music\"]:\n        print(f\"Music: {item['music']['title']} by {item['music']['artist']}\")\n</code></pre>"},{"location":"authenticated/stories/#story-interactions","title":"Story Interactions","text":""},{"location":"authenticated/stories/#mark_seenitems","title":"mark_seen(items)","text":"<p>Mark stories as viewed.</p> Param Type Required Description <code>items</code> <code>list[dict]</code> \u2705 Each: <code>{\"media_id\", \"taken_at\", \"user_id\"}</code>"},{"location":"authenticated/stories/#get_viewersstory_id","title":"get_viewers(story_id)","text":"<p>Get list of who viewed your story.</p> Param Type Required Description <code>story_id</code> <code>int\\|str</code> \u2705 Story media PK <p>Returns: <code>list</code> \u2014 viewer users</p>"},{"location":"authenticated/stories/#vote_pollstory_id-poll_id-vote0","title":"vote_poll(story_id, poll_id, vote=0)","text":"<p>Vote on a poll sticker.</p> Param Type Required Default Description <code>story_id</code> <code>int\\|str</code> \u2705 \u2014 Story PK <code>poll_id</code> <code>int\\|str</code> \u2705 \u2014 Poll sticker ID <code>vote</code> <code>int</code> \u274c 0 0 or 1"},{"location":"authenticated/stories/#answer_questionstory_id-question_id-answer","title":"answer_question(story_id, question_id, answer)","text":"<p>Reply to a question sticker.</p> Param Type Required Description <code>story_id</code> <code>int\\|str</code> \u2705 Story PK <code>question_id</code> <code>int\\|str</code> \u2705 Question sticker ID <code>answer</code> <code>str</code> \u2705 Reply text"},{"location":"authenticated/stories/#vote_sliderstory_id-slider_id-vote","title":"vote_slider(story_id, slider_id, vote)","text":"<p>Vote on an emoji slider sticker.</p> Param Type Required Description <code>story_id</code> <code>int\\|str</code> \u2705 Story PK <code>slider_id</code> <code>int\\|str</code> \u2705 Slider sticker ID <code>vote</code> <code>float</code> \u2705 Value between 0.0 and 1.0"},{"location":"authenticated/stories/#answer_quizstory_id-quiz_id-answer","title":"answer_quiz(story_id, quiz_id, answer)","text":"<p>Answer a quiz sticker.</p> Param Type Required Description <code>story_id</code> <code>int\\|str</code> \u2705 Story PK <code>quiz_id</code> <code>int\\|str</code> \u2705 Quiz sticker ID <code>answer</code> <code>int</code> \u2705 Answer index (0, 1, 2, ...)"},{"location":"authenticated/stories/#highlights","title":"Highlights","text":""},{"location":"authenticated/stories/#get_highlights_trayuser_id","title":"get_highlights_tray(user_id)","text":"<p>Get raw highlight tray for a user.</p> <p>Returns: <code>dict</code> with <code>tray</code> list (id, title, media_count, cover_media)</p>"},{"location":"authenticated/stories/#get_highlights_parseduser_id","title":"get_highlights_parsed(user_id)","text":"<p>Get structured highlights list.</p> <p>Returns: <code>list[dict]</code> \u2014 each has <code>id</code>, <code>title</code>, <code>media_count</code>, <code>cover_url</code>, <code>created_at</code>, <code>updated_at</code>, <code>is_pinned</code></p> <pre><code>highlights = ig.stories.get_highlights_parsed(173560420)\nfor h in highlights:\n    print(f\"\ud83d\udccc {h['title']} ({h['media_count']} items)\")\n</code></pre>"},{"location":"authenticated/stories/#get_highlight_itemshighlight_id","title":"get_highlight_items(highlight_id)","text":"<p>Get all items inside a specific highlight.</p> Param Type Required Description <code>highlight_id</code> <code>str</code> \u2705 e.g. <code>\"highlight:17889448593291353\"</code> <p>Returns: <code>dict</code> \u2014 reel data with items</p>"},{"location":"authenticated/upload/","title":"UploadAPI","text":"<p><code>ig.upload</code> \u2014 Upload photos, videos, stories, reels, and carousels to Instagram.</p>"},{"location":"authenticated/upload/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Upload a photo post\nresult = ig.upload.post_photo(\n    image_path=\"photo.jpg\",\n    caption=\"Beautiful day! \u2600\ufe0f #nature\",\n)\nprint(f\"Posted! Media PK: {result['media']['pk']}\")\n</code></pre>"},{"location":"authenticated/upload/#photo-posts","title":"Photo Posts","text":""},{"location":"authenticated/upload/#post_photoimage_pathnone-image_datanone-caption-locationnone-usertagsnone-disable_commentsfalse","title":"post_photo(image_path=None, image_data=None, caption=\"\", location=None, usertags=None, disable_comments=False)","text":"<p>Upload a photo as a feed post.</p> Param Type Required Default Description <code>image_path</code> <code>str</code> \u274c <code>None</code> Path to JPEG/PNG file <code>image_data</code> <code>bytes</code> \u274c <code>None</code> Raw image bytes (instead of path) <code>caption</code> <code>str</code> \u274c <code>\"\"</code> Post caption (supports hashtags, mentions) <code>location</code> <code>dict</code> \u274c <code>None</code> <code>{\"pk\": ..., \"name\": ..., \"lat\": ..., \"lng\": ...}</code> <code>usertags</code> <code>list[dict]</code> \u274c <code>None</code> Tag users in photo <code>disable_comments</code> <code>bool</code> \u274c <code>False</code> Disable comments <p>Note</p> <p>Either <code>image_path</code> or <code>image_data</code> must be provided.</p> <pre><code>result = ig.upload.post_photo(\n    image_path=\"sunset.jpg\",\n    caption=\"Golden hour \ud83c\udf05 #photography\",\n    location={\"pk\": 213385402, \"name\": \"New York\"},\n)\n</code></pre>"},{"location":"authenticated/upload/#video-posts","title":"Video Posts","text":""},{"location":"authenticated/upload/#post_videovideo_pathnone-video_datanone-thumbnail_pathnone-thumbnail_datanone-caption-duration0-width1080-height1920-locationnone-disable_commentsfalse","title":"post_video(video_path=None, video_data=None, thumbnail_path=None, thumbnail_data=None, caption=\"\", duration=0, width=1080, height=1920, location=None, disable_comments=False)","text":"<p>Upload a video as a feed post.</p> Param Type Required Default Description <code>video_path</code> <code>str</code> \u274c <code>None</code> Path to MP4 file <code>video_data</code> <code>bytes</code> \u274c <code>None</code> Raw video bytes <code>thumbnail_path</code> <code>str</code> \u274c <code>None</code> Cover image path <code>thumbnail_data</code> <code>bytes</code> \u274c <code>None</code> Cover image bytes <code>caption</code> <code>str</code> \u274c <code>\"\"</code> Post caption <code>duration</code> <code>float</code> \u274c 0 Video duration in seconds <code>width</code> <code>int</code> \u274c 1080 Video width <code>height</code> <code>int</code> \u274c 1920 Video height"},{"location":"authenticated/upload/#reels","title":"Reels","text":""},{"location":"authenticated/upload/#post_reelvideo_pathnone-video_datanone-thumbnail_pathnone-thumbnail_datanone-caption-duration0-width1080-height1920","title":"post_reel(video_path=None, video_data=None, thumbnail_path=None, thumbnail_data=None, caption=\"\", duration=0, width=1080, height=1920)","text":"<p>Upload a Reel (Clips).</p> <pre><code>result = ig.upload.post_reel(\n    video_path=\"my_reel.mp4\",\n    caption=\"Check it out! \ud83c\udfac #reels\",\n    duration=15.0,\n)\n</code></pre>"},{"location":"authenticated/upload/#carousel-album","title":"Carousel / Album","text":""},{"location":"authenticated/upload/#post_carouselimagesnone-caption-locationnone-usertagsnone-disable_commentsfalse","title":"post_carousel(images=None, caption=\"\", location=None, usertags=None, disable_comments=False)","text":"<p>Upload a multi-image carousel post (2-10 images).</p> Param Type Required Default Description <code>images</code> <code>list[str\\|bytes]</code> \u2705 \u2014 2-10 file paths or bytes <code>caption</code> <code>str</code> \u274c <code>\"\"</code> Post caption <code>location</code> <code>dict</code> \u274c <code>None</code> Location tag <code>usertags</code> <code>list[dict]</code> \u274c <code>None</code> Tag users <code>disable_comments</code> <code>bool</code> \u274c <code>False</code> Disable comments <pre><code>result = ig.upload.post_carousel(\n    images=[\"photo1.jpg\", \"photo2.jpg\", \"photo3.jpg\"],\n    caption=\"Album vibes \ud83d\udcf8\",\n)\n</code></pre>"},{"location":"authenticated/upload/#stories","title":"Stories","text":""},{"location":"authenticated/upload/#post_story_photoimage_pathnone-image_datanone","title":"post_story_photo(image_path=None, image_data=None)","text":"<p>Upload a photo story.</p> <p>Returns: <code>dict</code> with <code>media</code> containing <code>pk</code></p>"},{"location":"authenticated/upload/#post_story_videovideo_pathnone-video_datanone-duration0","title":"post_story_video(video_path=None, video_data=None, duration=0)","text":"<p>Upload a video story (max 15 seconds).</p> <p>Returns: <code>dict</code> with <code>media</code> containing <code>pk</code></p>"},{"location":"authenticated/upload/#delete","title":"Delete","text":""},{"location":"authenticated/upload/#delete_mediamedia_id-media_type1","title":"delete_media(media_id, media_type=1)","text":"<p>Delete a post.</p> Param Type Required Default Description <code>media_id</code> <code>int\\|str</code> \u2705 \u2014 Media PK <code>media_type</code> <code>int</code> \u274c 1 1=photo, 2=video, 8=carousel <p>Returns: <code>dict</code> with <code>status</code> and <code>did_delete</code></p> <pre><code>ig.upload.delete_media(3124567890123)\n</code></pre>"},{"location":"authenticated/users/","title":"UsersAPI","text":"<p><code>ig.users</code> \u2014 Retrieve and manage Instagram user profiles.</p>"},{"location":"authenticated/users/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Get profile\nuser = ig.users.get_by_username(\"nike\")\nprint(f\"{user.full_name} has {user.followers:,} followers.\")\n\n# Full profile with contact + bio parsing\nfull = ig.users.get_full_profile(\"nike\")\n</code></pre>"},{"location":"authenticated/users/#methods","title":"Methods","text":""},{"location":"authenticated/users/#get_by_usernameusername","title":"get_by_username(username)","text":"<p>Get full user profile by username.</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Instagram username (without @) <p>Returns: <code>User</code> model</p> <pre><code>user = ig.users.get_by_username(\"cristiano\")\nif user:\n    print(user.pk, user.username, user.followers)\n</code></pre>"},{"location":"authenticated/users/#get_by_iduser_id","title":"get_by_id(user_id)","text":"<p>Get full user profile by unique ID (PK) via GraphQL.</p> Param Type Required Description <code>user_id</code> <code>int\\|str</code> \u2705 User PK <p>Returns: <code>User</code> model</p> <pre><code>user = ig.users.get_by_id(173560420)\n</code></pre>"},{"location":"authenticated/users/#get_user_idusername","title":"get_user_id(username)","text":"<p>Get user_id (PK) by username \u2014 shortcut method.</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Instagram username <p>Returns: <code>int</code></p> <pre><code>pk = ig.users.get_user_id(\"cristiano\")\n# 173560420\n</code></pre>"},{"location":"authenticated/users/#searchquery","title":"search(query)","text":"<p>Search for users. If the query looks like a username, it does a direct lookup; otherwise falls back to <code>/web/search/topsearch/</code>.</p> Param Type Required Description <code>query</code> <code>str</code> \u2705 Username or name <p>Returns: <code>list[UserShort]</code></p> <pre><code>results = ig.users.search(\"cristiano\")\nfor u in results:\n    print(f\"@{u.username} \u2014 {u.full_name}\")\n</code></pre>"},{"location":"authenticated/users/#parse_biouser_data","title":"parse_bio(user_data)","text":"<p>Parse mentions (<code>@user</code>), hashtags (<code>#tag</code>), and entities from a bio string.</p> Param Type Required Description <code>user_data</code> <code>dict\\|User</code> \u2705 Result from <code>get_by_username()</code> or raw dict <p>Returns: <code>BioParsed</code> model</p> <pre><code>user = ig.users.get_by_username(\"nike\")\nbio = ig.users.parse_bio(user)\nprint(\"Mentions:\", bio.mentions)\nprint(\"Hashtags:\", bio.hashtags)\nprint(\"Emails:\", bio.emails)\nprint(\"Phones:\", bio.phones)\n</code></pre>"},{"location":"authenticated/users/#get_full_profileusername","title":"get_full_profile(username)","text":"<p>Gather ALL profile data in one call. Combines <code>web_profile_info</code> + <code>user_info</code> + bio parsing.</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Instagram username <p>Returns: <code>User</code> model (with full contact, bio counters, etc.)</p> <pre><code>user = ig.users.get_full_profile(\"nasa\")\nprint(user.biography)\nif user.contact.public_email:\n    print(\"Email:\", user.contact.public_email)\nif user.contact.contact_phone_number:\n    print(\"Phone:\", user.contact.contact_phone_number)\n</code></pre>"},{"location":"authenticated/users/#models","title":"Models","text":""},{"location":"authenticated/users/#user-model-reference","title":"User Model Reference","text":"Field Type Description <code>pk</code> <code>int</code> Unique User ID <code>username</code> <code>str</code> Handle <code>full_name</code> <code>str</code> Display Name <code>is_private</code> <code>bool</code> Private account <code>is_verified</code> <code>bool</code> Verified badge <code>profile_pic_url</code> <code>str</code> Normal avatar <code>profile_pic_url_hd</code> <code>str</code> HD avatar <code>followers</code> <code>int</code> Follower count <code>following</code> <code>int</code> Following count <code>posts_count</code> <code>int</code> Media count <code>biography</code> <code>str</code> Bio text <code>bio_links</code> <code>list</code> URLs in bio <code>external_url</code> <code>str</code> Legacy website field <code>is_business</code> <code>bool</code> Business/creator account <code>category</code> <code>str</code> Business category <code>contact</code> <code>Contact</code> Contact object (email/phone)"},{"location":"authenticated/users/#bioparsed-model","title":"BioParsed Model","text":"Field Type Description <code>mentions</code> <code>list[str]</code> @username mentions <code>hashtags</code> <code>list[str]</code> #tag references <code>emails</code> <code>list[str]</code> Extracted emails <code>phones</code> <code>list[str]</code> Extracted phone numbers <code>urls</code> <code>list[str]</code> Extracted URLs"},{"location":"core/anti-detection/","title":"Anti-Detection System","text":"<p>InstaAPI uses <code>curl_cffi</code> to impersonate real browsers at the TLS level \u2014 making requests indistinguishable from genuine browser traffic.</p>"},{"location":"core/anti-detection/#how-it-works","title":"How It Works","text":"<pre><code>graph LR\n    A[\"Your Code\"] --&gt; B[\"AntiDetect\"]\n    B --&gt; C[\"TLS Fingerprint\"]\n    B --&gt; D[\"Browser Headers\"]\n    B --&gt; E[\"Device Identity\"]\n    C --&gt; F[\"curl_cffi\"]\n    D --&gt; F\n    E --&gt; F\n    F --&gt; G[\"Instagram\"]</code></pre>"},{"location":"core/anti-detection/#tls-fingerprint-rotation","title":"TLS Fingerprint Rotation","text":"<p>Every request uses a different browser identity:</p> <pre><code># Automatic \u2014 no config needed\nig = Instagram.anonymous()\nprofile = ig.public.get_profile(\"nike\")\n# Request 1: Chrome 142 on macOS\n# Request 2: Safari 17 on iPhone\n# Request 3: Edge 131 on Windows\n</code></pre>"},{"location":"core/anti-detection/#supported-browsers","title":"Supported Browsers","text":"Browser Versions Chrome 99, 100, 101, ..., 142 Safari 15.3, 15.5, 16.0, 17.0 Edge 99, 101, 131 Firefox 102, 110"},{"location":"core/anti-detection/#header-randomization","title":"Header Randomization","text":"<p>Each request gets unique, browser-accurate headers:</p> Header Behavior <code>User-Agent</code> Matches TLS fingerprint browser <code>Accept-Language</code> Random from common locales <code>Sec-Ch-Ua</code> Matches browser version <code>Sec-Fetch-*</code> Correct for request type <code>X-IG-App-ID</code> Instagram web app ID <code>X-IG-WWW-Claim</code> Session claim token"},{"location":"core/anti-detection/#per-request-identity","title":"Per-Request Identity","text":"<pre><code># Each request = new identity\n# Request 1:\n#   TLS: Chrome 142\n#   UA: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Chrome/142.0\n#   Proxy: proxy1.com\n\n# Request 2:\n#   TLS: Safari 17\n#   UA: Mozilla/5.0 (iPhone; CPU iPhone OS 17_0) Safari/605.1\n#   Proxy: proxy2.com\n</code></pre>"},{"location":"core/anti-detection/#device-fingerprint","title":"Device Fingerprint","text":"<p>For mobile API requests, InstaAPI generates realistic device fingerprints:</p> <pre><code>from instaapi.device_fingerprint import DeviceFingerprint\n\ndf = DeviceFingerprint()\ndevice = df.generate()\n# {\n#     \"device_model\": \"SM-G998B\",\n#     \"android_version\": \"13\",\n#     \"android_release\": \"33\",\n#     \"manufacturer\": \"Samsung\",\n#     \"device_dpi\": \"640dpi\",\n#     \"resolution\": \"1440x3200\",\n#     \"app_version\": \"302.1.0.36.111\",\n#     \"version_code\": \"559928404\",\n# }\n</code></pre>"},{"location":"core/anti-detection/#401403-auto-retry","title":"401/403 Auto-Retry","text":"<p>When Instagram returns 401 or 403:</p> <ol> <li>Rotate proxy \u2014 switch to next working proxy</li> <li>New TLS fingerprint \u2014 different browser identity</li> <li>New headers \u2014 fresh User-Agent, Accept-Language</li> <li>Retry request \u2014 with completely new identity</li> </ol> <pre><code># Automatic \u2014 no config needed\nig = Instagram.anonymous()\n# If request fails with 401/403:\n#   \u2192 Auto rotate proxy\n#   \u2192 Auto change browser fingerprint\n#   \u2192 Auto retry (up to 3 times)\n</code></pre>"},{"location":"core/architecture/","title":"Architecture","text":"<p>InstaAPI is built with a modular, layered architecture.</p>"},{"location":"core/architecture/#system-overview","title":"System Overview","text":"<pre><code>graph TB\n    subgraph \"User Layer\"\n        IG[\"Instagram / AsyncInstagram\"]\n    end\n\n    subgraph \"API Layer\"\n        PUB[\"PublicAPI\"]\n        USR[\"UsersAPI\"]\n        MED[\"MediaAPI\"]\n        FD[\"FeedAPI\"]\n        ST[\"StoriesAPI\"]\n        DR[\"DirectAPI\"]\n        UP[\"UploadAPI\"]\n        MORE[\"...17 more\"]\n    end\n\n    subgraph \"Core Layer\"\n        ANON[\"AnonClient\"]\n        HTTP[\"HttpClient\"]\n        SM[\"SessionManager\"]\n        RL[\"RateLimiter\"]\n    end\n\n    subgraph \"Infrastructure\"\n        AD[\"AntiDetect\"]\n        PM[\"ProxyManager\"]\n        PH[\"ProxyHealth\"]\n        DF[\"DeviceFingerprint\"]\n        CH[\"ChallengeHandler\"]\n    end\n\n    subgraph \"Transport\"\n        CF[\"curl_cffi\"]\n    end\n\n    IG --&gt; PUB\n    IG --&gt; USR\n    IG --&gt; MED\n    IG --&gt; FD\n    IG --&gt; ST\n    IG --&gt; DR\n    IG --&gt; UP\n    IG --&gt; MORE\n\n    PUB --&gt; ANON\n    USR --&gt; HTTP\n    MED --&gt; HTTP\n    FD --&gt; HTTP\n    ST --&gt; HTTP\n    DR --&gt; HTTP\n    UP --&gt; HTTP\n\n    ANON --&gt; AD\n    ANON --&gt; PM\n    HTTP --&gt; SM\n    HTTP --&gt; RL\n    HTTP --&gt; AD\n    HTTP --&gt; PM\n    HTTP --&gt; CH\n\n    AD --&gt; DF\n    PM --&gt; PH\n\n    ANON --&gt; CF\n    HTTP --&gt; CF</code></pre>"},{"location":"core/architecture/#module-map","title":"Module Map","text":"Module File Purpose Instagram <code>instagram.py</code> Main sync class \u2014 unifies all APIs AsyncInstagram <code>async_instagram.py</code> Main async class \u2014 true async I/O AnonClient <code>anon_client.py</code> Anonymous scraping \u2014 5 strategy chain AsyncAnonClient <code>async_anon_client.py</code> Async anonymous scraping HttpClient <code>client.py</code> Authenticated HTTP client AsyncHttpClient <code>async_client.py</code> Async authenticated HTTP SessionManager <code>session_manager.py</code> Multi-session management ProxyManager <code>proxy_manager.py</code> Proxy rotation + scoring AntiDetect <code>anti_detect.py</code> TLS fingerprint + headers RateLimiter <code>rate_limiter.py</code> Token bucket rate control SpeedModes <code>speed_modes.py</code> SAFE/FAST/TURBO/UNLIMITED ChallengeHandler <code>challenge.py</code> Email/SMS auto-verification DeviceFingerprint <code>device_fingerprint.py</code> Mobile device simulation EventEmitter <code>events.py</code> Event hooks system Plugin <code>plugin.py</code> Plugin architecture"},{"location":"core/architecture/#two-operation-modes","title":"Two Operation Modes","text":"Anonymous (No Login)Authenticated (Login) <pre><code>Instagram.anonymous()\n    \u2192 PublicAPI\n        \u2192 AnonClient\n            \u2192 5 strategies (no cookies needed)\n                \u2192 curl_cffi (TLS fingerprint)\n</code></pre> <pre><code>Instagram.from_env()\n    \u2192 UsersAPI, MediaAPI, FeedAPI, ...\n        \u2192 HttpClient\n            \u2192 SessionManager (cookies)\n                \u2192 curl_cffi (TLS fingerprint)\n</code></pre>"},{"location":"core/architecture/#design-patterns","title":"Design Patterns","text":"Pattern Where Why Strategy AnonClient 5 fallback strategies for resilience Chain of Responsibility Fallback chain Auto-try next on failure Factory <code>Instagram.from_env()</code> Clean initialization Observer EventEmitter Decoupled event handling Proxy ProxyManager Transparent proxy rotation Singleton Config Shared configuration Builder StoryComposer Fluent story creation"},{"location":"core/error-handling/","title":"Error Handling","text":"<p>InstaAPI uses a structured exception hierarchy for precise error handling.</p>"},{"location":"core/error-handling/#exception-hierarchy","title":"Exception Hierarchy","text":"<pre><code>graph TD\n    IE[\"InstagramError\"] --&gt; LR[\"LoginRequired\"]\n    IE --&gt; RLE[\"RateLimitError\"]\n    IE --&gt; PAE[\"PrivateAccountError\"]\n    IE --&gt; NFE[\"NotFoundError\"]\n    IE --&gt; CR[\"ChallengeRequired\"]\n    IE --&gt; CPR[\"CheckpointRequired\"]\n    IE --&gt; CSR[\"ConsentRequired\"]\n    IE --&gt; NE[\"NetworkError\"]\n    IE --&gt; PE[\"ProxyError\"]\n    NFE --&gt; MNF[\"MediaNotFound\"]\n    NFE --&gt; UNF[\"UserNotFound\"]</code></pre>"},{"location":"core/error-handling/#exception-reference","title":"Exception Reference","text":"Exception Status When <code>InstagramError</code> \u2014 Base class for all errors <code>LoginRequired</code> 302/401 Session expired or login needed <code>RateLimitError</code> 429 Too many requests <code>PrivateAccountError</code> 403 Cannot access private account <code>NotFoundError</code> 404 User or resource not found <code>UserNotFound</code> 404 Specific user not found <code>MediaNotFound</code> 404 Specific media not found <code>ChallengeRequired</code> 400 Captcha or phone verification <code>CheckpointRequired</code> 400 Identity checkpoint <code>ConsentRequired</code> 400 Terms of service consent <code>NetworkError</code> \u2014 Connection/timeout error <code>ProxyError</code> \u2014 Proxy connection failed"},{"location":"core/error-handling/#usage","title":"Usage","text":""},{"location":"core/error-handling/#basic-trycatch","title":"Basic Try/Catch","text":"<pre><code>from instaapi import Instagram\nfrom instaapi.exceptions import (\n    NotFoundError,\n    PrivateAccountError,\n    RateLimitError,\n    LoginRequired,\n)\n\nig = Instagram.from_env()\n\ntry:\n    user = ig.users.get_by_username(\"cristiano\")\nexcept NotFoundError:\n    print(\"User not found\")\nexcept PrivateAccountError:\n    print(\"Account is private\")\nexcept RateLimitError:\n    print(\"Rate limited \u2014 wait and retry\")\nexcept LoginRequired:\n    print(\"Session expired \u2014 re-login needed\")\n</code></pre>"},{"location":"core/error-handling/#challengerequired-details","title":"ChallengeRequired Details","text":"<pre><code>from instaapi.exceptions import ChallengeRequired\n\ntry:\n    ig.login(\"user\", \"pass\")\nexcept ChallengeRequired as e:\n    print(f\"Challenge URL: {e.challenge_url}\")\n    print(f\"Challenge type: {e.challenge_type}\")\n    print(f\"Status code: {e.status_code}\")\n    print(f\"Response: {e.response}\")\n</code></pre>"},{"location":"core/error-handling/#error-properties","title":"Error Properties","text":"<p>All exceptions have:</p> Property Type Description <code>message</code> <code>str</code> Human-readable error message <code>status_code</code> <code>int</code> HTTP status code (0 if N/A) <code>response</code> <code>dict</code> Raw API response body"},{"location":"core/error-handling/#auto-retry","title":"Auto-Retry","text":"<p>InstaAPI automatically retries on transient errors:</p> <pre><code>from instaapi import Instagram\nfrom instaapi.retry import RetryConfig\n\nig = Instagram(\n    retry=RetryConfig(\n        max_retries=3,           # Retry up to 3 times\n        backoff_factor=2.0,      # Exponential backoff\n        retry_on_status=[429, 500, 502, 503],\n    )\n)\nig.load_session(\"session.json\")\n# 429 \u2192 wait 2s \u2192 retry \u2192 wait 4s \u2192 retry \u2192 wait 8s \u2192 fail\n</code></pre>"},{"location":"core/error-handling/#anonymous-error-handling","title":"Anonymous Error Handling","text":"<p>Anonymous methods return <code>None</code> instead of raising:</p> <pre><code>ig = Instagram.anonymous()\n\nprofile = ig.public.get_profile(\"nonexistent_user_12345\")\nif profile is None:\n    print(\"Not found or error occurred\")\n</code></pre>"},{"location":"core/models/","title":"Data Models","text":"<p>InstaAPI uses Pydantic models for structured, validated data.</p>"},{"location":"core/models/#available-models","title":"Available Models","text":"Model Description <code>User</code> Full user profile <code>UserShort</code> Minimal user info (pk, username) <code>Media</code> Post/reel/IGTV data <code>Caption</code> Media caption <code>Comment</code> Post comment <code>Story</code> Story item <code>StorySticker</code> Story sticker data <code>Highlight</code> Story highlight <code>DirectThread</code> DM thread <code>DirectMessage</code> Single DM message <code>Location</code> Location data <code>Notification</code> Notification item"},{"location":"core/models/#user-model","title":"User Model","text":"<pre><code>from instaapi.models import User\n\nuser = ig.users.get_by_username(\"cristiano\")\n</code></pre> Field Type Description <code>pk</code> <code>int</code> Unique user ID <code>username</code> <code>str</code> Username <code>full_name</code> <code>str</code> Display name <code>biography</code> <code>str</code> Bio text <code>bio_links</code> <code>list</code> Links in bio <code>profile_pic_url</code> <code>str</code> Profile picture URL <code>profile_pic_url_hd</code> <code>str</code> HD profile picture <code>followers</code> <code>int</code> Follower count <code>following</code> <code>int</code> Following count <code>posts_count</code> <code>int</code> Total posts <code>is_private</code> <code>bool</code> Private account <code>is_verified</code> <code>bool</code> Verified badge <code>is_business</code> <code>bool</code> Business account <code>category</code> <code>str</code> Business category <code>external_url</code> <code>str</code> Website URL <code>contact</code> <code>Contact</code> Phone/email (business)"},{"location":"core/models/#media-model","title":"Media Model","text":"<pre><code>from instaapi.models import Media\n\nmedia = ig.media.get_by_shortcode(\"ABC123\")\n</code></pre> Field Type Description <code>pk</code> <code>int</code> Media ID <code>shortcode</code> <code>str</code> URL shortcode <code>media_type</code> <code>int</code> 1=photo, 2=video, 8=carousel <code>caption</code> <code>Caption</code> Caption object <code>like_count</code> <code>int</code> Number of likes <code>comment_count</code> <code>int</code> Number of comments <code>taken_at</code> <code>datetime</code> Post timestamp <code>image_versions</code> <code>list</code> Image URLs + sizes <code>video_url</code> <code>str</code> Video URL (if video) <code>video_duration</code> <code>float</code> Duration in seconds <code>video_view_count</code> <code>int</code> View count <code>carousel_media</code> <code>list</code> Child media items <code>location</code> <code>Location</code> Tagged location <code>usertags</code> <code>list</code> Tagged users"},{"location":"core/models/#dict-like-access","title":"Dict-Like Access","text":"<p>All models support dict-like access for backward compatibility:</p> <pre><code>user = ig.users.get_by_username(\"nike\")\n\n# Attribute access (recommended)\nprint(user.username)\nprint(user.followers)\n\n# Dict-like access (backward compat)\nprint(user[\"username\"])\nprint(user.get(\"followers\", 0))\n\n# Convert to dict\ndata = user.to_dict()\n</code></pre>"},{"location":"core/models/#import","title":"Import","text":"<pre><code>from instaapi.models import (\n    User, UserShort, Contact, BioParsed,\n    Media, Caption,\n    Comment,\n    Story, StorySticker, Highlight,\n    DirectThread, DirectMessage,\n    Location,\n    Notification,\n)\n</code></pre>"},{"location":"core/proxy-management/","title":"Proxy Management","text":"<p>Built-in proxy rotation, health checking, and BrightData integration.</p>"},{"location":"core/proxy-management/#quick-setup","title":"Quick Setup","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.from_env()\n\n# Add single proxy\nig.add_proxy(\"http://user:pass@proxy.com:8080\")\n\n# Add multiple \u2014 enables rotation\nig.add_proxies([\n    \"http://user:pass@us1.proxy.com:8080\",\n    \"http://user:pass@us2.proxy.com:8080\",\n    \"http://user:pass@eu1.proxy.com:8080\",\n])\n</code></pre>"},{"location":"core/proxy-management/#supported-formats","title":"Supported Formats","text":"<pre><code># HTTP/HTTPS\n\"http://user:pass@proxy.com:8080\"\n\"https://user:pass@proxy.com:8443\"\n\n# SOCKS5\n\"socks5://user:pass@proxy.com:1080\"\n\n# No auth\n\"http://proxy.com:8080\"\n\n# BrightData residential\n\"http://user:pass@brd.superproxy.io:22225\"\n</code></pre>"},{"location":"core/proxy-management/#rotation-strategies","title":"Rotation Strategies","text":"<pre><code>from instaapi.proxy_manager import ProxyManager, RotationStrategy\n\npm = ProxyManager(strategy=RotationStrategy.ROUND_ROBIN)\n# or\npm = ProxyManager(strategy=RotationStrategy.RANDOM)\n# or\npm = ProxyManager(strategy=RotationStrategy.WEIGHTED)\n</code></pre> Strategy Description <code>ROUND_ROBIN</code> Sequential rotation through proxy list <code>RANDOM</code> Random proxy selection per request <code>WEIGHTED</code> Prioritize proxies with best success rate (default)"},{"location":"core/proxy-management/#health-checking","title":"Health Checking","text":"<pre><code># Start background health checker\nig.start_proxy_health(interval=300)  # Every 5 minutes\n\n# Health checker will:\n# - Test each proxy against Instagram\n# - Remove proxies with &gt;3 consecutive failures\n# - Track response times and success rates\n# - Auto-replace bad proxies\n\n# Stop health checker\nig.stop_proxy_health()\n</code></pre>"},{"location":"core/proxy-management/#config","title":"Config","text":"Setting Default Description <code>PROXY_HEALTH_CHECK_INTERVAL</code> 300s Check frequency <code>PROXY_MAX_FAILURES</code> 3 Remove after N failures <code>PROXY_MIN_SCORE</code> 0.3 Replace below this score"},{"location":"core/proxy-management/#anonymous-scraping-with-proxies","title":"Anonymous Scraping with Proxies","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram.anonymous(unlimited=True)\nig.add_proxies([\n    \"http://user:pass@proxy1.com:8080\",\n    \"http://user:pass@proxy2.com:8080\",\n])\n\n# Each request uses a different proxy + different TLS fingerprint\nprofile = ig.public.get_profile(\"cristiano\")\n</code></pre>"},{"location":"core/proxy-management/#async-with-proxies","title":"Async with Proxies","text":"<pre><code>from instaapi import AsyncInstagram\n\nasync with AsyncInstagram.from_env(mode=\"turbo\") as ig:\n    ig.add_proxies(proxy_list)\n    # Turbo + 5 proxies = 50 + (5 \u00d7 10) = 100 concurrent!\n\n    tasks = [ig.public.get_profile(u) for u in usernames]\n    results = await asyncio.gather(*tasks)\n</code></pre>"},{"location":"core/speed-modes/","title":"Speed Modes","text":"<p>InstaAPI provides 4 speed modes that control concurrency, delays, and rate limiting.</p>"},{"location":"core/speed-modes/#overview","title":"Overview","text":"Mode Concurrency Delay Rate/min Burst Use Case \ud83d\udc22 <code>safe</code> 5 0.8-2.0s 30 3 Personal account, ban-proof \u26a1 <code>fast</code> 15 0.2-0.8s 60 8 Moderate scraping \ud83d\ude80 <code>turbo</code> 50 0.05-0.3s 120 20 Heavy scraping + proxies \u267e\ufe0f <code>unlimited</code> 1000 0s \u221e 1000 Anonymous bulk scraping"},{"location":"core/speed-modes/#usage","title":"Usage","text":"<p>Speed modes are async-only</p> <p>The <code>mode</code> parameter is available only on <code>AsyncInstagram</code>. Sync <code>Instagram</code> always uses safe mode internally.</p> <pre><code>import asyncio\nfrom instaapi import AsyncInstagram\n\nasync def main():\n    # Safe \u2014 default, ban-proof\n    async with AsyncInstagram.from_env(mode=\"safe\") as ig:\n        user = await ig.users.get_by_username(\"nike\")\n\n    # Fast \u2014 3x faster\n    async with AsyncInstagram.from_env(mode=\"fast\") as ig:\n        user = await ig.users.get_by_username(\"nike\")\n\n    # Turbo \u2014 10x faster with proxies\n    async with AsyncInstagram.from_env(mode=\"turbo\") as ig:\n        ig.add_proxies([\"http://p1:8080\", \"http://p2:8080\"])\n        user = await ig.users.get_by_username(\"nike\")\n\n    # Unlimited \u2014 anonymous, no limits\n    async with AsyncInstagram.anonymous(unlimited=True) as ig:\n        profile = await ig.public.get_profile(\"nike\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"core/speed-modes/#speedmode-parameters","title":"SpeedMode Parameters","text":"<pre><code>from instaapi.speed_modes import SpeedMode\n\n# Each mode is a frozen dataclass:\nSpeedMode(\n    name=\"safe\",\n    max_concurrency=5,          # Max parallel requests\n    delay_range=(0.8, 2.0),     # Random delay between requests\n    rate_per_minute=30,         # Token bucket rate limit\n    burst_size=3,               # Fast requests before delay\n    proxy_multiplier=3.0,       # +N concurrency per proxy\n    error_backoff=2.0,          # Delay multiplier on errors\n)\n</code></pre>"},{"location":"core/speed-modes/#proxy-scaling","title":"Proxy Scaling","text":"<p>When proxies are added, concurrency scales automatically:</p> <pre><code>Effective concurrency = base + (proxy_count \u00d7 multiplier)\n</code></pre> Mode No proxy 2 proxies 5 proxies 10 proxies <code>safe</code> 5 11 20 35 <code>fast</code> 15 25 40 65 <code>turbo</code> 50 70 100 150 <code>unlimited</code> 1000 1000 1000 1000 <p>Hard cap</p> <p>Proxy-based scaling has a hard cap of 200 concurrent requests (except <code>unlimited</code>).</p>"},{"location":"core/speed-modes/#error-escalation","title":"Error Escalation","text":"<p>Speed modes include automatic error handling:</p> <ul> <li>Rate limit (429) \u2192 Escalation level +2</li> <li>Challenge/Checkpoint \u2192 Escalation level +3  </li> <li>Other errors \u2192 Escalation level +1</li> <li>Success (30s streak) \u2192 Escalation level -1</li> </ul> <p>Each escalation level increases delays by 30%.</p>"},{"location":"core/speed-modes/#custom-mode","title":"Custom Mode","text":"<pre><code>from instaapi.speed_modes import SpeedMode\n\ncustom = SpeedMode(\n    name=\"custom\",\n    max_concurrency=25,\n    delay_range=(0.3, 1.0),\n    rate_per_minute=45,\n    burst_size=5,\n    proxy_multiplier=4.0,\n    error_backoff=1.8,\n)\n</code></pre>"},{"location":"getting-started/configuration/","title":"Configuration","text":""},{"location":"getting-started/configuration/#environment-variables-env","title":"Environment Variables (.env)","text":"<p>Create a <code>.env</code> file in your project root:</p> <pre><code># Required for authenticated access\nSESSION_ID=61234567890%3AaBcDeFgHiJkLmN%3A12%3AAYf...\nCSRF_TOKEN=abcdef1234567890\nDS_USER_ID=12345678\n\n# Optional \u2014 improve session stability\nMID=YnR5AAE...\nIG_DID=A1B2C3D4-E5F6-...\nDATR=XyZ123...\nUSER_AGENT=Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X)...\n</code></pre>"},{"location":"getting-started/configuration/#how-to-get-cookies","title":"How to get cookies","text":"<ol> <li>Open Instagram in Chrome</li> <li>Press <code>F12</code> \u2192 Application \u2192 Cookies \u2192 <code>https://www.instagram.com</code></li> <li>Copy these values:</li> </ol> Cookie Name Maps to <code>sessionid</code> <code>SESSION_ID</code> <code>csrftoken</code> <code>CSRF_TOKEN</code> <code>ds_user_id</code> <code>DS_USER_ID</code> <code>mid</code> <code>MID</code> <code>ig_did</code> <code>IG_DID</code> <code>datr</code> <code>DATR</code>"},{"location":"getting-started/configuration/#proxy-configuration","title":"Proxy Configuration","text":""},{"location":"getting-started/configuration/#add-proxies","title":"Add proxies","text":"<pre><code>ig = Instagram.from_env()\n\n# Single proxy\nig.add_proxy(\"http://user:pass@proxy.com:8080\")\n\n# Multiple proxies \u2014 enables rotation\nig.add_proxies([\n    \"http://user:pass@proxy1.com:8080\",\n    \"http://user:pass@proxy2.com:8080\",\n    \"http://user:pass@proxy3.com:8080\",\n])\n</code></pre>"},{"location":"getting-started/configuration/#brightdata-integration","title":"BrightData integration","text":"<pre><code>ig.add_proxy(\"http://user:pass@brd.superproxy.io:22225\")\n</code></pre>"},{"location":"getting-started/configuration/#proxy-health-monitoring","title":"Proxy health monitoring","text":"<pre><code># Start background health checker (every 5 minutes)\nig.start_proxy_health(interval=300)\n\n# Stop when done\nig.stop_proxy_health()\n</code></pre>"},{"location":"getting-started/configuration/#speed-modes-async-only","title":"Speed Modes (Async only)","text":"<pre><code>from instaapi import AsyncInstagram\n\n# Safe \u2014 default, ban-proof\nig = AsyncInstagram.from_env(mode=\"safe\")\n\n# Fast \u2014 balanced speed\nig = AsyncInstagram.from_env(mode=\"fast\")\n\n# Turbo \u2014 maximum speed, proxy required\nig = AsyncInstagram.from_env(mode=\"turbo\")\n\n# Unlimited \u2014 anonymous, no limits\nig = AsyncInstagram.anonymous(unlimited=True)\n</code></pre> Mode Concurrency Delay Rate/min Best for <code>safe</code> 5 0.8-2.0s 30 Personal account <code>fast</code> 15 0.2-0.8s 60 Moderate scraping <code>turbo</code> 50 0.05-0.3s 120 Heavy scraping + proxies <code>unlimited</code> 1000 0s \u221e Anonymous bulk scraping <p>See Speed Modes for details.</p>"},{"location":"getting-started/configuration/#debug-mode","title":"Debug Mode","text":"<pre><code># Enable verbose logging\nig = Instagram.from_env(debug=True)\n\n# Log to file\nig = Instagram.from_env(debug=True, debug_log_file=\"debug.log\")\n</code></pre>"},{"location":"getting-started/configuration/#retry-configuration","title":"Retry Configuration","text":"<pre><code>from instaapi import Instagram\nfrom instaapi.retry import RetryConfig\n\nig = Instagram.from_env(\n    retry=RetryConfig(\n        max_retries=5,\n        backoff_factor=2.0,\n        backoff_max=120.0,\n        jitter=True,\n    )\n)\n</code></pre> Param Default Description <code>max_retries</code> 3 Maximum retry attempts <code>backoff_factor</code> 2.0 Exponential backoff base <code>backoff_max</code> 60.0 Maximum delay ceiling (seconds) <code>jitter</code> <code>True</code> Add random \u00b130% jitter to delays <code>retry_on</code> <code>{RateLimitError, NetworkError, ChallengeRequired, CheckpointRequired}</code> Exception types to retry on"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.10+</li> <li>curl_cffi \u2014 TLS fingerprint engine (auto-installed)</li> </ul>"},{"location":"getting-started/installation/#install-from-pypi","title":"Install from PyPI","text":"<pre><code>pip install insaapi\n</code></pre>"},{"location":"getting-started/installation/#install-from-source","title":"Install from source","text":"<pre><code>git clone https://github.com/insaapi/insaapi.git\ncd insaapi\npip install -e .\n</code></pre>"},{"location":"getting-started/installation/#dependencies","title":"Dependencies","text":"<p>InstaAPI automatically installs these:</p> Package Purpose <code>curl_cffi</code> HTTP client with TLS fingerprint impersonation <code>pydantic</code> Data models and validation <code>python-dotenv</code> <code>.env</code> file loading"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code>import instaapi\nprint(instaapi.__version__)\n</code></pre>"},{"location":"getting-started/installation/#optional-dependencies","title":"Optional Dependencies","text":"<pre><code># For Gmail challenge auto-resolver\npip install google-auth google-auth-oauthlib google-api-python-client\n\n# For export to Excel\npip install openpyxl\n\n# For AI suggestions\npip install google-generativeai\n</code></pre>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>Get up and running in 5 minutes.</p>"},{"location":"getting-started/quick-start/#1-anonymous-no-login-needed","title":"1. Anonymous \u2014 No Login Needed","text":"<p>Scrape public Instagram data without login:</p> <pre><code>from instaapi import Instagram\n\n# Create anonymous client\nig = Instagram.anonymous()\n\n# Get any public profile\nprofile = ig.public.get_profile(\"cristiano\")\n\nprint(f\"Username:  {profile['username']}\")\nprint(f\"Full Name: {profile['full_name']}\")\nprint(f\"Followers: {profile['followers']:,}\")\nprint(f\"Following: {profile['following']:,}\")\nprint(f\"Posts:     {profile['posts_count']}\")\nprint(f\"Bio:      {profile['biography']}\")\nprint(f\"Verified:  {profile['is_verified']}\")\n</code></pre>"},{"location":"getting-started/quick-start/#get-posts","title":"Get Posts","text":"<pre><code>posts = ig.public.get_posts(\"cristiano\", max_count=12)\n\nfor post in posts:\n    print(f\"[{post['shortcode']}] \u2764\ufe0f {post['likes']:,} \ud83d\udcac {post['comments']}\")\n</code></pre>"},{"location":"getting-started/quick-start/#get-post-by-url","title":"Get Post by URL","text":"<pre><code>post = ig.public.get_post_by_url(\"https://instagram.com/p/ABC123/\")\nprint(post['caption'][:100])\n</code></pre>"},{"location":"getting-started/quick-start/#search","title":"Search","text":"<pre><code>results = ig.public.search(\"fashion\")\n\nfor user in results[\"users\"]:\n    print(f\"@{user['username']} \u2014 {user['follower_count']:,} followers\")\n</code></pre>"},{"location":"getting-started/quick-start/#2-authenticated-full-access","title":"2. Authenticated \u2014 Full Access","text":"<p>For private data, login with session cookies:</p>"},{"location":"getting-started/quick-start/#option-a-from-env-file","title":"Option A: From .env file","text":"<p>Create <code>.env</code>:</p> <pre><code>SESSION_ID=your_session_id_here\nCSRF_TOKEN=your_csrf_token\nDS_USER_ID=your_user_id\n</code></pre> <pre><code>from instaapi import Instagram\n\nig = Instagram.from_env(\".env\")\n\n# Get any user's full profile\nuser = ig.users.get_by_username(\"cristiano\")\nprint(f\"{user.full_name} \u2014 {user.followers:,} followers\")\n\n# Like a post\nig.media.like(user.media[0].pk)\n\n# Follow a user\nig.friendships.follow(user.pk)\n</code></pre>"},{"location":"getting-started/quick-start/#option-b-login-with-credentials","title":"Option B: Login with credentials","text":"<pre><code>from instaapi import Instagram\n\nig = Instagram()\nig.login(\"your_username\", \"your_password\")\nig.save_session(\"session.json\")  # Save for later use\n</code></pre>"},{"location":"getting-started/quick-start/#option-c-load-saved-session","title":"Option C: Load saved session","text":"<pre><code>ig = Instagram.from_session_file(\"session.json\")\n</code></pre>"},{"location":"getting-started/quick-start/#3-async-maximum-performance","title":"3. Async \u2014 Maximum Performance","text":"<pre><code>import asyncio\nfrom instaapi import AsyncInstagram\n\nasync def main():\n    async with AsyncInstagram.anonymous(unlimited=True) as ig:\n        # Parallel \u2014 200 profiles in 15 seconds!\n        usernames = [\"nike\", \"adidas\", \"puma\", \"gucci\", \"zara\"]\n        tasks = [ig.public.get_profile(u) for u in usernames]\n        profiles = await asyncio.gather(*tasks)\n\n        for p in profiles:\n            if p:\n                print(f\"@{p['username']}: {p['followers']:,}\")\n\nasyncio.run(main())\n</code></pre>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration \u2014 Learn about <code>.env</code>, proxies, and speed modes</li> <li>Anonymous Scraping \u2014 Deep dive into 5-strategy scraping</li> <li>Async Guide \u2014 Master async operations</li> </ul>"},{"location":"reference/exceptions/","title":"Exception Reference","text":"<p>The <code>instaapi.exceptions</code> module structures all possible faults into a clean hierarchy. Catching specific exceptions provides insight into why your automation/scraper failed.</p>"},{"location":"reference/exceptions/#base-class","title":"Base Class","text":""},{"location":"reference/exceptions/#instagramerror","title":"InstagramError","text":"<p>The root exception. Catching this guarantees trapping any internal library error seamlessly.</p> <pre><code>class InstagramError(Exception):\n    def __init__(self, message: str = \"\", status_code: int = 0, response: dict = None): ...\n</code></pre> <p>Properties attached to all exceptions:</p> <ul> <li><code>message</code>: Descriptive error string</li> <li><code>status_code</code>: The HTTP Status (e.g., 429, 400). <code>0</code> if it's a local breakdown (like JSON decode error).</li> <li><code>response</code>: The dict object holding exactly what Instagram responded with.</li> </ul>"},{"location":"reference/exceptions/#auth-account-lifecycle","title":"Auth &amp; Account Lifecycle","text":""},{"location":"reference/exceptions/#loginrequired","title":"LoginRequired","text":"<p>Trigger: Session cookie expired, wiped, or you never logged in. Replaces the typical HTTP 401 or HTTP 302 location trap. Fix: Run <code>ig.login()</code> again.</p>"},{"location":"reference/exceptions/#challengerequired","title":"ChallengeRequired","text":"<p>Trigger: Instagram determined the session isn't suspicious enough for a ban, but requires verify (Email or Text). Features: Retains <code>challenge_url</code> property pointing to the target endpoint. Fix: Implement an auto-resolver payload.</p>"},{"location":"reference/exceptions/#checkpointrequired","title":"CheckpointRequired","text":"<p>Trigger: Account is temporarily locked or faces a visual checkpoint. Fix: Open the official Instagram app to clear it.</p>"},{"location":"reference/exceptions/#consentrequired","title":"ConsentRequired","text":"<p>Trigger: Required to accept updated Terms of Service. Fix: Usually auto-resolved by InstaAPI natively.</p>"},{"location":"reference/exceptions/#rate-limits","title":"Rate Limits","text":""},{"location":"reference/exceptions/#ratelimiterror","title":"RateLimitError","text":"<p>Trigger: You hit HTTP 429 (Too Many Requests). Fix: Catch it, back off. If using <code>SpeedModes</code> effectively, InstaAPI handles this backing-off delay transparently without crashing your script.</p>"},{"location":"reference/exceptions/#resource-errors","title":"Resource Errors","text":""},{"location":"reference/exceptions/#notfounderror","title":"NotFoundError","text":"<p>Trigger: The requested data doesn't exist (HTTP 404).</p>"},{"location":"reference/exceptions/#privateaccounterror","title":"PrivateAccountError","text":"<p>Trigger: Tried to pull followers or posts from a locked account without following it first (HTTP 403).</p>"},{"location":"reference/exceptions/#usernotfound-medianotfound","title":"UserNotFound / MediaNotFound","text":"<p>These inherit from <code>NotFoundError</code>.</p>"},{"location":"reference/exceptions/#internal","title":"Internal","text":""},{"location":"reference/exceptions/#networkerror","title":"NetworkError","text":"<p>Trigger: <code>curl_cffi</code> failed entirely mapping a network failure (timeout, DNS resolution error, proxy dead).</p>"},{"location":"reference/exceptions/#proxyerror","title":"ProxyError","text":"<p>Trigger: The proxy configuration provided rejected the connection.</p>"},{"location":"reference/models/","title":"Models Dictionary","text":"<p>Complete dictionary mapping to the native <code>instaapi.models</code> schema. Extracted payloads provide full code hinting in IDEs like VSCode and PyCharm.</p>"},{"location":"reference/models/#user-models","title":"User Models","text":""},{"location":"reference/models/#usershort","title":"UserShort","text":"<p>Extremely lightweight model specifically designed for packing RAM heavily when scraping 1M+ followers lists.</p> Property Type <code>pk</code> <code>str</code> / <code>int</code> <code>username</code> <code>str</code> <code>full_name</code> <code>str</code> <code>is_private</code> <code>bool</code> <code>is_verified</code> <code>bool</code> <code>profile_pic_url</code> <code>str</code>"},{"location":"reference/models/#user","title":"User","text":"<p>Extends <code>UserShort</code> encompassing the heavy data profile grabs.</p> Property Type Note <code>biography</code> <code>str</code> Raw string <code>followers</code> <code>int</code> Exact count <code>following</code> <code>int</code> Exact count <code>external_url</code> <code>str</code> <code>bio_links</code> <code>list</code> Contains structured URL maps <code>is_business</code> <code>bool</code> <code>contact</code> <code>Contact</code> Sub-model"},{"location":"reference/models/#contact","title":"Contact","text":"<p>Only populates if <code>is_business</code> is True.</p> Property Type <code>public_email</code> <code>str</code> <code>contact_phone_number</code> <code>str</code> <code>city_name</code> <code>str</code> <code>public_phone_country_code</code> <code>str</code>"},{"location":"reference/models/#media-models","title":"Media Models","text":""},{"location":"reference/models/#media","title":"Media","text":"<p>Posts, Reels, and IGTV.</p> Property Type Note <code>pk</code> <code>str</code> / <code>int</code> Numeric identifier <code>shortcode</code> <code>str</code> Link identifier <code>media_type</code> <code>int</code> Type Enum <code>like_count</code> <code>int</code> <code>comment_count</code> <code>int</code> <code>taken_at</code> <code>datetime</code> <code>image_versions</code> <code>list</code> URLs to CDN host <code>video_url</code> <code>str</code> If type is Video <code>carousel_media</code> <code>list[Media]</code> If type is Carousel <code>caption</code> <code>Caption</code> Contains <code>.text</code> <code>location</code> <code>Location</code>"},{"location":"reference/models/#comment","title":"Comment","text":"Property Type <code>pk</code> <code>str</code> <code>text</code> <code>str</code> <code>user</code> <code>UserShort</code> <code>created_at</code> <code>datetime</code> <code>like_count</code> <code>int</code>"},{"location":"reference/models/#location","title":"Location","text":"Property Type <code>pk</code> <code>int</code> <code>name</code> <code>str</code> <code>city</code> <code>str</code> <code>address</code> <code>str</code> <code>lat</code> / <code>lng</code> <code>float</code>"},{"location":"reference/utilities/","title":"Utilities Reference","text":"<p>Helper functions in <code>instaapi.utils</code> for URL/shortcode conversion and data extraction.</p>"},{"location":"reference/utilities/#shortcode-pk-conversion","title":"Shortcode / PK Conversion","text":""},{"location":"reference/utilities/#shortcode_to_pkshortcode-str-int","title":"shortcode_to_pk(shortcode: str) \u2192 int","text":"<p>Convert Instagram shortcode to media PK.</p> <pre><code>from instaapi.utils import shortcode_to_pk\n\npk = shortcode_to_pk(\"DVDk2dSjcq_\")\n# 3124567890123\n</code></pre>"},{"location":"reference/utilities/#pk_to_shortcodepk-int-str","title":"pk_to_shortcode(pk: int) \u2192 str","text":"<p>Convert media PK to shortcode.</p> <pre><code>from instaapi.utils import pk_to_shortcode\n\ncode = pk_to_shortcode(3124567890123)\n# \"DVDk2dSjcq_\"\n</code></pre>"},{"location":"reference/utilities/#url-extraction","title":"URL Extraction","text":""},{"location":"reference/utilities/#extract_shortcodeurl-str-str-none","title":"extract_shortcode(url: str) \u2192 str | None","text":"<p>Extract shortcode from Instagram URL. Supports <code>instagram.com/p/</code>, <code>instagram.com/reel/</code>, <code>instagram.com/tv/</code>, and <code>instagr.am/p/</code>.</p> <pre><code>from instaapi.utils import extract_shortcode\n\ncode = extract_shortcode(\"https://www.instagram.com/reel/ABC123/\")\n# \"ABC123\"\n</code></pre>"},{"location":"reference/utilities/#url_to_media_pkurl-str-int-none","title":"url_to_media_pk(url: str) \u2192 int | None","text":"<p>Convert Instagram URL directly to media PK.</p> <pre><code>from instaapi.utils import url_to_media_pk\n\npk = url_to_media_pk(\"https://www.instagram.com/p/ABC123/\")\n</code></pre>"},{"location":"reference/utilities/#media_pk_to_urlmedia_pk-int-str","title":"media_pk_to_url(media_pk: int) \u2192 str","text":"<p>Convert media PK to Instagram URL.</p> <pre><code>from instaapi.utils import media_pk_to_url\n\nurl = media_pk_to_url(3124567890123)\n# \"https://www.instagram.com/p/DVDk2dSjcq_/\"\n</code></pre>"},{"location":"reference/utilities/#extract_usernameurl-str-str-none","title":"extract_username(url: str) \u2192 str | None","text":"<p>Extract username from Instagram profile URL.</p> <pre><code>from instaapi.utils import extract_username\n\nusername = extract_username(\"https://www.instagram.com/cristiano/\")\n# \"cristiano\"\n</code></pre>"},{"location":"reference/utilities/#extract_story_pkurl-str-str-none","title":"extract_story_pk(url: str) \u2192 str | None","text":"<p>Extract story PK from story URL.</p> <pre><code>from instaapi.utils import extract_story_pk\n\npk = extract_story_pk(\"https://www.instagram.com/stories/nike/12345/\")\n# \"12345\"\n</code></pre>"},{"location":"reference/utilities/#data-conversion","title":"Data Conversion","text":""},{"location":"reference/utilities/#media_id_to_pkmedia_id-str-int","title":"media_id_to_pk(media_id: str) \u2192 int","text":"<p>Convert media ID (<code>pk_user_pk</code> format) to PK.</p> <pre><code>from instaapi.utils import media_id_to_pk\n\npk = media_id_to_pk(\"1234567890_1234567\")\n# 1234567890\n</code></pre>"},{"location":"reference/utilities/#format_countcount-int-str","title":"format_count(count: int) \u2192 str","text":"<p>Format number in compact form.</p> <pre><code>from instaapi.utils import format_count\n\nformat_count(1500)       # \"1.5K\"\nformat_count(2500000)    # \"2.5M\"\nformat_count(1200000000) # \"1.2B\"\n</code></pre>"},{"location":"tools/ab-test/","title":"ABTestAPI","text":"<p><code>ig.ab_test</code> \u2014 A/B test different captions, hashtags, and posting strategies to find what works best.</p>"},{"location":"tools/ab-test/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Create an A/B test\ntest = ig.ab_test.create(\"Caption Test\", variants={\n    \"A\": {\"caption\": \"Short and sweet \u2728\"},\n    \"B\": {\"caption\": \"Detailed caption with storytelling and hashtags #test #content\"},\n})\n\n# Record results after posts go live\nig.ab_test.record(test[\"id\"], \"A\", likes=100, comments=20, saves=15)\nig.ab_test.record(test[\"id\"], \"B\", likes=150, comments=30, saves=25)\n\n# Get winner\nresult = ig.ab_test.results(test[\"id\"])\nprint(f\"Winner: Variant {result['winner']}\")\nprint(f\"Improvement: {result['improvement_pct']}%\")\n</code></pre>"},{"location":"tools/ab-test/#methods","title":"Methods","text":""},{"location":"tools/ab-test/#createname-variants-metricengagement","title":"create(name, variants, metric=\"engagement\")","text":"<p>Create a new A/B test.</p> Param Type Default Description <code>name</code> <code>str</code> \u2014 Test name <code>variants</code> <code>dict</code> \u2014 Variant definitions <code>metric</code> <code>str</code> \"engagement\" \"engagement\", \"likes\", or \"comments\""},{"location":"tools/ab-test/#recordtest_id-variant_name-media_idnone-likes0-comments0-reach0-saves0","title":"record(test_id, variant_name, media_id=None, likes=0, comments=0, reach=0, saves=0)","text":"<p>Record results for a variant.</p>"},{"location":"tools/ab-test/#collecttest_id","title":"collect(test_id)","text":"<p>Auto-collect live engagement data from Instagram for all variants with recorded media IDs.</p> <pre><code>ig.ab_test.collect(test[\"id\"])  # Fetches current like/comment counts\n</code></pre>"},{"location":"tools/ab-test/#resultstest_id","title":"results(test_id)","text":"<p>Analyze results and determine the winner.</p> <p>Returns:</p> <pre><code>{\n    \"winner\": \"B\",\n    \"scores\": {\"A\": 120, \"B\": 180},\n    \"improvement_pct\": 50.0,\n    \"metric\": \"engagement\"\n}\n</code></pre>"},{"location":"tools/ab-test/#list_testsstatus","title":"list_tests(status=\"\")","text":"<p>List all tests, optionally filtered by status.</p>"},{"location":"tools/ab-test/#delete_testtest_id","title":"delete_test(test_id)","text":"<p>Delete a test permanently.</p>"},{"location":"tools/ab-test/#async-version","title":"Async Version","text":"<pre><code>async with AsyncInstagram.from_env() as ig:\n    test = await ig.ab_test.create(\"Test\", variants={\"A\": {}, \"B\": {}})\n    await ig.ab_test.record(test[\"id\"], \"A\", likes=100)\n    result = await ig.ab_test.results(test[\"id\"])\n</code></pre>"},{"location":"tools/ai-suggest/","title":"AISuggestAPI","text":"<p><code>ig.ai_suggest</code> \u2014 AI-powered hashtag and caption suggester using built-in niche detection, keyword analysis, and trend awareness. No external API required.</p>"},{"location":"tools/ai-suggest/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Suggest hashtags from caption text\nresult = ig.ai_suggest.hashtags_from_caption(\n    \"Beautiful sunset at the beach \ud83c\udf05\",\n    count=30,\n)\nprint(f\"Niche: {result['niche']} ({result['confidence']:.0%})\")\nprint(\"Hashtags:\", result[\"hashtags\"])\n</code></pre>"},{"location":"tools/ai-suggest/#methods","title":"Methods","text":""},{"location":"tools/ai-suggest/#hashtags_from_captioncaption-count30-include_trendingtrue","title":"hashtags_from_caption(caption, count=30, include_trending=True)","text":"<p>Suggest hashtags based on caption text. Analyzes keywords, detects niche, and creates an optimal mix.</p> Param Type Required Default Description <code>caption</code> <code>str</code> \u2705 \u2014 Your post caption text <code>count</code> <code>int</code> \u274c 30 Number of hashtags <code>include_trending</code> <code>bool</code> \u274c <code>True</code> Include trending tags <p>Returns: <code>dict</code> with <code>{hashtags, niche, confidence, breakdown}</code></p> <pre><code>result = ig.ai_suggest.hashtags_from_caption(\"Morning workout \ud83d\udcaa\")\n# {\n#     \"hashtags\": [\"#fitness\", \"#workout\", \"#gym\", ...],\n#     \"niche\": \"fitness\",\n#     \"confidence\": 0.85,\n#     \"breakdown\": {\"niche\": 10, \"universal\": 5, \"longtail\": 15}\n# }\n</code></pre>"},{"location":"tools/ai-suggest/#hashtags_for_profileusername-count30","title":"hashtags_for_profile(username, count=30)","text":"<p>Suggest hashtags based on a user's profile and content. Analyzes bio, recent posts, and existing hashtag usage.</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Target username <code>count</code> <code>int</code> \u274c 30 Hashtags to suggest <p>Returns: <code>dict</code> with <code>{hashtags, niche, already_using, new_suggestions}</code></p> <pre><code>result = ig.ai_suggest.hashtags_for_profile(\"nike\")\nprint(\"Niche:\", result[\"niche\"])\nprint(\"Already using:\", result[\"already_using\"])\nprint(\"New suggestions:\", result[\"new_suggestions\"])\n</code></pre>"},{"location":"tools/ai-suggest/#caption_ideastopic-stylecasual-count5","title":"caption_ideas(topic, style=\"casual\", count=5)","text":"<p>Generate caption ideas from built-in templates.</p> Param Type Required Default Description <code>topic</code> <code>str</code> \u2705 \u2014 Topic or keyword <code>style</code> <code>str</code> \u274c <code>\"casual\"</code> Style: <code>inspirational</code>, <code>casual</code>, <code>professional</code>, <code>poetic</code>, <code>funny</code> <code>count</code> <code>int</code> \u274c 5 Number of ideas <p>Returns: <code>list[str]</code></p> <pre><code>ideas = ig.ai_suggest.caption_ideas(\"fitness\", style=\"inspirational\", count=3)\nfor idea in ideas:\n    print(idea)\n</code></pre>"},{"location":"tools/ai-suggest/#optimal_settopic-count30","title":"optimal_set(topic, count=30)","text":"<p>Create an optimal hashtag set with balanced difficulty.</p> <p>Mix: 30% easy + 40% medium + 20% hard + 10% very popular.</p> Param Type Required Default Description <code>topic</code> <code>str</code> \u2705 \u2014 Topic or niche name <code>count</code> <code>int</code> \u274c 30 Total hashtags <p>Returns: <code>dict</code> with <code>{hashtags, difficulty_mix, topic}</code></p>"},{"location":"tools/ai-suggest/#supported-niches","title":"Supported Niches","text":"<p>Built-in keyword databases cover these niches:</p> Niche Keywords <code>fitness</code> gym, workout, bodybuilding, yoga, running, ... <code>travel</code> wanderlust, explore, adventure, vacation, ... <code>food</code> foodie, recipe, cooking, chef, restaurant, ... <code>fashion</code> style, outfit, designer, streetwear, ... <code>beauty</code> makeup, skincare, cosmetics, glam, ... <code>tech</code> programming, coding, AI, startup, ... <code>business</code> entrepreneur, hustle, success, marketing, ... <code>photography</code> photo, camera, portrait, landscape, ... <code>sports</code> athlete, training, game, champion, ... <code>pets</code> dog, cat, puppy, kitten, animals, ... <code>education</code> learning, study, student, teacher, ..."},{"location":"tools/analytics/","title":"AnalyticsAPI","text":"<p><code>ig.analytics</code> \u2014 Generate engagement reports, find best posting times, analyze content performance, and compare accounts.</p>"},{"location":"tools/analytics/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Engagement rate analysis\nreport = ig.analytics.engagement_rate(\"cristiano\", post_count=20)\n\nprint(f\"Engagement Rate: {report['engagement_rate']:.2f}%\")\nprint(f\"Average Likes: {report['avg_likes']:,.0f}\")\nprint(f\"Rating: {report['rating']}\")\n</code></pre>"},{"location":"tools/analytics/#methods","title":"Methods","text":""},{"location":"tools/analytics/#engagement_rateusername-post_count12","title":"engagement_rate(username, post_count=12)","text":"<p>Calculate engagement rate from recent posts.</p> <p>Formula: <code>(avg_likes + avg_comments) / followers \u00d7 100</code></p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Target username <code>post_count</code> <code>int</code> \u274c 12 Posts to analyze <p>Returns: <code>dict</code></p> <pre><code>{\n    \"username\": \"cristiano\",\n    \"followers\": 600000000,\n    \"posts_analyzed\": 12,\n    \"total_likes\": 120000000,\n    \"total_comments\": 500000,\n    \"avg_likes\": 10000000.0,\n    \"avg_comments\": 41666.6,\n    \"engagement_rate\": 1.67,\n    \"rating\": \"good\"  # excellent/good/average/low\n}\n</code></pre>"},{"location":"tools/analytics/#best_posting_timesusername-post_count30","title":"best_posting_times(username, post_count=30)","text":"<p>Analyze post timestamps to find optimal posting times.</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Target username <code>post_count</code> <code>int</code> \u274c 30 Posts to analyze <p>Returns: <code>dict</code> with <code>best_hours</code>, <code>best_days</code>, <code>daily_breakdown</code></p> <pre><code>times = ig.analytics.best_posting_times(\"nike\", post_count=30)\nprint(\"Best hours:\", times[\"best_hours\"])\nprint(\"Best days:\", times[\"best_days\"])\n</code></pre>"},{"location":"tools/analytics/#content_analysisusername-post_count20","title":"content_analysis(username, post_count=20)","text":"<p>Analyze content performance by type, hashtags, and caption length.</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Target username <code>post_count</code> <code>int</code> \u274c 20 Posts to analyze <p>Returns: <code>dict</code> with <code>by_type</code>, <code>caption_length_impact</code>, <code>top_hashtags</code>, <code>posting_frequency</code></p> <pre><code>analysis = ig.analytics.content_analysis(\"nike\")\nfor media_type, stats in analysis[\"by_type\"].items():\n    print(f\"{media_type}: avg {stats['avg_likes']:,.0f} likes\")\n</code></pre>"},{"location":"tools/analytics/#profile_summaryusername-post_count12","title":"profile_summary(username, post_count=12)","text":"<p>Complete profile analytics summary \u2014 combines engagement, timing, and content analysis.</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Target username <code>post_count</code> <code>int</code> \u274c 12 Posts to analyze <p>Returns: <code>dict</code> \u2014 combined engagement, timing, content, and profile data</p> <pre><code>summary = ig.analytics.profile_summary(\"cristiano\")\nprint(summary[\"engagement\"][\"engagement_rate\"])\nprint(summary[\"timing\"][\"best_hours\"])\n</code></pre>"},{"location":"tools/analytics/#compareusernames-post_count12","title":"compare(usernames, post_count=12)","text":"<p>Compare multiple accounts side by side.</p> Param Type Required Default Description <code>usernames</code> <code>list[str]</code> \u2705 \u2014 Accounts to compare <code>post_count</code> <code>int</code> \u274c 12 Posts per account <p>Returns: <code>dict</code> with <code>accounts</code>, <code>rankings</code>, <code>winner</code></p> <pre><code>result = ig.analytics.compare([\"nike\", \"adidas\", \"puma\"])\nprint(f\"Winner: @{result['winner']}\")\nfor acc in result[\"accounts\"]:\n    print(f\"  @{acc['username']}: {acc['engagement_rate']:.2f}%\")\n</code></pre>"},{"location":"tools/audience/","title":"AudienceAPI","text":"<p><code>ig.audience</code> \u2014 Find lookalike audiences, analyze audience overlap, and get audience insights.</p>"},{"location":"tools/audience/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Find users similar to a competitor's audience\nlookalike = ig.audience.find_lookalike(\"competitor\", count=50)\nfor user in lookalike:\n    print(f\"@{user['username']} \u2014 score: {user['relevance_score']}\")\n</code></pre>"},{"location":"tools/audience/#methods","title":"Methods","text":""},{"location":"tools/audience/#find_lookalikesource_username-count50","title":"find_lookalike(source_username, count=50)","text":"<p>Find users similar to a source account's audience.</p> Param Type Default Description <code>source_username</code> <code>str</code> \u2014 Source account <code>count</code> <code>int</code> 50 Number of results <p>Returns: <code>list[dict]</code> \u2014 sorted by relevance score</p> <pre><code>[\n    {\"username\": \"user1\", \"relevance_score\": 0.92, \"followers\": 5000, \"is_verified\": False},\n    {\"username\": \"user2\", \"relevance_score\": 0.87, \"followers\": 12000, \"is_verified\": True},\n    ...\n]\n</code></pre>"},{"location":"tools/audience/#overlapaccount_a-account_b","title":"overlap(account_a, account_b)","text":"<p>Analyze audience overlap between two accounts.</p> <pre><code>result = ig.audience.overlap(\"nike\", \"adidas\")\nprint(f\"Overlap: {result['overlap_percentage']:.1f}%\")\nprint(f\"Shared followers: {result['shared_count']:,}\")\n</code></pre>"},{"location":"tools/audience/#insightsusername","title":"insights(username)","text":"<p>Get detailed audience insights for an account.</p> <pre><code>insights = ig.audience.insights(\"my_account\")\nprint(f\"Quality: {insights['quality_score']}\")\nprint(f\"Bot ratio: {insights['bot_ratio']:.1%}\")\nprint(f\"Active ratio: {insights['active_ratio']:.1%}\")\n</code></pre>"},{"location":"tools/audience/#async-version","title":"Async Version","text":"<pre><code>async with AsyncInstagram.from_env() as ig:\n    lookalike = await ig.audience.find_lookalike(\"competitor\", count=100)\n    overlap = await ig.audience.overlap(\"nike\", \"adidas\")\n</code></pre>"},{"location":"tools/automation/","title":"AutomationAPI","text":"<p><code>ig.automation</code> \u2014 Bot framework for auto-DM, auto-comment, auto-like with templates, safety limits, and human-like behavior.</p>"},{"location":"tools/automation/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Welcome DM to new followers\nig.automation.dm_new_followers(\n    templates=[\n        \"Hey {username}! Thanks for following! \ud83d\ude4c\",\n        \"Welcome {name}! Check out our latest collection \ud83d\udd25\",\n    ],\n    max_count=10,\n)\n</code></pre>"},{"location":"tools/automation/#methods","title":"Methods","text":""},{"location":"tools/automation/#dm_new_followerstemplates-max_count10-limitsnone-on_progressnone","title":"dm_new_followers(templates, max_count=10, limits=None, on_progress=None)","text":"<p>Send welcome DM to new followers.</p> Param Type Required Default Description <code>templates</code> <code>str\\|list[str]</code> \u2705 \u2014 Message template(s) <code>max_count</code> <code>int</code> \u274c 10 Max DMs to send <code>limits</code> <code>AutomationLimits</code> \u274c <code>None</code> Safety limits <code>on_progress</code> <code>callable</code> \u274c <code>None</code> Callback <code>(count, username)</code> <p>Template variables: <code>{username}</code>, <code>{name}</code>, <code>{random}</code> (random emoji/word)</p> <p>Returns: <code>dict</code> with <code>{sent, errors, duration_seconds}</code></p>"},{"location":"tools/automation/#comment_on_hashtagtag-templates-count10-limitsnone-on_progressnone","title":"comment_on_hashtag(tag, templates, count=10, limits=None, on_progress=None)","text":"<p>Auto-comment on hashtag posts.</p> Param Type Required Default Description <code>tag</code> <code>str</code> \u2705 \u2014 Hashtag (without #) <code>templates</code> <code>list[str]</code> \u2705 \u2014 Comment templates (random pick) <code>count</code> <code>int</code> \u274c 10 Posts to comment on <code>limits</code> <code>AutomationLimits</code> \u274c <code>None</code> Safety limits <code>on_progress</code> <code>callable</code> \u274c <code>None</code> Progress callback <p>Returns: <code>dict</code> with <code>{commented, errors, duration_seconds}</code></p>"},{"location":"tools/automation/#auto_like_feedcount20-limitsnone-on_progressnone","title":"auto_like_feed(count=20, limits=None, on_progress=None)","text":"<p>Auto-like posts from your timeline feed.</p> Param Type Required Default Description <code>count</code> <code>int</code> \u274c 20 Posts to like <code>limits</code> <code>AutomationLimits</code> \u274c <code>None</code> Safety limits <code>on_progress</code> <code>callable</code> \u274c <code>None</code> Callback <code>(liked_count, shortcode)</code> <p>Returns: <code>dict</code> with <code>{liked, errors, duration_seconds}</code></p>"},{"location":"tools/automation/#auto_like_hashtagtag-count20-limitsnone-on_progressnone","title":"auto_like_hashtag(tag, count=20, limits=None, on_progress=None)","text":"<p>Auto-like posts from a hashtag.</p> Param Type Required Default Description <code>tag</code> <code>str</code> \u2705 \u2014 Hashtag (without #) <code>count</code> <code>int</code> \u274c 20 Posts to like <code>limits</code> <code>AutomationLimits</code> \u274c <code>None</code> Safety limits <code>on_progress</code> <code>callable</code> \u274c <code>None</code> Progress callback <p>Returns: <code>dict</code> with <code>{liked, errors, hashtag, duration_seconds}</code></p>"},{"location":"tools/automation/#watch_storiesusername-limitsnone","title":"watch_stories(username, limits=None)","text":"<p>Watch all stories of a user.</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Target username <code>limits</code> <code>AutomationLimits</code> \u274c Safety limits <p>Returns: <code>dict</code> with <code>{watched, username}</code></p>"},{"location":"tools/automation/#automationlimits","title":"AutomationLimits","text":"<pre><code>from instaapi.api.automation import AutomationLimits\n\nlimits = AutomationLimits(\n    max_per_hour=30,\n    min_delay=15.0,\n    max_delay=60.0,\n    stop_on_challenge=True,\n    stop_on_rate_limit=True,\n)\n</code></pre> Param Type Default Description <code>max_per_hour</code> <code>int</code> 30 Max actions per hour <code>min_delay</code> <code>float</code> 15.0 Min delay (seconds) <code>max_delay</code> <code>float</code> 60.0 Max delay (seconds) <code>stop_on_challenge</code> <code>bool</code> <code>True</code> Stop on challenge <code>stop_on_rate_limit</code> <code>bool</code> <code>True</code> Stop on 429"},{"location":"tools/automation/#templateengine","title":"TemplateEngine","text":"<p>Templates support variables and randomization:</p> <pre><code>from instaapi.api.automation import TemplateEngine\n\n# Render a template\nmsg = TemplateEngine.render(\n    \"Hello {username}! Welcome \ud83d\ude4c\",\n    context={\"username\": \"john_doe\", \"name\": \"John\"},\n)\n\n# Pick random template and render\nmsg = TemplateEngine.pick_and_render(\n    [\"Great post! \ud83d\udd25\", \"Love this! \u2764\ufe0f\", \"Amazing {username}!\"],\n    context={\"username\": \"nike\"},\n)\n</code></pre> <p>Variables: <code>{username}</code>, <code>{name}</code>, <code>{random}</code></p>"},{"location":"tools/bulk-download/","title":"BulkDownloadAPI","text":"<p><code>ig.bulk_download</code> \u2014 Download all posts, stories, and highlights from any account in organized folders.</p>"},{"location":"tools/bulk-download/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Download everything\nresult = ig.bulk_download.everything(\"cristiano\", output_dir=\"./downloads\")\nprint(f\"Downloaded: {result['downloaded']} files\")\n</code></pre>"},{"location":"tools/bulk-download/#methods","title":"Methods","text":""},{"location":"tools/bulk-download/#all_postsusername-output_dir-max_posts0","title":"all_posts(username, output_dir, max_posts=0)","text":"<p>Download all posts (photos + videos).</p> Param Type Default Description <code>username</code> <code>str</code> \u2014 Target account <code>output_dir</code> <code>str</code> \u2014 Save directory <code>max_posts</code> <code>int</code> 0 Limit (0 = all) <p>Output structure:</p> <pre><code>downloads/cristiano/\n\u251c\u2500\u2500 posts/\n\u2502   \u251c\u2500\u2500 2026-02-27_ABC123.jpg\n\u2502   \u251c\u2500\u2500 2026-02-26_DEF456.mp4\n\u2502   \u2514\u2500\u2500 ...\n</code></pre>"},{"location":"tools/bulk-download/#all_storiesusername-output_dir","title":"all_stories(username, output_dir)","text":"<p>Download current active stories.</p>"},{"location":"tools/bulk-download/#everythingusername-output_dir","title":"everything(username, output_dir)","text":"<p>Download posts + stories + highlights \u2014 everything.</p> <p>Returns:</p> <pre><code>{\n    \"username\": \"cristiano\",\n    \"downloaded\": 150,\n    \"skipped\": 3,\n    \"failed\": 0,\n    \"total_size_mb\": 1240.5\n}\n</code></pre>"},{"location":"tools/bulk-download/#resume-support","title":"Resume Support","text":"<p>If a download is interrupted, re-running the same command will skip already downloaded files:</p> <pre><code># First run \u2014 downloads 100 files then interrupted\nig.bulk_download.all_posts(\"nike\", \"./downloads\")\n\n# Second run \u2014 skips existing, downloads only new\nig.bulk_download.all_posts(\"nike\", \"./downloads\")\n</code></pre>"},{"location":"tools/bulk-download/#async-version","title":"Async Version","text":"<pre><code>async with AsyncInstagram.from_env(mode=\"fast\") as ig:\n    result = await ig.bulk_download.all_posts(\"cristiano\", \"./downloads\")\n</code></pre>"},{"location":"tools/comment-manager/","title":"CommentManagerAPI","text":"<p><code>ig.comment_manager</code> \u2014 Filter comments, auto-reply, delete spam, and analyze sentiment.</p>"},{"location":"tools/comment-manager/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Get and analyze comments\ncomments = ig.comment_manager.get_comments(media_pk, sort=\"top\")\nsentiment = ig.comment_manager.sentiment(media_pk)\nprint(f\"Positive: {sentiment['positive']}%, Negative: {sentiment['negative']}%\")\n</code></pre>"},{"location":"tools/comment-manager/#methods","title":"Methods","text":""},{"location":"tools/comment-manager/#get_commentsmedia_pk-sorttop-filter_spamtrue","title":"get_comments(media_pk, sort=\"top\", filter_spam=True)","text":"<p>Get filtered comments for a post.</p> Param Type Default Description <code>media_pk</code> <code>str/int</code> \u2014 Post media PK <code>sort</code> <code>str</code> \"top\" Sort: \"top\", \"recent\" <code>filter_spam</code> <code>bool</code> True Auto-filter spam"},{"location":"tools/comment-manager/#auto_replymedia_pk-keyword-reply","title":"auto_reply(media_pk, keyword, reply)","text":"<p>Auto-reply to comments containing a keyword.</p> <pre><code>ig.comment_manager.auto_reply(\n    media_pk,\n    keyword=\"price?\",\n    reply=\"Check our bio for pricing! \ud83d\udcb0\"\n)\n</code></pre>"},{"location":"tools/comment-manager/#delete_spammedia_pk","title":"delete_spam(media_pk)","text":"<p>Detect and delete spam comments.</p> <pre><code>result = ig.comment_manager.delete_spam(media_pk)\nprint(f\"Deleted {result['deleted']} spam comments\")\n</code></pre> <p>Spam detection includes:</p> <ul> <li>\"follow for follow\" / \"f4f\" patterns</li> <li>Excessive emojis</li> <li>URL spam</li> <li>Money/promotion spam</li> <li>Repeated characters</li> </ul>"},{"location":"tools/comment-manager/#sentimentmedia_pk","title":"sentiment(media_pk)","text":"<p>Analyze comment sentiment distribution.</p> <pre><code>result = ig.comment_manager.sentiment(media_pk)\n# {\n#     \"total\": 150,\n#     \"positive\": 65,    # percentage\n#     \"negative\": 10,\n#     \"neutral\": 25,\n#     \"top_positive\": [...],\n#     \"top_negative\": [...]\n# }\n</code></pre>"},{"location":"tools/comment-manager/#async-version","title":"Async Version","text":"<pre><code>async with AsyncInstagram.from_env() as ig:\n    comments = await ig.comment_manager.get_comments(media_pk)\n    sentiment = await ig.comment_manager.sentiment(media_pk)\n    await ig.comment_manager.delete_spam(media_pk)\n</code></pre>"},{"location":"tools/export/","title":"ExportAPI","text":"<p><code>ig.export</code> \u2014 Export followers, following, hashtag users, post likers/commenters to CSV/JSON with powerful filtering.</p>"},{"location":"tools/export/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Export followers to CSV\nig.export.followers_to_csv(\"nike\", \"nike_followers.csv\", max_count=500)\n\n# Export with filters\nfrom instaapi.api.export import ExportFilter\n\nfilters = ExportFilter(min_followers=100, is_business=True)\nig.export.followers_to_csv(\"nike\", \"filtered.csv\", filters=filters)\n</code></pre>"},{"location":"tools/export/#methods","title":"Methods","text":""},{"location":"tools/export/#followers_to_csvusername-output_path-max_count0-filtersnone-enrichfalse-on_progressnone","title":"followers_to_csv(username, output_path, max_count=0, filters=None, enrich=False, on_progress=None)","text":"<p>Export followers to CSV.</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Target username <code>output_path</code> <code>str</code> \u2705 \u2014 CSV file path <code>max_count</code> <code>int</code> \u274c 0 Max followers (0 = all) <code>filters</code> <code>ExportFilter</code> \u274c <code>None</code> User filters <code>enrich</code> <code>bool</code> \u274c <code>False</code> Fetch full profile for each user <code>on_progress</code> <code>callable</code> \u274c <code>None</code> Callback <code>(exported, total)</code> <p>Returns: <code>dict</code> with <code>{exported, filtered_out, total_fetched, file}</code></p>"},{"location":"tools/export/#following_to_csvusername-output_path-max_count0-filtersnone-enrichfalse-on_progressnone","title":"following_to_csv(username, output_path, max_count=0, filters=None, enrich=False, on_progress=None)","text":"<p>Export following to CSV. Same parameters as <code>followers_to_csv</code>.</p>"},{"location":"tools/export/#hashtag_userstag-output_path-count100-sectionrecent-filtersnone-on_progressnone","title":"hashtag_users(tag, output_path, count=100, section=\"recent\", filters=None, on_progress=None)","text":"<p>Export users who posted with a hashtag.</p> Param Type Required Default Description <code>tag</code> <code>str</code> \u2705 \u2014 Hashtag (without #) <code>output_path</code> <code>str</code> \u2705 \u2014 CSV output path <code>count</code> <code>int</code> \u274c 100 Max users to collect <code>section</code> <code>str</code> \u274c <code>\"recent\"</code> <code>\"recent\"</code> or <code>\"top\"</code> <code>filters</code> <code>ExportFilter</code> \u274c <code>None</code> User filters <code>on_progress</code> <code>callable</code> \u274c <code>None</code> Progress callback <p>Returns: <code>dict</code> with <code>{exported, filtered_out, total_fetched, file}</code></p>"},{"location":"tools/export/#post_likersmedia_id-output_path-filtersnone","title":"post_likers(media_id, output_path, filters=None)","text":"<p>Export post likers to CSV.</p> Param Type Required Description <code>media_id</code> <code>int\\|str</code> \u2705 Media PK <code>output_path</code> <code>str</code> \u2705 CSV output path <code>filters</code> <code>ExportFilter</code> \u274c User filters <p>Returns: <code>dict</code> with <code>{exported, filtered_out, total_fetched, file}</code></p>"},{"location":"tools/export/#post_commentersmedia_id-output_path-max_pages10-filtersnone","title":"post_commenters(media_id, output_path, max_pages=10, filters=None)","text":"<p>Export post commenters to CSV.</p> Param Type Required Default Description <code>media_id</code> <code>int\\|str</code> \u2705 \u2014 Media PK <code>output_path</code> <code>str</code> \u2705 \u2014 CSV output path <code>max_pages</code> <code>int</code> \u274c 10 Max comment pages <code>filters</code> <code>ExportFilter</code> \u274c <code>None</code> User filters <p>Returns: <code>dict</code> with <code>{exported, filtered_out, total_fetched, file}</code></p>"},{"location":"tools/export/#to_jsonusername-output_path-include_poststrue-include_followers_sample0","title":"to_json(username, output_path, include_posts=True, include_followers_sample=0)","text":"<p>Export full profile data to JSON.</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Instagram username <code>output_path</code> <code>str</code> \u2705 \u2014 JSON output path <code>include_posts</code> <code>bool</code> \u274c <code>True</code> Include recent posts <code>include_followers_sample</code> <code>int</code> \u274c 0 Followers to include (0 = none) <p>Returns: <code>dict</code> with <code>{file, sections}</code></p>"},{"location":"tools/export/#exportfilter","title":"ExportFilter","text":"<p>Filter users during export.</p> <pre><code>from instaapi.api.export import ExportFilter\n\nfilters = ExportFilter(\n    min_followers=100,\n    max_followers=50000,\n    is_business=True,\n    bio_keywords=[\"fashion\", \"style\"],\n    exclude_keywords=[\"spam\"],\n)\n\nig.export.followers_to_csv(\"nike\", \"filtered.csv\", filters=filters)\n</code></pre> Param Type Default Description <code>min_followers</code> <code>int</code> 0 Minimum follower count <code>max_followers</code> <code>int</code> 0 Maximum follower count (0 = no limit) <code>min_following</code> <code>int</code> 0 Minimum following count <code>max_following</code> <code>int</code> 0 Maximum following count <code>min_posts</code> <code>int</code> 0 Minimum post count <code>is_private</code> <code>bool\\|None</code> <code>None</code> Filter by private status <code>is_business</code> <code>bool\\|None</code> <code>None</code> Filter by business account <code>is_verified</code> <code>bool\\|None</code> <code>None</code> Filter by verified badge <code>has_profile_pic</code> <code>bool\\|None</code> <code>None</code> Filter by profile picture <code>bio_keywords</code> <code>list[str]</code> <code>None</code> Bio must contain any of these <code>exclude_keywords</code> <code>list[str]</code> <code>None</code> Exclude if bio contains any <code>custom_filter</code> <code>callable</code> <code>None</code> Custom <code>(user_dict) -&gt; bool</code>"},{"location":"tools/export/#csv-columns","title":"CSV Columns","text":"<p>Exported CSV files include these columns:</p> <p><code>username</code>, <code>full_name</code>, <code>user_id</code>, <code>followers</code>, <code>following</code>, <code>posts_count</code>, <code>is_private</code>, <code>is_verified</code>, <code>is_business</code>, <code>biography</code>, <code>external_url</code>, <code>profile_pic_url</code></p>"},{"location":"tools/growth/","title":"GrowthAPI","text":"<p><code>ig.growth</code> \u2014 Smart follow/unfollow system with safety limits, anti-ban delays, whitelist/blacklist, and progress tracking.</p>"},{"location":"tools/growth/#quick-example","title":"Quick Example","text":"<pre><code>from instaapi import Instagram\nfrom instaapi.api.growth import GrowthFilters, GrowthLimits\n\nig = Instagram.from_env()\n\n# Follow followers of a competitor\nig.growth.follow_users_of(\n    \"nike\",\n    count=20,\n    filters=GrowthFilters(min_followers=100, has_bio=True),\n    limits=GrowthLimits(max_per_hour=15, min_delay=30),\n)\n</code></pre>"},{"location":"tools/growth/#methods","title":"Methods","text":""},{"location":"tools/growth/#follow_users_ofusername-count20-filtersnone-limitsnone-on_progressnone","title":"follow_users_of(username, count=20, filters=None, limits=None, on_progress=None)","text":"<p>Follow followers of a target user (competitor).</p> Param Type Required Default Description <code>username</code> <code>str</code> \u2705 \u2014 Target user whose followers to follow <code>count</code> <code>int</code> \u274c 20 How many to follow <code>filters</code> <code>GrowthFilters\\|dict</code> \u274c <code>None</code> User filters <code>limits</code> <code>GrowthLimits</code> \u274c <code>None</code> Safety limits <code>on_progress</code> <code>callable</code> \u274c <code>None</code> Callback <code>(followed, total, username)</code> <p>Returns: <code>dict</code> with <code>{followed, skipped, errors, duration_seconds}</code></p>"},{"location":"tools/growth/#follow_hashtag_userstag-count20-filtersnone-limitsnone-on_progressnone","title":"follow_hashtag_users(tag, count=20, filters=None, limits=None, on_progress=None)","text":"<p>Follow users who posted with a hashtag.</p> Param Type Required Default Description <code>tag</code> <code>str</code> \u2705 \u2014 Hashtag (without #) <code>count</code> <code>int</code> \u274c 20 How many to follow <code>filters</code> <code>GrowthFilters\\|dict</code> \u274c <code>None</code> User filters <code>limits</code> <code>GrowthLimits</code> \u274c <code>None</code> Safety limits <code>on_progress</code> <code>callable</code> \u274c <code>None</code> Progress callback <p>Returns: <code>dict</code> with <code>{followed, skipped, errors, duration_seconds}</code></p>"},{"location":"tools/growth/#unfollow_non_followersmax_count50-whitelistnone-limitsnone-on_progressnone","title":"unfollow_non_followers(max_count=50, whitelist=None, limits=None, on_progress=None)","text":"<p>Unfollow users who don't follow you back.</p> Param Type Required Default Description <code>max_count</code> <code>int</code> \u274c 50 Max users to unfollow <code>whitelist</code> <code>list[str]</code> \u274c <code>None</code> Usernames to never unfollow <code>limits</code> <code>GrowthLimits</code> \u274c <code>None</code> Safety limits <code>on_progress</code> <code>callable</code> \u274c <code>None</code> Progress callback <p>Returns: <code>dict</code> with <code>{unfollowed, skipped, duration_seconds}</code></p>"},{"location":"tools/growth/#unfollow_allkeep_listnone-max_count100-limitsnone","title":"unfollow_all(keep_list=None, max_count=100, limits=None)","text":"<p>Mass unfollow \u2014 keep specified users.</p> Param Type Required Default Description <code>keep_list</code> <code>list[str]</code> \u274c <code>None</code> Usernames to keep following <code>max_count</code> <code>int</code> \u274c 100 Max to unfollow <code>limits</code> <code>GrowthLimits</code> \u274c <code>None</code> Safety limits <p>Returns: <code>dict</code> with <code>{unfollowed, skipped, duration_seconds}</code></p>"},{"location":"tools/growth/#get_non_followers","title":"get_non_followers()","text":"<p>Get users you follow but who don't follow you back.</p> <p>Returns: <code>list[dict]</code></p>"},{"location":"tools/growth/#get_fans","title":"get_fans()","text":"<p>Get fans \u2014 followers you don't follow back.</p> <p>Returns: <code>list[dict]</code></p>"},{"location":"tools/growth/#add_whitelistusernames-add_blacklistusernames","title":"add_whitelist(usernames) / add_blacklist(usernames)","text":"<p>Add usernames to whitelist (never unfollow) or blacklist (never follow).</p> <pre><code>ig.growth.add_whitelist([\"best_friend\", \"partner\"])\nig.growth.add_blacklist([\"spam_account\"])\n</code></pre>"},{"location":"tools/growth/#growthfilters","title":"GrowthFilters","text":"<pre><code>from instaapi.api.growth import GrowthFilters\n\nfilters = GrowthFilters(\n    min_followers=50,\n    max_followers=10000,\n    min_posts=5,\n    is_private=False,\n    has_bio=True,\n    bio_keywords=[\"fashion\", \"style\"],\n    exclude_keywords=[\"spam\"],\n)\n</code></pre> Param Type Default Description <code>min_followers</code> <code>int</code> 0 Minimum follower count <code>max_followers</code> <code>int</code> 0 Maximum (0 = no limit) <code>min_posts</code> <code>int</code> 0 Minimum post count <code>is_private</code> <code>bool\\|None</code> <code>None</code> Filter by privacy <code>is_verified</code> <code>bool\\|None</code> <code>None</code> Filter by verified <code>has_bio</code> <code>bool\\|None</code> <code>None</code> Must have bio text <code>bio_keywords</code> <code>list[str]</code> <code>None</code> Bio must contain any <code>exclude_keywords</code> <code>list[str]</code> <code>None</code> Exclude if bio contains"},{"location":"tools/growth/#growthlimits","title":"GrowthLimits","text":"<pre><code>from instaapi.api.growth import GrowthLimits\n\nlimits = GrowthLimits(\n    max_per_hour=20,\n    max_per_day=150,\n    min_delay=25.0,\n    max_delay=90.0,\n    stop_on_challenge=True,\n    stop_on_rate_limit=True,\n)\n</code></pre> Param Type Default Description <code>max_per_hour</code> <code>int</code> 20 Max actions per hour <code>max_per_day</code> <code>int</code> 150 Max actions per day <code>min_delay</code> <code>float</code> 25.0 Minimum delay (seconds) <code>max_delay</code> <code>float</code> 90.0 Maximum delay (seconds) <code>stop_on_challenge</code> <code>bool</code> <code>True</code> Stop on challenge <code>stop_on_rate_limit</code> <code>bool</code> <code>True</code> Stop on 429"},{"location":"tools/hashtag-research/","title":"HashtagResearchAPI","text":"<p><code>ig.hashtag_research</code> \u2014 Analyze hashtag difficulty, competition, related tags, and get smart suggestions for optimal reach.</p>"},{"location":"tools/hashtag-research/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Full hashtag analysis\nanalysis = ig.hashtag_research.analyze(\"python\")\nprint(f\"Difficulty: {analysis['difficulty']}\")\nprint(f\"Competition: {analysis['competition_score']}\")\nprint(f\"Media count: {analysis['media_count']:,}\")\n</code></pre>"},{"location":"tools/hashtag-research/#methods","title":"Methods","text":""},{"location":"tools/hashtag-research/#analyzetag","title":"analyze(tag)","text":"<p>Full analysis of a single hashtag \u2014 difficulty, competition, engagement, and related tags.</p> Param Type Required Description <code>tag</code> <code>str</code> \u2705 Hashtag to analyze <p>Returns:</p> <pre><code>{\n    \"tag\": \"python\",\n    \"media_count\": 12500000,\n    \"difficulty\": \"hard\",          # very_easy/easy/medium/hard/very_hard\n    \"competition_score\": 0.85,     # 0.0 \u2014 1.0\n    \"audience_size\": \"500K-1M\",\n    \"engagement\": {\"avg_likes\": 450, \"avg_comments\": 12, \"score\": 7.2},\n    \"related_tags\": [{\"name\": \"coding\", \"count\": 3}, ...],\n    \"top_posts\": [...]\n}\n</code></pre>"},{"location":"tools/hashtag-research/#suggestseed_tag-count20-mixbalanced","title":"suggest(seed_tag, count=20, mix=\"balanced\")","text":"<p>Smart hashtag suggestions based on a seed tag.</p> Param Type Default Description <code>seed_tag</code> <code>str</code> \u2014 Starting hashtag <code>count</code> <code>int</code> 20 Number of suggestions <code>mix</code> <code>str</code> \"balanced\" Strategy: \"popular\", \"niche\", \"balanced\" <pre><code>suggestions = ig.hashtag_research.suggest(\"travel\", count=15, mix=\"balanced\")\nfor tag in suggestions:\n    print(f\"#{tag['name']} \u2014 {tag['difficulty']}\")\n</code></pre>"},{"location":"tools/hashtag-research/#relatedtag-count30","title":"related(tag, count=30)","text":"<p>Find related hashtags from top posts.</p>"},{"location":"tools/hashtag-research/#comparetags","title":"compare(tags)","text":"<p>Compare multiple hashtags side by side.</p> <pre><code>result = ig.hashtag_research.compare([\"python\", \"javascript\", \"rust\"])\nfor tag in result[\"tags\"]:\n    print(f\"#{tag['name']}: {tag['media_count']:,} posts, {tag['difficulty']}\")\n</code></pre>"},{"location":"tools/hashtag-research/#async-version","title":"Async Version","text":"<pre><code>async with AsyncInstagram.from_env() as ig:\n    analysis = await ig.hashtag_research.analyze(\"python\")\n    suggestions = await ig.hashtag_research.suggest(\"coding\", count=20)\n</code></pre>"},{"location":"tools/monitor/","title":"MonitorAPI","text":"<p><code>ig.monitor</code> \u2014 Real-time account monitoring with callbacks for follower changes, new posts, bio updates, and more.</p>"},{"location":"tools/monitor/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\nwatcher = ig.monitor.watch(\"cristiano\")\nwatcher.on_new_post(lambda data: print(f\"New post: {data}\"))\nwatcher.on_follower_change(lambda old, new: print(f\"Followers: {old:,} \u2192 {new:,}\"))\nwatcher.on_bio_change(lambda old, new: print(f\"Bio: '{old}' \u2192 '{new}'\"))\n\nig.monitor.start(interval=300)  # Check every 5 minutes\n</code></pre>"},{"location":"tools/monitor/#methods","title":"Methods","text":""},{"location":"tools/monitor/#watchusername","title":"watch(username)","text":"<p>Start watching an account. Returns an <code>AccountWatcher</code> instance.</p> Param Type Required Description <code>username</code> <code>str</code> \u2705 Account to monitor <p>Returns: <code>AccountWatcher</code></p>"},{"location":"tools/monitor/#accountwatcher-callbacks","title":"AccountWatcher Callbacks","text":"<pre><code>watcher = ig.monitor.watch(\"nike\")\nwatcher.on_new_post(callback)          # New post detected\nwatcher.on_follower_change(callback)   # Follower count changed\nwatcher.on_bio_change(callback)        # Biography changed\nwatcher.on_story_update(callback)      # New story\n</code></pre> <p>All callbacks support chaining:</p> <pre><code>watcher.on_new_post(notify).on_follower_change(log).on_bio_change(alert)\n</code></pre>"},{"location":"tools/monitor/#startinterval60","title":"start(interval=60)","text":"<p>Start the monitoring background thread.</p> Param Type Default Description <code>interval</code> <code>int</code> 60 Seconds between checks"},{"location":"tools/monitor/#stop","title":"stop()","text":"<p>Stop monitoring.</p>"},{"location":"tools/monitor/#unwatchusername","title":"unwatch(username)","text":"<p>Remove an account from monitoring.</p>"},{"location":"tools/monitor/#get_stats","title":"get_stats()","text":"<p>Get monitoring statistics.</p> <pre><code>stats = ig.monitor.get_stats()\n# {\"watched_accounts\": 5, \"is_running\": True, \"total_checks\": 142}\n</code></pre>"},{"location":"tools/monitor/#async-version","title":"Async Version","text":"<pre><code>from instaapi import AsyncInstagram\n\nasync with AsyncInstagram.from_env() as ig:\n    watcher = ig.monitor.watch(\"cristiano\")\n    watcher.on_new_post(lambda d: print(\"New post!\"))\n    await ig.monitor.start(interval=300)\n</code></pre>"},{"location":"tools/pipeline/","title":"PipelineAPI","text":"<p><code>ig.pipeline</code> \u2014 Stream Instagram data into SQLite databases or JSONL files with incremental updates and deduplication.</p>"},{"location":"tools/pipeline/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Export to SQLite\nresult = ig.pipeline.to_sqlite(\"cristiano\", \"data.db\",\n    include_posts=True,\n    include_followers=True\n)\nprint(f\"Rows: {result['total_rows']}\")\n</code></pre>"},{"location":"tools/pipeline/#methods","title":"Methods","text":""},{"location":"tools/pipeline/#to_sqliteusername-db_path-include_poststrue-include_followersfalse-include_followingfalse","title":"to_sqlite(username, db_path, include_posts=True, include_followers=False, include_following=False)","text":"<p>Stream profile data into a SQLite database.</p> Param Type Default Description <code>username</code> <code>str</code> \u2014 Target account <code>db_path</code> <code>str</code> \u2014 SQLite file path <code>include_posts</code> <code>bool</code> True Include posts <code>include_followers</code> <code>bool</code> False Include followers <code>include_following</code> <code>bool</code> False Include following <p>Tables created:</p> Table Columns <code>profiles</code> pk, username, full_name, followers, following, media_count, bio, ... <code>posts</code> pk, shortcode, media_type, like_count, comment_count, caption, timestamp <code>followers</code> pk, username, full_name, is_private, is_verified <code>following</code> pk, username, full_name, is_private, is_verified"},{"location":"tools/pipeline/#to_jsonlusername-file_path-include_poststrue-include_followersfalse-max_posts0","title":"to_jsonl(username, file_path, include_posts=True, include_followers=False, max_posts=0)","text":"<p>Export data as JSONL (one JSON object per line).</p> <pre><code>result = ig.pipeline.to_jsonl(\"nike\", \"nike_data.jsonl\", max_posts=100)\n# {\"_type\": \"profile\", \"username\": \"nike\", ...}\n# {\"_type\": \"post\", \"pk\": \"123\", \"like_count\": 50000, ...}\n</code></pre> <p>Returns:</p> <pre><code>{\"lines_written\": 101, \"file_path\": \"nike_data.jsonl\"}\n</code></pre>"},{"location":"tools/pipeline/#incremental-updates","title":"Incremental Updates","text":"<p>Running the pipeline again on the same database will update existing records and add new ones:</p> <pre><code># First run\nig.pipeline.to_sqlite(\"nike\", \"nike.db\")\n\n# Next day \u2014 only new posts added, profile updated\nig.pipeline.to_sqlite(\"nike\", \"nike.db\")\n</code></pre>"},{"location":"tools/pipeline/#async-version","title":"Async Version","text":"<pre><code>async with AsyncInstagram.from_env() as ig:\n    await ig.pipeline.to_sqlite(\"cristiano\", \"data.db\")\n    await ig.pipeline.to_jsonl(\"nike\", \"nike.jsonl\")\n</code></pre>"},{"location":"tools/scheduler/","title":"SchedulerAPI","text":"<p><code>ig.scheduler</code> \u2014 Schedule posts, stories, and reels with background worker. Jobs persist to JSON and survive restarts.</p>"},{"location":"tools/scheduler/#quick-example","title":"Quick Example","text":"<pre><code>ig = Instagram.from_env()\n\n# Schedule a photo post\nig.scheduler.post_at(\n    \"2024-03-01 10:00\",\n    photo=\"photo.jpg\",\n    caption=\"Morning vibes \u2600\ufe0f\",\n)\n\n# Schedule a reel\nig.scheduler.reel_at(\n    \"2024-03-01 18:00\",\n    video=\"reel.mp4\",\n    caption=\"Check this out! \ud83c\udfac\",\n)\n\n# Start background worker\nig.scheduler.start()\n</code></pre>"},{"location":"tools/scheduler/#methods","title":"Methods","text":""},{"location":"tools/scheduler/#post_atscheduled_time-photo-caption-location_idnone","title":"post_at(scheduled_time, photo, caption=\"\", location_id=None)","text":"<p>Schedule a photo post.</p> Param Type Required Default Description <code>scheduled_time</code> <code>str</code> \u2705 \u2014 When to post (<code>\"2024-03-01 10:00\"</code> or ISO) <code>photo</code> <code>str</code> \u2705 \u2014 Path to image file <code>caption</code> <code>str</code> \u274c <code>\"\"</code> Post caption <code>location_id</code> <code>int</code> \u274c <code>None</code> Optional location <p>Returns: <code>dict</code> with <code>{id, job_type, scheduled_at, status}</code></p>"},{"location":"tools/scheduler/#story_atscheduled_time-photonone-videonone","title":"story_at(scheduled_time, photo=None, video=None)","text":"<p>Schedule a story.</p> Param Type Required Description <code>scheduled_time</code> <code>str</code> \u2705 When to post <code>photo</code> <code>str</code> \u274c Path to image (mutually exclusive with video) <code>video</code> <code>str</code> \u274c Path to video <p>Returns: <code>dict</code> \u2014 Job info</p>"},{"location":"tools/scheduler/#reel_atscheduled_time-video-caption-cover_photonone","title":"reel_at(scheduled_time, video, caption=\"\", cover_photo=None)","text":"<p>Schedule a reel.</p> Param Type Required Default Description <code>scheduled_time</code> <code>str</code> \u2705 \u2014 When to post <code>video</code> <code>str</code> \u2705 \u2014 Path to video file <code>caption</code> <code>str</code> \u274c <code>\"\"</code> Reel caption <code>cover_photo</code> <code>str</code> \u274c <code>None</code> Cover image path <p>Returns: <code>dict</code> \u2014 Job info</p>"},{"location":"tools/scheduler/#schedule_actionscheduled_time-action-action_namecustom-kwargs","title":"schedule_action(scheduled_time, action, action_name=\"custom\", **kwargs)","text":"<p>Schedule any custom action.</p> Param Type Required Description <code>scheduled_time</code> <code>str</code> \u2705 When to execute <code>action</code> <code>callable</code> \u2705 Function to execute <code>action_name</code> <code>str</code> \u274c Human-readable name <code>**kwargs</code> \u274c Arguments for the action <pre><code>ig.scheduler.schedule_action(\n    \"2024-03-01 03:00\",\n    action=ig.growth.unfollow_non_followers,\n    action_name=\"cleanup_unfollowers\",\n    max_count=50,\n)\n</code></pre>"},{"location":"tools/scheduler/#list_jobsinclude_donefalse","title":"list_jobs(include_done=False)","text":"<p>List all scheduled jobs.</p> <p>Returns: <code>list[dict]</code></p>"},{"location":"tools/scheduler/#canceljob_id","title":"cancel(job_id)","text":"<p>Cancel a pending job by ID.</p>"},{"location":"tools/scheduler/#clear_done","title":"clear_done()","text":"<p>Remove completed/failed/cancelled jobs from the list.</p>"},{"location":"tools/scheduler/#start-stop","title":"start() / stop()","text":"<p>Start or stop the background worker thread that checks for due jobs every 30 seconds.</p> <pre><code>ig.scheduler.start()   # Start background worker\n# ... scheduler runs in background ...\nig.scheduler.stop()    # Stop worker\n</code></pre>"},{"location":"tools/scheduler/#job-persistence","title":"Job Persistence","text":"<p>Jobs are automatically saved to <code>scheduler_jobs.json</code> and restored on restart. The file is updated every time a job is added, executed, or cancelled.</p>"}]}